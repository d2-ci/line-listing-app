import{u as h,r as d,R as n,af as m,ag as L,L as A,C as I,a as v,P as s,j as c}from"./index-BO4EqTec.js";import{cU as R,c9 as T}from"./index-BRpJOTiU.js";const l={READY:"READY",INSTALLING:"INSTALLING"};function u({installingWorker:e,onStateChange:t}){e.onstatechange=()=>{e.state==="activated"&&t(l.READY)}}async function N({onStateChange:e}){if(!navigator.serviceWorker)return null;const t=await navigator.serviceWorker.getRegistration();return t?t.active?l.READY:t.installing?(u({installingWorker:t.installing,onStateChange:e}),l.INSTALLING):(t.onupdatefound=()=>{e(l.INSTALLING);const r=t.installing;r&&u({installingWorker:r,onStateChange:e})},null):null}const S=()=>n.createElement(A,null,n.createElement(I,null,n.createElement(v,null))),f=({id:e,children:t,isParentCached:r=!1})=>{const{startRecording:i,isCached:a,remove:o}=m(e);return d.useEffect(()=>{const g=r&&!a,E=!r&&a;g&&i({onError:console.error}),E&&o()},[a,r,o,i]),n.createElement(L,{id:e,loadingMask:n.createElement(S,null)},t)};f.propTypes={children:s.node,id:s.string,isParentCached:s.bool};const p=({onInstallationStatusChange:e=Function.prototype,children:t,cacheId:r,isParentCached:i=!1,...a})=>{const{pwaEnabled:o}=h();return d.useEffect(()=>{N({onStateChange:e}).then(e)},[e]),a?n.createElement("div",{style:{display:"flex",height:"100%",overflow:"hidden"}},o?n.createElement(f,{id:r,isParentCached:i},t(a)):t(a),n.createElement(R,{colors:!0,spacers:!0,elevations:!0})):null};p.propTypes={cacheId:s.string,children:s.func,isParentCached:s.bool,onInstallationStatusChange:s.func};const y=e=>c.jsx(p,{...e,children:t=>c.jsx(T,{...t})});export{y as default};
//# sourceMappingURL=PluginWrapper-eVecxLGD.js.map
