{"version":3,"file":"static/js/app.a0404298.chunk.js","mappings":"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","sources":["D2App/modules/dimensionConstants.js","D2App/modules/fields.js","D2App/modules/layout.js","D2App/modules/options.js","D2App/modules/repetition.js","D2App/modules/current.js","D2App/reducers/current.js","D2App/reducers/visualization.js","D2App/modules/getRequestOptions.js","D2App/modules/visualization.js","D2App/modules/dimensionId.js","D2App/components/Visualization/analyticsQueryTools.js","D2App/assets/ErrorIcons.js","D2App/modules/error.js","D2App/modules/layoutValidation.js","D2App/modules/conditions.js","D2App/modules/accessoryPanelConstants.js","D2App/modules/localStorage.js","D2App/modules/orgUnit.js","D2App/modules/parentGraphMap.js","D2App/modules/ui.js","D2App/reducers/loader.js","D2App/modules/mainDimensions.js","D2App/modules/programTypes.js","D2App/modules/programDimensions.js","D2App/modules/timeDimensions.js","D2App/modules/metadata.js","D2App/reducers/metadata.js","D2App/actions/metadata.js","D2App/reducers/ui.js","D2App/actions/ui.js","D2App/actions/visualization.js","D2App/actions/loader.js","D2App/actions/current.js","D2App/modules/dataStatistics.js","D2App/modules/history.js","D2App/modules/systemSettings.js","D2App/modules/userSettings.js","webpack://@dhis2/app-shell/./src/D2App/components/App.module.css?338c","webpack://@dhis2/app-shell/./src/D2App/components/DetailsPanel/styles/DetailsPanel.module.css?738c","D2App/components/DetailsPanel/DetailsPanel.js","D2App/components/UpdateButton/UpdateButton.js","D2App/components/UpdateButton/UpdateVisualizationContainer.js","D2App/components/Dialogs/AddToLayoutButton/AddToLayoutButton.js","webpack://@dhis2/app-shell/./src/D2App/components/Dialogs/styles/DimensionModal.module.css?faeb","D2App/components/Dialogs/DimensionModal.js","webpack://@dhis2/app-shell/./src/D2App/components/Dialogs/styles/Common.module.css?9620","webpack://@dhis2/app-shell/./src/D2App/components/Dialogs/Conditions/styles/Condition.module.css?8dd0","D2App/components/Dialogs/Conditions/AlphanumericCondition.js","D2App/components/Dialogs/Conditions/BooleanCondition.js","D2App/components/Dialogs/Conditions/DateCondition.js","D2App/api/legendSets.js","D2App/components/Dialogs/Conditions/NumericCondition.js","D2App/api/options.js","D2App/modules/utils.js","D2App/components/Dialogs/common/TransferEmptySelection.js","D2App/components/Dialogs/common/TransferLeftHeader.js","D2App/components/Dialogs/common/TransferRightHeader.js","D2App/components/Dialogs/common/TransferSourceEmptyPlaceholder.js","D2App/components/Dialogs/utils.js","D2App/components/Dialogs/Conditions/OptionSetCondition.js","D2App/components/Dialogs/Conditions/OrgUnitCondition.js","webpack://@dhis2/app-shell/./src/D2App/components/Dialogs/Conditions/styles/ConditionsManager.module.css?bfa2","D2App/components/Dialogs/Conditions/RepeatableEvents.js","D2App/components/Dialogs/Conditions/ConditionsManager.js","D2App/components/Dialogs/DynamicDimension.js","D2App/components/Dialogs/FixedDimension.js","D2App/modules/dates.js","webpack://@dhis2/app-shell/./src/D2App/components/Dialogs/PeriodDimension/PeriodDimension.module.css?0a27","webpack://@dhis2/app-shell/./src/D2App/components/Dialogs/PeriodDimension/StartEndDate.module.css?1c80","D2App/components/Dialogs/PeriodDimension/StartEndDate.js","D2App/components/Dialogs/PeriodDimension/PeriodDimension.js","D2App/components/Dialogs/PeriodDimension/index.js","D2App/components/Dialogs/DialogManager.js","webpack://@dhis2/app-shell/./src/D2App/components/DndContext.module.css?f5fe","D2App/components/MainSidebar/DimensionItem/DimensionIcon.js","webpack://@dhis2/app-shell/./src/D2App/components/Layout/styles/Chip.module.css?450b","D2App/components/Layout/ChipBase.js","webpack://@dhis2/app-shell/./src/D2App/components/MainSidebar/DimensionItem/DimensionItemBase.module.css?5b86","D2App/components/MainSidebar/DimensionItem/DimensionItemBase.js","D2App/components/DndContext.js","D2App/components/DownloadMenu/constants.js","D2App/components/DownloadMenu/PlainDataSourceSubMenu.js","D2App/components/DownloadMenu/DownloadMenu.js","D2App/components/DownloadMenu/useDownload.js","D2App/components/DownloadMenu/ToolbarDownloadDropdown.js","webpack://@dhis2/app-shell/./src/D2App/components/DownloadMenu/ModalDownloadDropdown.module.css?780d","D2App/components/DownloadMenu/ModalDownloadDropdown.js","D2App/modules/tableValues.js","webpack://@dhis2/app-shell/./src/D2App/components/Visualization/styles/Visualization.module.css?4025","D2App/modules/getDimensionsWithSuffix.js","D2App/components/Visualization/useAnalyticsData.js","D2App/components/Visualization/Visualization.js","D2App/components/InterpretationModal/interpretationIdQueryParam.js","D2App/components/InterpretationModal/InterpretationModal.js","D2App/modules/axis.js","webpack://@dhis2/app-shell/./src/D2App/components/IconButton/styles/IconButton.module.css?e6ab","D2App/components/IconButton/IconButton.js","webpack://@dhis2/app-shell/./src/D2App/components/DimensionMenu/DimensionMenu.module.css?343c","D2App/components/DimensionMenu/MenuItems.js","D2App/components/DimensionMenu/DimensionMenu.js","webpack://@dhis2/app-shell/./src/D2App/components/Layout/styles/Tooltip.module.css?9fab","D2App/components/Layout/TooltipContent.js","D2App/components/Layout/Chip.js","webpack://@dhis2/app-shell/./src/D2App/components/Layout/DefaultLayout/styles/DropZone.module.css?9973","D2App/components/Layout/DefaultLayout/DropZone.js","webpack://@dhis2/app-shell/./src/D2App/components/Layout/DefaultLayout/styles/DefaultAxis.module.css?0e53","D2App/components/Layout/DefaultLayout/DefaultAxis.js","webpack://@dhis2/app-shell/./src/D2App/components/Layout/DefaultLayout/styles/DefaultLayout.module.css?dc5b","webpack://@dhis2/app-shell/./src/D2App/components/Layout/LineListLayout/styles/LineListLayout.module.css?3fd2","D2App/components/Layout/LineListLayout/LineListLayout.js","webpack://@dhis2/app-shell/./src/D2App/components/Layout/styles/Layout.module.css?810b","D2App/components/Layout/Layout.js","webpack://@dhis2/app-shell/./src/D2App/components/LoadingMask/styles/LoadingMask.module.css?6d23","D2App/components/LoadingMask/LoadingMask.js","webpack://@dhis2/app-shell/./src/D2App/components/MainSidebar/ProgramDimensionsPanel/ProgramSelect.module.css?cbf6","webpack://@dhis2/app-shell/./src/D2App/components/MainSidebar/ProgramDimensionsPanel/SingleSelectOptionWithSuffix.module.css?a973","D2App/components/MainSidebar/ProgramDimensionsPanel/SingleSelectOptionWithSuffix.js","D2App/components/MainSidebar/ProgramDimensionsPanel/StageSelect.js","D2App/components/MainSidebar/ProgramDimensionsPanel/ProgramSelect.js","D2App/components/MainSidebar/ProgramDimensionsPanel/TypeSelect.js","webpack://@dhis2/app-shell/./src/D2App/components/MainSidebar/InputPanel/InputOption.module.css?df37","D2App/components/MainSidebar/InputPanel/InputOption.js","webpack://@dhis2/app-shell/./src/D2App/components/MainSidebar/InputPanel/InputPanel.module.css?81da","D2App/components/MainSidebar/InputPanel/InputPanel.js","webpack://@dhis2/app-shell/./src/D2App/components/MainSidebar/common.module.css?48c3","webpack://@dhis2/app-shell/./src/D2App/components/MainSidebar/DimensionItem/DimensionItemButton.module.css?2c48","D2App/components/MainSidebar/DimensionItem/DimensionItemButton.js","D2App/components/MainSidebar/DimensionItem/DimensionItem.js","webpack://@dhis2/app-shell/./src/D2App/components/MainSidebar/MainSidebarSection.module.css?8966","D2App/components/MainSidebar/MainSidebarSection.js","D2App/components/MainSidebar/SelectedDimensionsContext.js","D2App/components/MainSidebar/MainDimensions.js","webpack://@dhis2/app-shell/./src/D2App/components/MainSidebar/MainSidebar.module.css?d59c","webpack://@dhis2/app-shell/./src/D2App/components/MainSidebar/MenuItem/MenuItem.module.css?271d","D2App/components/MainSidebar/MenuItem/MenuItem.js","D2App/components/MainSidebar/DimensionsList/DimensionListFields.js","webpack://@dhis2/app-shell/./src/D2App/components/MainSidebar/DimensionsList/DimensionsList.module.css?d7e0","D2App/components/MainSidebar/DimensionsList/DimensionsList.js","D2App/components/MainSidebar/ProgramDimensionsPanel/useProgramDataDimensions.js","D2App/components/MainSidebar/ProgramDimensionsPanel/ProgramDataDimensionsList.js","D2App/components/MainSidebar/ProgramDimensionsPanel/ProgramDimensions.js","webpack://@dhis2/app-shell/./src/D2App/components/MainSidebar/ProgramDimensionsPanel/ProgramDimensionsFilter.module.css?3693","D2App/components/MainSidebar/ProgramDimensionsPanel/StageFilter.js","D2App/components/MainSidebar/ProgramDimensionsPanel/ProgramDimensionsFilter.js","webpack://@dhis2/app-shell/./src/D2App/components/MainSidebar/ProgramDimensionsPanel/ProgramDimensionsPanel.module.css?9328","D2App/components/MainSidebar/ProgramDimensionsPanel/ProgramDimensionsPanel.js","D2App/components/MainSidebar/TrackedEntityDimensionsMenuItem.js","D2App/components/MainSidebar/TrackedEntityDimensionsPanel/ProgramFilter.js","webpack://@dhis2/app-shell/./src/D2App/components/MainSidebar/TrackedEntityDimensionsPanel/TrackedEntityDimensionsPanel.module.css?267e","D2App/components/MainSidebar/TrackedEntityDimensionsPanel/useTrackedEntityDimensions.js","D2App/components/MainSidebar/TrackedEntityDimensionsPanel/TrackedEntityDimensionsPanel.js","D2App/components/MainSidebar/useResizableAccessorySidebar.js","D2App/components/MainSidebar/YourDimensionsPanel/useYourDimensions.js","D2App/components/MainSidebar/YourDimensionsMenuItem.js","webpack://@dhis2/app-shell/./src/D2App/components/MainSidebar/YourDimensionsPanel/YourDimensionsPanel.module.css?5177","D2App/components/MainSidebar/YourDimensionsPanel/YourDimensionsPanel.js","D2App/components/MainSidebar/MainSidebar.js","webpack://@dhis2/app-shell/./src/D2App/components/TitleBar/styles/ExpandedVisualizationCanvasToggle.module.css?55fc","D2App/components/TitleBar/ExpandedVisualizationCanvasToggle.js","webpack://@dhis2/app-shell/./src/D2App/components/TitleBar/styles/TitleBar.module.css?adeb","D2App/components/TitleBar/TitleBar.js","webpack://@dhis2/app-shell/./src/D2App/components/Toolbar/styles/AppLogo.module.css?46be","D2App/components/Toolbar/AppLogo.js","D2App/components/Toolbar/InterpretationsAndDetailsToggler.js","webpack://@dhis2/app-shell/./src/D2App/components/VisualizationOptions/styles/VisualizationOptions.module.css?e7c3","D2App/components/VisualizationOptions/Options/SelectBaseOption.js","D2App/components/VisualizationOptions/Options/DigitGroupSeparator.js","D2App/components/VisualizationOptions/Options/DisplayDensity.js","D2App/components/VisualizationOptions/Options/FontSize.js","D2App/components/VisualizationOptions/Options/CheckboxBaseOption.js","D2App/components/VisualizationOptions/Options/ShowHierarchy.js","D2App/components/VisualizationOptions/Options/SkipRounding.js","D2App/modules/options/sections/templates/display.js","D2App/modules/options/tabs/data.js","D2App/components/VisualizationOptions/Options/LegendSet.js","D2App/components/VisualizationOptions/Options/LegendDisplayStrategy.js","D2App/components/VisualizationOptions/Options/RadioBaseOption.js","D2App/components/VisualizationOptions/Options/LegendDisplayStyle.js","D2App/components/VisualizationOptions/Options/ShowLegendKey.js","D2App/components/VisualizationOptions/Options/Legend.js","D2App/modules/options/tabs/legend.js","D2App/modules/options/tabs/style.js","D2App/components/VisualizationOptions/Options/ColSubTotals.js","D2App/components/VisualizationOptions/Options/ColTotals.js","D2App/components/VisualizationOptions/Options/HideEmptyRows.js","D2App/components/VisualizationOptions/Options/RowSubTotals.js","D2App/components/VisualizationOptions/Options/RowTotals.js","D2App/components/VisualizationOptions/Options/ShowDimensionLabels.js","D2App/components/VisualizationOptions/Options/TextBaseOption.js","D2App/components/VisualizationOptions/Options/Title.js","D2App/modules/options/sections/templates/emptyData.js","D2App/modules/options/sections/templates/totals.js","D2App/components/VisualizationOptions/Options/MeasureCriteria.js","D2App/modules/options/config.js","D2App/modules/options/pivotTableConfig.js","D2App/modules/options/tabs/limitValues.js","D2App/modules/options/lineListConfig.js","D2App/components/VisualizationOptions/VisualizationOptionsManager.js","D2App/components/Toolbar/ViewDropDown.js","D2App/components/Toolbar/MenuBar.js","D2App/components/Toolbar/UpdateButton.js","D2App/components/Toolbar/Toolbar.js","webpack://@dhis2/app-shell/./src/D2App/components/Visualization/styles/StartScreen.module.css?7ef9","D2App/components/Visualization/StartScreen.js","D2App/components/App.js","D2App/reducers/index.js","D2App/configureStore.js","D2App/middleware/metadata.js","D2App/locales/index.js","D2App/AppWrapper.js"],"sourcesContent":["/**PROGRAM**/\n\nimport { DIMENSION_TYPE_CATEGORY, DIMENSION_TYPE_CATEGORY_OPTION_GROUP_SET, DIMENSION_TYPE_DATA_ELEMENT, DIMENSION_TYPE_PROGRAM_ATTRIBUTE, DIMENSION_TYPE_PROGRAM_INDICATOR, DIMENSION_TYPE_ORGANISATION_UNIT_GROUP_SET } from '@dhis2/analytics';\nexport const DIMENSION_TYPES_PROGRAM = new Set([DIMENSION_TYPE_DATA_ELEMENT, DIMENSION_TYPE_PROGRAM_ATTRIBUTE, DIMENSION_TYPE_PROGRAM_INDICATOR, DIMENSION_TYPE_CATEGORY, DIMENSION_TYPE_CATEGORY_OPTION_GROUP_SET]);\nexport const DIMENSION_TYPES_YOURS = new Set([DIMENSION_TYPE_ORGANISATION_UNIT_GROUP_SET]);\n\n/**MAIN**/\nexport const DIMENSION_TYPE_STATUS = 'STATUS';\nexport const DIMENSION_TYPE_USER = 'USER';\n\n/** DIMENSION_IDS */\n\nexport const DIMENSION_ID_PROGRAM_STATUS = 'programStatus';\nexport const DIMENSION_ID_EVENT_STATUS = 'eventStatus';\nexport const DIMENSION_ID_CREATED_BY = 'createdBy';\nexport const DIMENSION_ID_LAST_UPDATED_BY = 'lastUpdatedBy';\n\n/**TIME - specific time dimensions**/\nexport const DIMENSION_ID_EVENT_DATE = 'eventDate';\nexport const DIMENSION_ID_ENROLLMENT_DATE = 'enrollmentDate';\nexport const DIMENSION_ID_INCIDENT_DATE = 'incidentDate';\nexport const DIMENSION_ID_SCHEDULED_DATE = 'scheduledDate';\nexport const DIMENSION_ID_LAST_UPDATED = 'lastUpdated';\nexport const DIMENSION_ID_CREATED = 'created';\nexport const DIMENSION_IDS_TIME = new Set([DIMENSION_ID_EVENT_DATE, DIMENSION_ID_ENROLLMENT_DATE, DIMENSION_ID_INCIDENT_DATE, DIMENSION_ID_SCHEDULED_DATE, DIMENSION_ID_LAST_UPDATED]);\nexport const getUiDimensionType = _ref => {\n  let {\n    dimensionId,\n    dimensionType\n  } = _ref;\n  switch (dimensionId) {\n    case DIMENSION_ID_PROGRAM_STATUS:\n    case DIMENSION_ID_EVENT_STATUS:\n      return DIMENSION_TYPE_STATUS;\n    case DIMENSION_ID_CREATED_BY:\n    case DIMENSION_ID_LAST_UPDATED_BY:\n      return DIMENSION_TYPE_USER;\n    default:\n      return dimensionType;\n  }\n};","export const BASE_FIELD_TYPE = 'type';","import { AXIS_ID_COLUMNS, AXIS_ID_FILTERS, AXIS_ID_ROWS, VIS_TYPE_LINE_LIST, VIS_TYPE_PIVOT_TABLE } from '@dhis2/analytics';\n\n// Exclude one or many dimensions from layout\nexport const getFilteredLayout = (layout, excludedIds) => {\n  var _layout$AXIS_ID_COLUM, _layout$AXIS_ID_ROWS, _layout$AXIS_ID_FILTE;\n  const ids = Array.isArray(excludedIds) ? excludedIds : [excludedIds];\n  return {\n    [AXIS_ID_COLUMNS]: ((_layout$AXIS_ID_COLUM = layout[AXIS_ID_COLUMNS]) === null || _layout$AXIS_ID_COLUM === void 0 ? void 0 : _layout$AXIS_ID_COLUM.filter(dim => !ids.includes(dim))) || [],\n    [AXIS_ID_ROWS]: ((_layout$AXIS_ID_ROWS = layout[AXIS_ID_ROWS]) === null || _layout$AXIS_ID_ROWS === void 0 ? void 0 : _layout$AXIS_ID_ROWS.filter(dim => !ids.includes(dim))) || [],\n    [AXIS_ID_FILTERS]: ((_layout$AXIS_ID_FILTE = layout[AXIS_ID_FILTERS]) === null || _layout$AXIS_ID_FILTE === void 0 ? void 0 : _layout$AXIS_ID_FILTE.filter(dim => !ids.includes(dim))) || []\n  };\n};\nexport const LAYOUT_TYPE_LINE_LIST = 'LAYOUT_TYPE_LINE_LIST';\nexport const LAYOUT_TYPE_PIVOT_TABLE = 'LAYOUT_TYPE_PIVOT_TABLE';\nexport const getAdaptedUiLayoutByType = (layout, type) => {\n  switch (type) {\n    case VIS_TYPE_LINE_LIST:\n      {\n        return getLineListLayout(layout);\n      }\n    case VIS_TYPE_PIVOT_TABLE:\n    default:\n      return layout;\n  }\n};\n\n// Transform from ui.layout to line list layout format\nconst getLineListLayout = layout => ({\n  [AXIS_ID_COLUMNS]: [...layout[AXIS_ID_COLUMNS], ...(layout[AXIS_ID_ROWS] || [])],\n  [AXIS_ID_ROWS]: [],\n  [AXIS_ID_FILTERS]: [...layout[AXIS_ID_FILTERS]]\n});\n\n// Accepts layout: { columns: ['dx'] }\n// Returns inverse layout: { dx: 'columns' }\nexport const getInverseLayout = layout => {\n  const entries = Object.entries(layout);\n  const map = {};\n  entries.forEach(_ref => {\n    let [axisId, dimensionIds] = _ref;\n    dimensionIds.forEach(id => {\n      map[id] = axisId;\n    });\n  });\n  return map;\n};","import pick from 'lodash-es/pick';\nexport const OPTION_LEGEND_DISPLAY_STRATEGY = 'legendDisplayStrategy';\nexport const OPTION_LEGEND_DISPLAY_STYLE = 'legendDisplayStyle';\nexport const OPTION_LEGEND_SET = 'legendSet';\nexport const OPTION_SHOW_LEGEND_KEY = 'showLegendKey';\nexport const OPTION_MEASURE_CRITERIA = 'measureCriteria';\nexport const OPTION_FONT_SIZE = 'fontSize';\nexport const OPTION_DIGIT_GROUP_SEPARATOR = 'digitGroupSeparator';\nexport const OPTION_DISPLAY_DENSITY = 'displayDensity';\nexport const OPTION_SHOW_HIERARCHY = 'showHierarchy';\nexport const OPTION_SKIP_ROUNDING = 'skipRounding';\nexport const DISPLAY_DENSITY_COMFORTABLE = 'COMFORTABLE';\nexport const DISPLAY_DENSITY_NORMAL = 'NORMAL';\nexport const DISPLAY_DENSITY_COMPACT = 'COMPACT';\nexport const FONT_SIZE_LARGE = 'LARGE';\nexport const FONT_SIZE_NORMAL = 'NORMAL';\nexport const FONT_SIZE_SMALL = 'SMALL';\nexport const SEPARATOR_NONE = 'NONE';\nexport const SEPARATOR_SPACE = 'SPACE';\nexport const SEPARATOR_COMMA = 'COMMA';\nexport const options = {\n  /*\n  TODO: PIVOT TABLE OPTIONS:\n  showHierarchy: { defaultValue: false, requestable: true, savable: true },\n  showDimensionLabels: {\n      defaultValue: false,\n      requestable: false,\n      savable: true,\n  },\n  colTotals: { defaultValue: false, requestable: false, savable: true },\n  colSubTotals: { defaultValue: false, requestable: false, savable: true },\n  rowTotals: { defaultValue: false, requestable: false, savable: true },\n  rowSubTotals: { defaultValue: false, requestable: false, savable: true },\n  // FIXME: hideEmptyRowItems or hideEmptyRows ??\n  hideEmptyRowItems: {\n      defaultValue: 'NONE',\n      requestable: false,\n      savable: true,\n  },\n  hideEmptyRows: { defaultValue: false, requestable: false, savable: true },\n  // TODO: Hide n/a data\n  title: { defaultValue: undefined, requestable: false, savable: true },\n  completedOnly: { defaultValue: false, requestable: true, savable: true },*/\n  [OPTION_DISPLAY_DENSITY]: {\n    defaultValue: DISPLAY_DENSITY_NORMAL,\n    requestable: false,\n    savable: true\n  },\n  [OPTION_FONT_SIZE]: {\n    defaultValue: FONT_SIZE_NORMAL,\n    requestable: false,\n    savable: true\n  },\n  [OPTION_DIGIT_GROUP_SEPARATOR]: {\n    defaultValue: SEPARATOR_SPACE,\n    requestable: false,\n    savable: true\n  },\n  [OPTION_SHOW_HIERARCHY]: {\n    defaultValue: false,\n    requestable: false,\n    savable: true\n  },\n  [OPTION_SKIP_ROUNDING]: {\n    defaultValue: false,\n    requestable: true,\n    savable: true\n  }\n  // TODO: Limit the number of rows shown in the table\n  // TODO: Only show the [top/bottom] x rows\n};\nexport default options;\nexport const getOptionsForUi = () => {\n  return Object.entries({\n    ...options\n  }).reduce((map, _ref) => {\n    let [option, props] = _ref;\n    map[option] = props.defaultValue;\n    return map;\n  }, {});\n};\nexport const getOptionsForRequest = () => {\n  return Object.entries(options).filter(entry => entry[1].requestable // entry = [option, props]\n  );\n};\nexport const getOptionsFromVisualization = visualization => {\n  const optionsFromVisualization = {\n    ...getOptionsForUi(),\n    ...pick(visualization, Object.keys(options))\n  };\n  if (visualization.legend) {\n    optionsFromVisualization[OPTION_LEGEND_DISPLAY_STRATEGY] = visualization.legend.strategy;\n    optionsFromVisualization[OPTION_LEGEND_DISPLAY_STYLE] = visualization.legend.style;\n    optionsFromVisualization[OPTION_LEGEND_SET] = visualization.legend.set;\n    optionsFromVisualization[OPTION_SHOW_LEGEND_KEY] = visualization.legend.showKey;\n  }\n  return optionsFromVisualization;\n};","import { layoutGetAllDimensions } from '@dhis2/analytics';\nimport isObject from 'lodash-es/isObject';\nimport { formatDimensionId } from './dimensionId.js';\nconst PARSE_CURRENT_REPETITION_ERROR = 'parseCurrentRepetition: Invalid input';\nexport const PROP_MOST_RECENT = 'mostRecent';\nexport const PROP_OLDEST = 'oldest';\nexport const getDefaultCurrentRepetition = () => [];\nexport const getDefaultUiRepetition = () => ({\n  [PROP_MOST_RECENT]: 1,\n  [PROP_OLDEST]: 0\n});\nexport const getRepetitionFromVisualisation = vis => {\n  const repetitionByDimension = {};\n  layoutGetAllDimensions(vis).filter(d => d.repetition).forEach(d => {\n    var _d$programStage, _d$program;\n    repetitionByDimension[formatDimensionId({\n      dimensionId: d.dimension,\n      programStageId: (_d$programStage = d.programStage) === null || _d$programStage === void 0 ? void 0 : _d$programStage.id,\n      programId: (_d$program = d.program) === null || _d$program === void 0 ? void 0 : _d$program.id,\n      outputType: vis.outputType\n    })] = parseCurrentRepetition(d.repetition.indexes);\n  });\n  return repetitionByDimension;\n};\nexport const parseCurrentRepetition = repetition => {\n  if (!(Array.isArray(repetition) && repetition.every(i => Number.isFinite(i)))) {\n    throw new Error(PARSE_CURRENT_REPETITION_ERROR);\n  }\n  return repetition.length ? {\n    [PROP_MOST_RECENT]: repetition.filter(n => n < 1).length,\n    [PROP_OLDEST]: repetition.filter(n => n > 0).length\n  } : getDefaultUiRepetition();\n};\nexport const PARSE_UI_REPETITION_ERROR = 'parseUiRepetition: Invalid input';\nexport const parseUiRepetition = repetition => {\n  if (!(isObject(repetition) && Number.isFinite(repetition[PROP_MOST_RECENT]) && repetition[PROP_MOST_RECENT] >= 0 && Number.isFinite(repetition[PROP_OLDEST]) && repetition[PROP_OLDEST] >= 0)) {\n    throw new Error(PARSE_UI_REPETITION_ERROR);\n  }\n\n  // default\n  if (repetition[PROP_OLDEST] === 0 && [0, 1].includes(repetition[PROP_MOST_RECENT])) {\n    return getDefaultCurrentRepetition();\n  }\n  return [...new Array(repetition[PROP_OLDEST]).fill().map((_, i) => i + 1), ...new Array(repetition[PROP_MOST_RECENT]).fill().map((_, i) => -i + 0).sort((a, b) => a - b)];\n};","import { dimensionCreate, VIS_TYPE_LINE_LIST } from '@dhis2/analytics';\nimport pick from 'lodash-es/pick';\nimport { extractDimensionIdParts } from './dimensionId.js';\nimport { BASE_FIELD_TYPE } from './fields.js';\nimport { getAdaptedUiLayoutByType } from './layout.js';\nimport { options, OPTION_LEGEND_DISPLAY_STRATEGY, OPTION_LEGEND_DISPLAY_STYLE, OPTION_LEGEND_SET, OPTION_SHOW_LEGEND_KEY } from './options.js';\nimport { parseUiRepetition } from './repetition.js';\nimport { getDimensionIdFromHeaderName, OUTPUT_TYPE_TRACKED_ENTITY } from './visualization.js';\nexport const getAdaptedUiSorting = (sorting, visualization) => sorting ? [{\n  dimension: getDimensionIdFromHeaderName(sorting.dimension, visualization) || sorting.dimension,\n  direction: sorting.direction.toUpperCase()\n}] : undefined;\nexport const getDefaultFromUi = (current, ui) => {\n  const adaptedUi = {\n    ...ui,\n    layout: {\n      ...getAdaptedUiLayoutByType(ui.layout, VIS_TYPE_LINE_LIST)\n    },\n    itemsByDimension: getItemsByDimensionFromUi(ui),\n    sorting: getAdaptedUiSorting(ui.sorting, current)\n  };\n  const output = {\n    // merge with current if current is a saved visualization to keep id, access etc\n    ...((current === null || current === void 0 ? void 0 : current.id) && current),\n    [BASE_FIELD_TYPE]: adaptedUi.type,\n    outputType: adaptedUi.input.type,\n    sorting: adaptedUi.sorting,\n    ...getEntityTypeFromUi(adaptedUi),\n    ...getProgramFromUi(adaptedUi),\n    ...getProgramStageFromUi(adaptedUi),\n    ...getAxesFromUi(adaptedUi),\n    ...getOptionsFromUi(adaptedUi)\n  };\n  if (output.outputType === OUTPUT_TYPE_TRACKED_ENTITY) {\n    // delete program and programStage if output type is TE as the api doesn't accept these props at all\n    delete output.program;\n    delete output.programStage;\n  } else {\n    // delete trackedEntityType if output type is not TE\n    delete output.trackedEntityType;\n  }\n  return output;\n};\nexport const getEntityTypeFromUi = ui => {\n  var _ui$entityType;\n  return {\n    trackedEntityType: {\n      id: (_ui$entityType = ui.entityType) === null || _ui$entityType === void 0 ? void 0 : _ui$entityType.id\n    }\n  };\n};\nexport const getProgramFromUi = ui => {\n  var _ui$program;\n  return {\n    program: {\n      id: (_ui$program = ui.program) === null || _ui$program === void 0 ? void 0 : _ui$program.id\n    }\n  };\n};\nexport const getProgramStageFromUi = ui => {\n  var _ui$program2;\n  return {\n    programStage: {\n      id: (_ui$program2 = ui.program) === null || _ui$program2 === void 0 ? void 0 : _ui$program2.stageId\n    }\n  };\n};\nexport const getOptionsFromUi = ui => {\n  const legend = {\n    strategy: ui.options[OPTION_LEGEND_DISPLAY_STRATEGY],\n    style: ui.options[OPTION_LEGEND_DISPLAY_STYLE],\n    set: ui.options[OPTION_LEGEND_SET],\n    showKey: ui.options[OPTION_SHOW_LEGEND_KEY]\n  };\n  return {\n    ...pick(ui.options, Object.keys(options)),\n    legend\n  };\n};\nexport const getAxesFromUi = ui => Object.entries(ui.layout).reduce((layout, _ref) => {\n  let [axisId, dimensionIds] = _ref;\n  return {\n    ...layout,\n    [axisId]: dimensionIds.map(id => {\n      var _ui$conditions$id, _ui$conditions$id2;\n      const {\n        programId,\n        programStageId,\n        dimensionId\n      } = extractDimensionIdParts(id);\n      return dimensionCreate(dimensionId, ui.itemsByDimension[id], {\n        filter: (_ui$conditions$id = ui.conditions[id]) === null || _ui$conditions$id === void 0 ? void 0 : _ui$conditions$id.condition,\n        ...(((_ui$conditions$id2 = ui.conditions[id]) === null || _ui$conditions$id2 === void 0 ? void 0 : _ui$conditions$id2.legendSet) && {\n          legendSet: {\n            id: ui.conditions[id].legendSet\n          }\n        }),\n        ...(ui.repetitionByDimension && ui.repetitionByDimension[id] && {\n          repetition: {\n            indexes: parseUiRepetition(ui.repetitionByDimension[id])\n          }\n        }),\n        ...(programId && {\n          program: {\n            id: programId\n          }\n        }),\n        ...(programStageId && {\n          programStage: {\n            id: programStageId\n          }\n        })\n      });\n    }).filter(dim => dim !== null)\n  };\n}, {});\nexport const getItemsByDimensionFromUi = ui => {\n  const result = {};\n  Object.keys(ui.itemsByDimension).forEach(key => result[key] = ui.itemsByDimension[key]);\n  return result;\n};","import { getDefaultFromUi } from '../modules/current.js';\nexport const SET_CURRENT = 'SET_CURRENT';\nexport const SET_CURRENT_FROM_UI = 'SET_CURRENT_FROM_UI';\nexport const CLEAR_CURRENT = 'CLEAR_CURRENT';\nexport const DEFAULT_CURRENT = null;\nexport default (function () {\n  let state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : DEFAULT_CURRENT;\n  let action = arguments.length > 1 ? arguments[1] : undefined;\n  switch (action.type) {\n    case SET_CURRENT:\n      {\n        return action.value;\n      }\n    case SET_CURRENT_FROM_UI:\n      {\n        switch (action.value.type) {\n          default:\n            {\n              return getDefaultFromUi(state, action.value);\n            }\n        }\n      }\n    case CLEAR_CURRENT:\n      return DEFAULT_CURRENT;\n    default:\n      return state;\n  }\n});\n\n// Selectors\n\nexport const sGetCurrent = state => state.current;\nexport const sGetCurrentId = state => {\n  var _state$current;\n  return (_state$current = state.current) === null || _state$current === void 0 ? void 0 : _state$current.id;\n};\nexport const sGetCurrentFromUi = state => {\n  const ui = state.ui;\n  switch (ui.type) {\n    default:\n      {\n        return getDefaultFromUi(state.current, ui);\n      }\n  }\n};","export const SET_VISUALIZATION = 'SET_VISUALIZATION';\nexport const CLEAR_VISUALIZATION = 'CLEAR_VISUALIZATION';\nexport const DEFAULT_VISUALIZATION = null;\nexport default (function () {\n  let state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : DEFAULT_VISUALIZATION;\n  let action = arguments.length > 1 ? arguments[1] : undefined;\n  switch (action.type) {\n    case SET_VISUALIZATION:\n      {\n        return action.value;\n      }\n    case CLEAR_VISUALIZATION:\n      {\n        return DEFAULT_VISUALIZATION;\n      }\n    default:\n      return state;\n  }\n});\n\n// Selectors\n\nexport const sGetVisualization = state => state.visualization;\nexport const sGetInterpretations = state => state.visualization ? state.visualization.interpretations : [];","import { getOptionsForRequest } from './options.js';\nexport const getRequestOptions = visualization => {\n  const options = getOptionsForRequest().reduce((map, _ref) => {\n    let [option, props] = _ref;\n    // only add parameter if value !== default\n    if (visualization[option] !== undefined && visualization[option] !== props.defaultValue) {\n      map[option] = visualization[option];\n    }\n    return map;\n  }, {});\n  return options;\n};","import { AXIS_ID_COLUMNS, AXIS_ID_ROWS, AXIS_ID_FILTERS, VIS_TYPE_LINE_LIST, VIS_TYPE_PIVOT_TABLE, DIMENSION_ID_ORGUNIT, DIMENSION_ID_PERIOD, DIMENSION_TYPE_DATA_ELEMENT, DIMENSION_TYPE_PROGRAM_DATA_ELEMENT, DIMENSION_TYPE_PERIOD } from '@dhis2/analytics';\nimport i18n from '@dhis2/d2-i18n';\nimport { DEFAULT_CURRENT } from '../reducers/current.js';\nimport { DEFAULT_VISUALIZATION } from '../reducers/visualization.js';\nimport { DIMENSION_ID_CREATED_BY, DIMENSION_ID_EVENT_STATUS, DIMENSION_ID_EVENT_DATE, DIMENSION_ID_ENROLLMENT_DATE, DIMENSION_ID_INCIDENT_DATE, DIMENSION_ID_SCHEDULED_DATE, DIMENSION_ID_LAST_UPDATED, DIMENSION_ID_LAST_UPDATED_BY, DIMENSION_ID_PROGRAM_STATUS } from './dimensionConstants.js';\nimport { getRequestOptions } from './getRequestOptions.js';\nimport { default as options } from './options.js';\nexport const STATUS_ACTIVE = 'ACTIVE';\nexport const STATUS_CANCELLED = 'CANCELLED';\nexport const STATUS_COMPLETED = 'COMPLETED';\nexport const STATUS_SCHEDULED = 'SCHEDULE';\nexport const OUTPUT_TYPE_EVENT = 'EVENT';\nexport const OUTPUT_TYPE_ENROLLMENT = 'ENROLLMENT';\nexport const OUTPUT_TYPE_TRACKED_ENTITY = 'TRACKED_ENTITY_INSTANCE';\nexport const getStatusNames = () => ({\n  [STATUS_ACTIVE]: i18n.t('Active'),\n  [STATUS_CANCELLED]: i18n.t('Cancelled'),\n  [STATUS_COMPLETED]: i18n.t('Completed'),\n  [STATUS_SCHEDULED]: i18n.t('Scheduled')\n});\nexport const headersMap = {\n  [DIMENSION_ID_ORGUNIT]: 'ouname',\n  [DIMENSION_ID_PROGRAM_STATUS]: 'programstatus',\n  [DIMENSION_ID_EVENT_STATUS]: 'eventstatus',\n  [DIMENSION_ID_CREATED_BY]: 'createdbydisplayname',\n  [DIMENSION_ID_LAST_UPDATED_BY]: 'lastupdatedbydisplayname',\n  [DIMENSION_ID_EVENT_DATE]: 'eventdate',\n  [DIMENSION_ID_ENROLLMENT_DATE]: 'enrollmentdate',\n  [DIMENSION_ID_INCIDENT_DATE]: 'incidentdate',\n  [DIMENSION_ID_SCHEDULED_DATE]: 'scheduleddate',\n  [DIMENSION_ID_LAST_UPDATED]: 'lastupdated'\n};\nexport const getHeadersMap = _ref => {\n  let {\n    showHierarchy\n  } = _ref;\n  const map = Object.assign({}, headersMap);\n  if (showHierarchy) {\n    map[DIMENSION_ID_ORGUNIT] = 'ounamehierarchy';\n  }\n  return map;\n};\nexport const getDimensionIdFromHeaderName = (headerName, visualization) => {\n  const headersMap = getHeadersMap(getRequestOptions(visualization));\n  return Object.keys(headersMap).find(key => headersMap[key] === headerName);\n};\nexport const outputTypeTimeDimensionMap = {\n  [OUTPUT_TYPE_EVENT]: DIMENSION_ID_EVENT_DATE,\n  [OUTPUT_TYPE_ENROLLMENT]: DIMENSION_ID_ENROLLMENT_DATE\n};\nexport const transformVisualization = visualization => {\n  const transformedColumns = transformDimensions(visualization[AXIS_ID_COLUMNS], visualization);\n  const transformedRows = transformDimensions(visualization[AXIS_ID_ROWS], visualization);\n  const transformedFilters = transformDimensions(visualization[AXIS_ID_FILTERS], visualization);\n\n  // convert completedOnly option to eventStatus = COMPLETED filter\n  if (visualization.completedOnly && visualization.outputType === OUTPUT_TYPE_EVENT) {\n    transformedFilters.push({\n      dimension: DIMENSION_ID_EVENT_STATUS,\n      items: [{\n        id: STATUS_COMPLETED\n      }]\n    });\n  }\n  const transformedVisualization = {\n    ...visualization\n  };\n  delete transformedVisualization.completedOnly;\n  return {\n    ...transformedVisualization,\n    [AXIS_ID_COLUMNS]: transformedColumns,\n    [AXIS_ID_ROWS]: transformedRows,\n    [AXIS_ID_FILTERS]: transformedFilters\n  };\n};\nconst transformDimensions = (dimensions, _ref2) => {\n  let {\n    outputType,\n    type\n  } = _ref2;\n  return dimensions.filter(dimensionObj => !['longitude', 'latitude'].includes(dimensionObj.dimension)).map(dimensionObj => {\n    if (dimensionObj.dimensionType === DIMENSION_TYPE_PROGRAM_DATA_ELEMENT) {\n      return {\n        ...dimensionObj,\n        dimensionType: DIMENSION_TYPE_DATA_ELEMENT\n      };\n    } else if (dimensionObj.dimension === DIMENSION_ID_PERIOD && type === VIS_TYPE_LINE_LIST) {\n      return {\n        ...dimensionObj,\n        dimension: outputTypeTimeDimensionMap[outputType],\n        dimensionType: DIMENSION_TYPE_PERIOD\n      };\n    } else {\n      return dimensionObj;\n    }\n  });\n};\nexport const visTypes = [{\n  type: VIS_TYPE_LINE_LIST\n}, {\n  type: VIS_TYPE_PIVOT_TABLE,\n  disabled: true\n}];\nexport const getVisTypeDescriptions = () => ({\n  [VIS_TYPE_LINE_LIST]: i18n.t('List data from tracked entities and events.'),\n  [VIS_TYPE_PIVOT_TABLE]: i18n.t('Explore data with manipulatable columns, rows, and aggregations.')\n});\nconst defaultRemoveDimensionProps = ['dimensionType', 'valueType'];\nconst removeDimensionPropsBeforeSaving = function (axis) {\n  let props = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : defaultRemoveDimensionProps;\n  return axis === null || axis === void 0 ? void 0 : axis.map(dim => {\n    const dimension = Object.assign({}, dim);\n    props.forEach(prop => {\n      delete dimension[prop];\n    });\n    return dimension;\n  });\n};\nexport const getSaveableVisualization = vis => {\n  var _visualization$progra, _vis$sorting;\n  const visualization = Object.assign({}, vis);\n  const nonSavableOptions = Object.keys(options).filter(option => !options[option].savable);\n  nonSavableOptions.forEach(option => delete visualization[option]);\n  visualization.columns = removeDimensionPropsBeforeSaving(visualization.columns);\n  visualization.filters = removeDimensionPropsBeforeSaving(visualization.filters);\n  !((_visualization$progra = visualization.programStage) !== null && _visualization$progra !== void 0 && _visualization$progra.id) && delete visualization.programStage;\n\n  // When saving a copy of an AO created with the Event Reports app, remove the legacy flag.\n  // This copy won't work in Event Reports app anyway.\n  // This also unlocks the Save button on the copied (and converted to new format) AO in LL app.\n  delete visualization.legacy;\n\n  // format sorting\n  visualization.sorting = (_vis$sorting = vis.sorting) !== null && _vis$sorting !== void 0 && _vis$sorting.length ? [{\n    dimension: getDimensionIdFromHeaderName(vis.sorting[0].dimension, vis) || vis.sorting[0].dimension,\n    direction: vis.sorting[0].direction.toUpperCase()\n  }] : undefined;\n  return visualization;\n};\nexport const getVisualizationState = (visualization, current) => {\n  if (visualization === DEFAULT_VISUALIZATION) {\n    return current === DEFAULT_CURRENT ? STATE_EMPTY : STATE_UNSAVED;\n  } else if (current === visualization) {\n    return STATE_SAVED;\n  } else {\n    return STATE_DIRTY;\n  }\n};\nexport const STATE_EMPTY = 'EMPTY';\nexport const STATE_SAVED = 'SAVED';\nexport const STATE_UNSAVED = 'UNSAVED';\nexport const STATE_DIRTY = 'DIRTY';\nexport const dimensionMetadataPropMap = {\n  dataElementDimensions: 'dataElement',\n  attributeDimensions: 'attribute',\n  programIndicatorDimensions: 'programIndicator',\n  categoryDimensions: 'category',\n  categoryOptionGroupSetDimensions: 'categoryOptionGroupSet',\n  organisationUnitGroupSetDimensions: 'organisationUnitGroupSet',\n  dataElementGroupSetDimensions: 'dataElementGroupSet'\n};\n\n// Loop through and collect dimension metadata from the visualization\nexport const getDimensionMetadataFromVisualization = visualization => Object.entries(dimensionMetadataPropMap).reduce((metaData, _ref3) => {\n  let [listName, dimensionName] = _ref3;\n  const dimensionList = visualization[listName] || [];\n  dimensionList.forEach(dimensionWrapper => {\n    const dimension = dimensionWrapper[dimensionName];\n    metaData[dimension.id] = dimension;\n  });\n  return metaData;\n}, {});\nexport const getDimensionMetadataFields = () => Object.entries(dimensionMetadataPropMap).map(_ref4 => {\n  let [listName, objectName] = _ref4;\n  return `${listName}[${objectName}[id,name]]`;\n});","import { OUTPUT_TYPE_TRACKED_ENTITY } from './visualization.js';\nexport const formatDimensionId = _ref => {\n  let {\n    dimensionId,\n    programStageId,\n    programId,\n    outputType\n  } = _ref;\n  return [outputType === OUTPUT_TYPE_TRACKED_ENTITY ? programId : undefined, programStageId, dimensionId].filter(p => p).join('.');\n};\nexport const extractDimensionIdParts = (id, inputType) => {\n  let rawStageId;\n  const [dimensionId, part2, part3] = (id || '').split('.').reverse();\n  let programId = part3;\n  if (part3 || inputType !== OUTPUT_TYPE_TRACKED_ENTITY) {\n    rawStageId = part2;\n  }\n  if (inputType === OUTPUT_TYPE_TRACKED_ENTITY && !part3) {\n    programId = part2;\n  }\n  const [programStageId, repetitionIndex] = (rawStageId || '').split('[');\n  return {\n    dimensionId,\n    programStageId,\n    ...(programId ? {\n      programId\n    } : {}),\n    repetitionIndex: (repetitionIndex === null || repetitionIndex === void 0 ? void 0 : repetitionIndex.length) && repetitionIndex.substring(0, repetitionIndex.indexOf(']'))\n  };\n};","import { AXIS_ID_COLUMNS, AXIS_ID_ROWS, AXIS_ID_FILTERS, DIMENSION_ID_ORGUNIT } from '@dhis2/analytics';\nimport { DIMENSION_ID_PROGRAM_STATUS, DIMENSION_ID_EVENT_STATUS, DIMENSION_ID_CREATED, DIMENSION_ID_CREATED_BY, DIMENSION_ID_LAST_UPDATED_BY, DIMENSION_IDS_TIME } from '../../modules/dimensionConstants.js';\nimport { formatDimensionId } from '../../modules/dimensionId.js';\nimport { getRequestOptions } from '../../modules/getRequestOptions.js';\nimport { OUTPUT_TYPE_ENROLLMENT, OUTPUT_TYPE_EVENT, OUTPUT_TYPE_TRACKED_ENTITY, getHeadersMap } from '../../modules/visualization.js';\nconst excludedDimensions = [DIMENSION_ID_CREATED, DIMENSION_ID_CREATED_BY, DIMENSION_ID_LAST_UPDATED_BY];\nconst isTimeDimension = dimensionId => DIMENSION_IDS_TIME.has(dimensionId);\nconst adaptDimensions = (dimensions, parameters, outputType) => {\n  const adaptedDimensions = [];\n  dimensions.forEach(dimensionObj => {\n    const dimensionId = dimensionObj.dimension;\n    if (isTimeDimension(dimensionId) || dimensionId === DIMENSION_ID_EVENT_STATUS || dimensionId === DIMENSION_ID_PROGRAM_STATUS || dimensionId === DIMENSION_ID_CREATED || dimensionId === DIMENSION_ID_ORGUNIT && outputType === OUTPUT_TYPE_TRACKED_ENTITY) {\n      var _dimensionObj$items;\n      if ((_dimensionObj$items = dimensionObj.items) !== null && _dimensionObj$items !== void 0 && _dimensionObj$items.length) {\n        var _dimensionObj$items2;\n        const items = (_dimensionObj$items2 = dimensionObj.items) === null || _dimensionObj$items2 === void 0 ? void 0 : _dimensionObj$items2.map(item => item.id);\n        if ((dimensionId === DIMENSION_ID_PROGRAM_STATUS || isTimeDimension(dimensionId)) && Array.isArray(parameters[dimensionId])) {\n          parameters[dimensionId].push(...items);\n        } else if (dimensionId === DIMENSION_ID_ORGUNIT) {\n          adaptedDimensions.push(dimensionObj);\n        } else {\n          parameters[dimensionId] = items;\n        }\n      }\n    } else if (!excludedDimensions.includes(dimensionId)) {\n      adaptedDimensions.push(dimensionObj);\n    }\n  });\n  return adaptedDimensions;\n};\nexport const getAdaptedVisualization = visualization => {\n  const outputType = visualization.outputType;\n  const parameters = getRequestOptions(visualization);\n  const adaptedColumns = adaptDimensions(visualization[AXIS_ID_COLUMNS], parameters, outputType);\n  const adaptedRows = adaptDimensions(visualization[AXIS_ID_ROWS], parameters, outputType);\n  const adaptedFilters = adaptDimensions(visualization[AXIS_ID_FILTERS], parameters, outputType);\n  const dimensionHeadersMap = getHeadersMap(visualization);\n  const headers = [...visualization[AXIS_ID_COLUMNS], ...visualization[AXIS_ID_ROWS]].map(_ref => {\n    var _repetition$indexes;\n    let {\n      dimension,\n      program,\n      programStage,\n      repetition\n    } = _ref;\n    const programStageId = programStage === null || programStage === void 0 ? void 0 : programStage.id;\n    if (repetition !== null && repetition !== void 0 && (_repetition$indexes = repetition.indexes) !== null && _repetition$indexes !== void 0 && _repetition$indexes.length) {\n      return repetition.indexes.map(index => formatDimensionId({\n        programId: program === null || program === void 0 ? void 0 : program.id,\n        programStageId: `${programStageId}[${index}]`,\n        dimensionId: dimensionHeadersMap[dimension] || dimension,\n        outputType\n      }));\n    } else {\n      return formatDimensionId({\n        programId: program === null || program === void 0 ? void 0 : program.id,\n        programStageId,\n        dimensionId: dimensionHeadersMap[dimension] || dimension,\n        outputType\n      });\n    }\n  });\n  return {\n    adaptedVisualization: {\n      [AXIS_ID_COLUMNS]: adaptedColumns,\n      [AXIS_ID_ROWS]: adaptedRows,\n      [AXIS_ID_FILTERS]: adaptedFilters,\n      outputType\n    },\n    headers,\n    parameters\n  };\n};\nconst analyticsApiEndpointMap = {\n  [OUTPUT_TYPE_ENROLLMENT]: 'enrollments',\n  [OUTPUT_TYPE_EVENT]: 'events',\n  [OUTPUT_TYPE_TRACKED_ENTITY]: 'trackedEntities'\n};\nexport const getAnalyticsEndpoint = outputType => analyticsApiEndpointMap[outputType];","import React from 'react';\nexport const GenericError = () => /*#__PURE__*/React.createElement(\"svg\", {\n  height: \"96\",\n  viewBox: \"0 0 96 96\",\n  width: \"96\",\n  xmlns: \"http://www.w3.org/2000/svg\"\n}, /*#__PURE__*/React.createElement(\"g\", {\n  fill: \"#a0adba\",\n  transform: \"translate(3 3)\"\n}, /*#__PURE__*/React.createElement(\"path\", {\n  d: \"m40.5 73.5000001c0 2.4852813 2.0147186 4.5 4.5 4.5s4.5-2.0147187 4.5-4.5c0-2.4142734-1.9012365-4.3844892-4.2881643-4.4951021l-.2128322-.0048979c-2.4848234.0005384-4.4990035 2.0150507-4.4990035 4.5z\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \"m48 60v-30c0-1.6568542-1.3431458-3-3-3s-3 1.3431458-3 3v30c0 1.6568542 1.3431458 3 3 3s3-1.3431458 3-3z\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \"m45-2.99904788c3.8985931 0 7.4578604 2.21715778 9.1770339 5.71709169l37.8912554 77.19048409c1.3845546 2.8165473 1.2171646 6.1482722-.4427191 8.811863-1.6598833 2.6635901-4.5771005 4.2816904-7.7135702 4.2796124h-77.82201115c-3.13845856.002078-6.05567574-1.6160223-7.71555901-4.2796124-1.65988369-2.6635908-1.82727377-5.9953157-.44346379-8.8103471l37.89234295-77.19269833c1.7188306-3.49923557 5.2780979-5.71639335 9.176691-5.71639335zm0 6c-1.6106864 0-3.0811818.91600885-3.7909661 2.36100407l-37.89274459 77.19351591c-.47005356.9562122-.41322496 2.0873262.15030227 2.99161.56352731.9042839 1.5539177 1.4529206 2.62140842 1.4529206h77.8259889c1.0655018 0 2.0558922-.5486367 2.6194195-1.4529206.5635272-.9042838.6203558-2.0353978.1495577-2.9931259l-37.8916571-77.19130167c-.7101272-1.44569356-2.1806226-2.36170241-3.791309-2.36170241z\"\n})));\nexport const EmptyBox = () => /*#__PURE__*/React.createElement(\"svg\", {\n  width: \"100\",\n  height: \"100\",\n  xmlns: \"http://www.w3.org/2000/svg\"\n}, /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M96.4184693 4.6480742l-2.9759268 2.6728C91.5558812 5.2202435 88.8786031 4 86 4V0c4.0260387 0 7.7809122 1.7113874 10.4184693 4.6480742zM100 19.269042h-4l-.0000544-5.3024514c-.0043849-1.346405-.2739964-2.6517927-.7866406-3.8623659l3.6833463-1.559795c.7189815 1.6978243 1.0971493 3.5288134 1.1032837 5.4156229L100 19.269042zm0 13.9999755h-4v-10h4v10zm0 14h-4v-10h4v10zm0 14h-4v-10h4v10zm0 13.9999995h-4v-9.9999995h4v9.9999995zm-.516108 14.50858l-3.8521996-1.077292C95.8751624 87.829701 96 86.924153 96 86v-6.730983h4V86c0 1.289184-.1747984 2.557136-.516108 3.777597zM87.7213345 99.895024l-.4874961-3.970182c2.8302961-.34753 5.3578432-1.892491 6.9762006-4.213767l3.2812621 2.287645c-2.2629208 3.245799-5.802045 5.409086-9.7699666 5.896304zM73.461965 100v-4h10v4h-10zm-14 0v-4h10v4h-10zm-14 0v-4h10v4h-10zm-14 0v-4h10v4h-10zm-14 0v-4h10v4h-10zM3.17264828 94.875717l3.09219912-2.537382c1.79303608 2.185097 4.4211055 3.525451 7.2855127 3.651773l-.176231 3.996116c-4.01094422-.176885-7.69477669-2.055693-10.20148082-5.110507zM0 80.192922h4l.00006331 5.84312c.00418159 1.190127.21554574 2.348454.61951638 3.438567L.86883696 90.864547C.3022517 89.335619.0059261 87.711683.00007566 86.043095L0 80.192922zm0-13.999974h4v10H0v-10zm0-14.0000005h4v10H0v-10zm0-14h4v10H0v-10zm0-14h4v10H0v-10zM.701349 9.6140131l3.79891292 1.2523021C4.17021443 11.8675286 4 12.9209553 4 14v6.1929475H0V14c0-1.5058511.2385093-2.9819426.701349-4.3859869zM12.9113947.0417954l.3073341 3.9881757c-2.8514503.2197365-5.43930476 1.6474003-7.16021518 3.8917822l-3.1742768-2.4339201C5.29022999 2.3499781 8.91606935.3496804 12.9113947.0417954zM27.07607 0v4h-10V0h10zm14 0v4h-10V0h10zm14 0v4h-10V0h10zm14 0v4h-10V0h10zm14 0v4h-10V0h10z\",\n  fill: \"#A0ADBA\",\n  fillRule: \"nonzero\"\n}));\nexport const DataError = () => /*#__PURE__*/React.createElement(\"svg\", {\n  width: \"98\",\n  height: \"97\",\n  xmlns: \"http://www.w3.org/2000/svg\"\n}, /*#__PURE__*/React.createElement(\"g\", {\n  fill: \"#A0ADBA\",\n  fillRule: \"nonzero\"\n}, /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M47.9999996-3.4e-7c26.375131 0 48 8.64933258 48 21.00093054 0 6.7822228-6.3726775 12.3999932-16.8111022 16.1776421-1.5579685.5638263-3.2780231-.2420853-3.8418493-1.8000538-.5638263-1.5579685.2420852-3.2780231 1.8000537-3.8418493 8.3196582-3.0108708 12.8528978-7.007103 12.8528978-10.535739 0-7.5352197-18.6656043-15.00093054-42-15.00093054-23.3343956 0-41.99999997 7.46571084-41.99999997 15.00093054 0 8.3458435 22.23414277 16.1998284 47.97788217 14.8410919 1.6545514-.087326 3.066622 1.1831611 3.1539481 2.8377124.087326 1.6545514-1.1831611 3.066622-2.8377125 3.1539481C25.4193432 43.3576729-3.7e-7 34.3785482-3.7e-7 21.0009302-3.7e-7 8.64933224 21.6248687-3.4e-7 47.9999996-3.4e-7z\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M92.9999996 17.9999997c1.5976809 0 2.9036609 1.2489199 2.9949073 2.8237272l.0050927.1762728v24c0 1.6568542-1.3431457 3-3 3-1.5976809 0-2.9036609-1.24892-2.9949073-2.8237272l-.0050927-.1762728v-24c0-1.6568543 1.3431458-3 3-3zM2.99999963 17.9999997c1.59768088 0 2.90366088 1.2489199 2.9949073 2.8237272l.0050927.1762728v24.0917782c0 6.7884007 15.40674827 13.7997289 36.16062537 14.9125249 1.6544777.088711 2.9237824 1.5018446 2.8350715 3.1563223-.088711 1.6544776-1.5018446 2.9237823-3.1563223 2.8350714C18.3983599 64.7388196.36378289 56.6257218.00543546 45.431923L-3.7e-7 45.0917779V20.9999997c0-1.6568543 1.34314575-3 3-3z\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M2.99999963 41.9999997c1.59768088 0 2.90366088 1.2489199 2.9949073 2.8237272l.0050927.1762728v24.011713c0 5.6006467 10.94212037 11.6895243 27.41972777 14.017794 1.6405579.2318092 2.7825744 1.7496627 2.5507652 3.3902207-.2318092 1.640558-1.7496627 2.7825745-3.3902207 2.5507653l-1.1438963-.168296C13.057544 85.989973.26320686 78.7580311.00401161 69.3047869L-3.7e-7 69.0117127v-24.011713c0-1.6568543 1.34314575-3 3-3zM70.9999996 79.4999997l.1996404.0048953c2.1163912.1040258 3.8003596 1.8529093 3.8003596 3.9951047 0 2.209139-1.790861 4-4 4s-4-1.790861-4-4c0-2.1421954 1.6839685-3.8910789 3.8003597-3.9951047l.1996403-.0048953zM70.9999996 57.9999997c1.5976809 0 2.9036609 1.2489199 2.9949073 2.8237272l.0050927.1762728v12c0 1.6568542-1.3431457 3-3 3-1.5976809 0-2.9036609-1.24892-2.9949073-2.8237272l-.0050927-.1762728v-12c0-1.6568543 1.3431458-3 3-3z\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M70.9999996 42.999137c-3.825395 0-7.3222315 2.1620358-9.0317655 5.5841902l-16.903516 33.8070317c-1.5642876 3.1303349-1.39639 6.8466948.4434382 9.8226487 1.8397692 2.9758587 5.0891084 4.7869921 8.5878433 4.7869921h33.808c3.498735 0 6.7480741-1.8111334 8.5878434-4.7869921 1.8398282-2.9759539 2.0077257-6.6923138.4437399-9.8220451L80.0312812 48.5823589c-1.70905-3.4211861-5.2058865-5.5832219-9.0312816-5.5832219zm0 6c1.5519828 0 2.9706677.8771492 3.6642345 2.2655352l16.904484 33.8089683c.6342155 1.2691447.5660986 2.7768914-.1803294 3.9842515-.7463845 1.20729-2.0647148 1.9421077-3.4843891 1.9421077h-33.808c-1.4196743 0-2.7380045-.7348177-3.4843891-1.9421077-.7464279-1.2073601-.8145448-2.7151068-.1800276-3.9848551l16.9036983-33.8073964c.6940508-1.3893543 2.1127357-2.2665035 3.6647184-2.2665035z\"\n})));","import i18n from '@dhis2/d2-i18n';\nimport { DataError, EmptyBox, GenericError } from '../assets/ErrorIcons.js';\nconst visualizationError = (icon, title, description) => ({\n  icon,\n  title,\n  description\n});\nexport const genericClientError = () => visualizationError(GenericError, genericErrorTitle, i18n.t('There is a problem with this visualization.'));\nexport const genericServerError = () => visualizationError(GenericError, genericErrorTitle, i18n.t('There was a problem getting the data from the server.'));\nexport const emptyResponseError = () => visualizationError(EmptyBox, i18n.t('No data available'), i18n.t('The selected dimensions didn’t return any data. There may be no data, or you may not have access to it.'));\nexport const visualizationNotFoundError = () => visualizationError(GenericError, i18n.t('Visualization not found'), i18n.t('The visualization you are trying to view could not be found, the ID could be incorrect or it could have been deleted.'));\nexport const noEntityTypeError = () => visualizationError(EmptyBox, i18n.t('No tracked entity type selected'), i18n.t('Choose a type from the Input sidebar.'));\nexport const noProgramError = () => visualizationError(EmptyBox, i18n.t('No program selected'), i18n.t('Choose a program from the Input sidebar.'));\nexport const noColumnsError = () => visualizationError(EmptyBox, i18n.t('Columns is empty'), i18n.t('Add at least one item to Columns.'));\nexport const noOrgUnitError = () => visualizationError(DataError, i18n.t('No organisation unit selected'), i18n.t('Make sure to add the organisation unit dimension with at least one selection to the layout.'));\nexport const indicatorError = () => visualizationError(DataError, genericErrorTitle, i18n.t(\"There's a problem with at least one selected indicator\"));\nexport const dataAccessError = () => visualizationError(DataError, i18n.t('Restricted access'), i18n.t('You don’t have access to the data in this visualization. Contact a system administrator.'));\nexport const orgUnitAccessError = () => visualizationError(DataError, i18n.t('Restricted access'), i18n.t('You don’t have access to one or more of the chosen organisation units.'));\nexport const eventAccessError = () => visualizationError(DataError, i18n.t('Restricted access'), i18n.t('You don’t have access to event analytics. Contact a system administrator.'));\nexport const analyticsGenerationError = () => visualizationError(GenericError, i18n.t('Something went wrong'), i18n.t(\"There's a problem with the generated analytics. Contact a system administrator.\"));\nexport const analyticsRequestError = () => visualizationError(GenericError, i18n.t('Something went wrong'), i18n.t(\"There's a syntax problem with the analytics request.\"));\nexport const getAlertTypeByStatusCode = statusCode => String(statusCode).match(/50\\d/) ? 'error' : 'warning';\nexport const genericErrorTitle = i18n.t('Something went wrong');\nexport const isVisualizationError = error => error.icon && error.title && error.description;","import { AXIS, dimensionIsValid, layoutGetDimension, VIS_TYPE_LINE_LIST, DIMENSION_ID_ORGUNIT } from '@dhis2/analytics';\nimport { noColumnsError, noEntityTypeError, noOrgUnitError, noProgramError } from './error.js';\nimport { OUTPUT_TYPE_TRACKED_ENTITY } from './visualization.js';\n\n// Layout validation helper functions\nconst isAxisValid = axis => AXIS.isValid(axis) && axis.some(axisItem => dimensionIsValid(axisItem, {\n  requireItems: false\n}));\nexport const validateLineListLayout = function (layout) {\n  let {\n    dryRun\n  } = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  if (!layout) {\n    return false;\n  }\n\n  // entity type (input type TE only)\n  if (layout.outputType === OUTPUT_TYPE_TRACKED_ENTITY && !layoutHasTrackedEntityTypeId(layout)) {\n    if (dryRun) {\n      return false;\n    }\n    throw noEntityTypeError();\n  }\n\n  // program\n  if (layout.outputType !== OUTPUT_TYPE_TRACKED_ENTITY && !layoutHasProgramId(layout)) {\n    if (dryRun) {\n      return false;\n    }\n    throw noProgramError();\n  }\n\n  // columns\n  if (!isAxisValid(layout.columns)) {\n    if (dryRun) {\n      return false;\n    }\n    throw noColumnsError();\n  }\n\n  // organisation unit\n  const ouDimension = layoutGetDimension(layout, DIMENSION_ID_ORGUNIT);\n  if (layout.outputType !== OUTPUT_TYPE_TRACKED_ENTITY && !(ouDimension && dimensionIsValid(ouDimension, {\n    requireItems: true\n  }))) {\n    if (dryRun) {\n      return false;\n    }\n    throw noOrgUnitError();\n  }\n  return true;\n};\nexport const validateLayout = layout => {\n  switch (layout.type) {\n    case VIS_TYPE_LINE_LIST:\n    default:\n      return validateLineListLayout(layout);\n  }\n};\nexport const layoutHasProgramId = layout => {\n  var _layout$program;\n  return Boolean(layout === null || layout === void 0 ? void 0 : (_layout$program = layout.program) === null || _layout$program === void 0 ? void 0 : _layout$program.id);\n};\nexport const layoutHasTrackedEntityTypeId = layout => {\n  var _layout$trackedEntity;\n  return Boolean(layout === null || layout === void 0 ? void 0 : (_layout$trackedEntity = layout.trackedEntityType) === null || _layout$trackedEntity === void 0 ? void 0 : _layout$trackedEntity.id);\n};\nexport const aoCreatedInEventReportsApp = layout => layout === null || layout === void 0 ? void 0 : layout.legacy;\nexport const isLayoutValidForSave = layout => (layout === null || layout === void 0 ? void 0 : layout.outputType) === OUTPUT_TYPE_TRACKED_ENTITY ? layoutHasTrackedEntityTypeId(layout) : layoutHasProgramId(layout) && !aoCreatedInEventReportsApp(layout);\nexport const isLayoutValidForSaveAs = layout => (layout === null || layout === void 0 ? void 0 : layout.outputType) === OUTPUT_TYPE_TRACKED_ENTITY ? layoutHasTrackedEntityTypeId(layout) : layoutHasProgramId(layout);","import { VALUE_TYPE_NUMBER, VALUE_TYPE_UNIT_INTERVAL, VALUE_TYPE_PERCENTAGE, VALUE_TYPE_INTEGER, VALUE_TYPE_INTEGER_POSITIVE, VALUE_TYPE_INTEGER_NEGATIVE, VALUE_TYPE_INTEGER_ZERO_OR_POSITIVE, VALUE_TYPE_TEXT, VALUE_TYPE_LONG_TEXT, VALUE_TYPE_LETTER, VALUE_TYPE_PHONE_NUMBER, VALUE_TYPE_EMAIL, VALUE_TYPE_USERNAME, VALUE_TYPE_URL, VALUE_TYPE_BOOLEAN, VALUE_TYPE_TRUE_ONLY, VALUE_TYPE_DATE, VALUE_TYPE_TIME, VALUE_TYPE_DATETIME, VALUE_TYPE_ORGANISATION_UNIT, formatValue, DIMENSION_TYPE_PROGRAM_INDICATOR, ouIdHelper } from '@dhis2/analytics';\nimport i18n from '@dhis2/d2-i18n';\nimport { formatDimensionId } from './dimensionId.js';\n\n// parse e.g. 'LT:25:GT:15' to ['LT:25', 'GT:15']\nexport const parseConditionsStringToArray = conditionsString => (conditionsString === null || conditionsString === void 0 ? void 0 : conditionsString.match(/[^:]+:[^:]+/g)) || conditionsString || [];\n\n// parse e.g. ['LT:25', 'GT:15'] to 'LT:25:GT:15'\nexport const parseConditionsArrayToString = conditionsArray => conditionsArray.join(':');\nexport const parseCondition = conditionItem => conditionItem.split(':').pop().split(';');\nexport const NULL_VALUE = 'NV';\nexport const TRUE_VALUE = '1';\nexport const FALSE_VALUE = '0';\nexport const OPERATOR_EQUAL = 'EQ';\nexport const OPERATOR_GREATER = 'GT';\nexport const OPERATOR_GREATER_OR_EQUAL = 'GE';\nexport const OPERATOR_LESS = 'LT';\nexport const OPERATOR_LESS_OR_EQUAL = 'LE';\nexport const OPERATOR_NOT_EQUAL = '!EQ';\nexport const OPERATOR_EMPTY = `EQ:${NULL_VALUE}`;\nexport const OPERATOR_NOT_EMPTY = `NE:${NULL_VALUE}`;\nexport const OPERATOR_IN = 'IN';\nexport const OPERATOR_CONTAINS = 'LIKE';\nexport const OPERATOR_NOT_CONTAINS = '!LIKE';\nexport const CASE_INSENSITIVE_PREFIX = 'I';\nexport const NOT_PREFIX = '!';\nexport const getNumericOperators = () => ({\n  [OPERATOR_EQUAL]: i18n.t('equal to (=)'),\n  [OPERATOR_GREATER]: i18n.t('greater than (>)'),\n  [OPERATOR_GREATER_OR_EQUAL]: i18n.t('greater than or equal to (≥)'),\n  [OPERATOR_LESS]: i18n.t('less than (<)'),\n  [OPERATOR_LESS_OR_EQUAL]: i18n.t('less than or equal to (≤)'),\n  [OPERATOR_NOT_EQUAL]: i18n.t('not equal to (≠)'),\n  [OPERATOR_EMPTY]: i18n.t('is empty / null'),\n  [OPERATOR_NOT_EMPTY]: i18n.t('is not empty / not null')\n});\nexport const getAlphaNumericOperators = () => ({\n  [OPERATOR_EQUAL]: i18n.t('exactly'),\n  [OPERATOR_NOT_EQUAL]: i18n.t('is not'),\n  [OPERATOR_CONTAINS]: i18n.t('contains'),\n  [OPERATOR_NOT_CONTAINS]: i18n.t('does not contain'),\n  [OPERATOR_EMPTY]: i18n.t('is empty / null'),\n  [OPERATOR_NOT_EMPTY]: i18n.t('is not empty / not null')\n});\nexport const getDateOperators = () => ({\n  [OPERATOR_EQUAL]: i18n.t('exactly'),\n  [OPERATOR_NOT_EQUAL]: i18n.t('is not'),\n  [OPERATOR_GREATER]: i18n.t('after'),\n  [OPERATOR_GREATER_OR_EQUAL]: i18n.t('after or including'),\n  [OPERATOR_LESS]: i18n.t('before'),\n  [OPERATOR_LESS_OR_EQUAL]: i18n.t('before or including'),\n  [OPERATOR_EMPTY]: i18n.t('is empty / null'),\n  [OPERATOR_NOT_EMPTY]: i18n.t('is not empty / not null')\n});\nexport const getBooleanValues = () => ({\n  [TRUE_VALUE]: i18n.t('Yes'),\n  [FALSE_VALUE]: i18n.t('No'),\n  [NULL_VALUE]: i18n.t('Not answered')\n});\nexport const API_TIME_DIVIDER = '.';\nexport const UI_TIME_DIVIDER = ':';\nexport const API_DATETIME_DIVIDER = 'T';\nexport const UI_DATETIME_DIVIDER = ' ';\nexport const addCaseSensitivePrefix = (operator, isCaseSensitive) => {\n  if (isCaseSensitive) {\n    // e.g. LIKE -> LIKE\n    return operator;\n  } else {\n    if (operator[0] === NOT_PREFIX) {\n      // e.g. !LIKE -> !ILIKE\n      return `${NOT_PREFIX}${CASE_INSENSITIVE_PREFIX}${operator.substring(1)}`;\n    } else {\n      // e.g. LIKE -> ILIKE\n      return `${CASE_INSENSITIVE_PREFIX}${operator}`;\n    }\n  }\n};\nexport const removeCaseSensitivePrefix = operator => {\n  const isCaseSensitive = checkIsCaseSensitive(operator);\n  if (isCaseSensitive) {\n    // e.g. LIKE -> LIKE, !LIKE -> !LIKE\n    return operator;\n  } else {\n    if (operator[0] === NOT_PREFIX) {\n      // e.g. !ILIKE -> !LIKE\n      return `${NOT_PREFIX}${operator.substring(2)}`;\n    } else {\n      // e.g. ILIKE -> LIKE\n      return `${operator.substring(1)}`;\n    }\n  }\n};\n\n// TODO - in practice this function isn't used for the 'IN' operator\n// but if it were the result would be wrong. The function\n// should probably control for the allowed operators and throw if the\n// operator isn't one of the allowed ones.\nexport const checkIsCaseSensitive = operator => {\n  if (operator[0] === NOT_PREFIX) {\n    // !LIKE, !ILIKE, !EQ, !IEQ\n    return operator[1] !== CASE_INSENSITIVE_PREFIX;\n  } else {\n    // LIKE, ILIKE, EQ, IEQ\n    return operator[0] !== CASE_INSENSITIVE_PREFIX;\n  }\n};\nconst getOperatorsByValueType = valueType => {\n  switch (valueType) {\n    case VALUE_TYPE_LETTER:\n    case VALUE_TYPE_TEXT:\n    case VALUE_TYPE_LONG_TEXT:\n    case VALUE_TYPE_EMAIL:\n    case VALUE_TYPE_USERNAME:\n    case VALUE_TYPE_URL:\n    case VALUE_TYPE_PHONE_NUMBER:\n      {\n        return getAlphaNumericOperators();\n      }\n    case VALUE_TYPE_DATE:\n    case VALUE_TYPE_TIME:\n    case VALUE_TYPE_DATETIME:\n      {\n        return getDateOperators();\n      }\n    case VALUE_TYPE_NUMBER:\n    case VALUE_TYPE_UNIT_INTERVAL:\n    case VALUE_TYPE_PERCENTAGE:\n    case VALUE_TYPE_INTEGER:\n    case VALUE_TYPE_INTEGER_POSITIVE:\n    case VALUE_TYPE_INTEGER_NEGATIVE:\n    case VALUE_TYPE_INTEGER_ZERO_OR_POSITIVE:\n    default:\n      {\n        return getNumericOperators();\n      }\n  }\n};\nconst lookupOptionSetOptionMetadata = (optionSetId, code, metaData) => {\n  var _optionSetMetaData$op;\n  const optionSetMetaData = metaData === null || metaData === void 0 ? void 0 : metaData[optionSetId];\n  return optionSetMetaData ? (_optionSetMetaData$op = optionSetMetaData.options) === null || _optionSetMetaData$op === void 0 ? void 0 : _optionSetMetaData$op.find(option => option.code === code) : undefined;\n};\nexport const getConditionsTexts = _ref => {\n  var _conditionsList$, _conditionsList$2, _conditionsList$3, _conditionsList$4;\n  let {\n    conditions = {},\n    metadata = {},\n    dimension = {},\n    formatValueOptions = {}\n  } = _ref;\n  const conditionsList = parseConditionsStringToArray(conditions.condition);\n  if (conditions.legendSet) {\n    if (!(conditionsList !== null && conditionsList !== void 0 && conditionsList.length)) {\n      var _metadata$conditions$;\n      return [(_metadata$conditions$ = metadata[conditions.legendSet]) === null || _metadata$conditions$ === void 0 ? void 0 : _metadata$conditions$.name];\n    } else {\n      var _metadata$conditions$2;\n      const legends = parseCondition(conditionsList[0]);\n      const allLegends = ((_metadata$conditions$2 = metadata[conditions.legendSet]) === null || _metadata$conditions$2 === void 0 ? void 0 : _metadata$conditions$2.legends) || [];\n      const legendNames = legends.map(legend => {\n        var _allLegends$find;\n        return (_allLegends$find = allLegends.find(l => l.id === legend)) === null || _allLegends$find === void 0 ? void 0 : _allLegends$find.name;\n      });\n      return legendNames;\n    }\n  }\n  if (dimension.optionSet && (_conditionsList$ = conditionsList[0]) !== null && _conditionsList$ !== void 0 && _conditionsList$.startsWith(OPERATOR_IN)) {\n    const items = parseCondition(conditionsList[0]);\n    const itemNames = items.map(code => {\n      var _lookupOptionSetOptio;\n      return (_lookupOptionSetOptio = lookupOptionSetOptionMetadata(dimension.optionSet, code, metadata)) === null || _lookupOptionSetOptio === void 0 ? void 0 : _lookupOptionSetOptio.name;\n    });\n    return itemNames;\n  }\n  if ([VALUE_TYPE_BOOLEAN, VALUE_TYPE_TRUE_ONLY].includes(dimension.valueType) && (_conditionsList$2 = conditionsList[0]) !== null && _conditionsList$2 !== void 0 && _conditionsList$2.startsWith(OPERATOR_IN)) {\n    const values = parseCondition(conditionsList[0]);\n    const valueNames = values.map(value => getBooleanValues()[value]);\n    return valueNames;\n  }\n  if (dimension.valueType === VALUE_TYPE_ORGANISATION_UNIT && ((_conditionsList$3 = conditionsList[0]) !== null && _conditionsList$3 !== void 0 && _conditionsList$3.startsWith(OPERATOR_EQUAL) || (_conditionsList$4 = conditionsList[0]) !== null && _conditionsList$4 !== void 0 && _conditionsList$4.startsWith(OPERATOR_IN))) {\n    const ouIds = parseCondition(conditionsList[0]);\n    const ouNames = ouIds.map(ouId => {\n      var _ref2, _metadata$ouId$name, _metadata$ouId, _metadata$ouIdHelper$;\n      return (_ref2 = (_metadata$ouId$name = (_metadata$ouId = metadata[ouId]) === null || _metadata$ouId === void 0 ? void 0 : _metadata$ouId.name) !== null && _metadata$ouId$name !== void 0 ? _metadata$ouId$name : (_metadata$ouIdHelper$ = metadata[ouIdHelper.removePrefix(ouId)]) === null || _metadata$ouIdHelper$ === void 0 ? void 0 : _metadata$ouIdHelper$.name) !== null && _ref2 !== void 0 ? _ref2 :\n      // Default to showing the ID, but this should never happen\n      ouId;\n    });\n    return ouNames;\n  }\n  const operators = getOperatorsByValueType(dimension.valueType);\n  const parsedConditions = conditionsList.map(condition => {\n    let operator, value;\n    if (condition.includes(NULL_VALUE)) {\n      operator = condition;\n    } else {\n      const parts = condition.split(':');\n      const valueType = dimension.dimensionType === DIMENSION_TYPE_PROGRAM_INDICATOR ? VALUE_TYPE_NUMBER : dimension.valueType;\n      operator = removeCaseSensitivePrefix(parts[0]);\n      value = formatValue(parts[1], valueType, formatValueOptions);\n    }\n    if (value && [VALUE_TYPE_TIME, VALUE_TYPE_DATETIME].includes(dimension.valueType)) {\n      value = value.replaceAll(API_TIME_DIVIDER, UI_TIME_DIVIDER);\n    }\n    if (value && dimension.valueType === VALUE_TYPE_DATETIME) {\n      value = value.replaceAll(API_DATETIME_DIVIDER, UI_DATETIME_DIVIDER);\n    }\n    const operatorName = operators[operator];\n    const capitalCaseOperatorName = operatorName[0].toUpperCase() + operatorName.substring(1);\n    return value ? `${capitalCaseOperatorName}: ${value}` : capitalCaseOperatorName;\n  });\n  return parsedConditions;\n};\nexport const getConditionsFromVisualization = vis => [...vis.columns, ...vis.rows, ...vis.filters].filter(item => item.filter || item.legendSet).reduce((acc, key) => {\n  var _key$programStage, _key$program, _key$legendSet;\n  return {\n    ...acc,\n    [formatDimensionId({\n      dimensionId: key.dimension,\n      programStageId: (_key$programStage = key.programStage) === null || _key$programStage === void 0 ? void 0 : _key$programStage.id,\n      programId: (_key$program = key.program) === null || _key$program === void 0 ? void 0 : _key$program.id,\n      outputType: vis.outputType\n    })]: {\n      condition: key.filter,\n      legendSet: (_key$legendSet = key.legendSet) === null || _key$legendSet === void 0 ? void 0 : _key$legendSet.id\n    }\n  };\n}, {});","export const ACCESSORY_PANEL_TAB_INPUT = 'INPUT';\nexport const ACCESSORY_PANEL_TAB_PROGRAM = 'PROGRAM';\nexport const ACCESSORY_PANEL_TAB_YOUR = 'YOUR';\nexport const ACCESSORY_PANEL_TAB_TRACKED_ENTITY = 'TRACKED_ENTITY';\nexport const ACCESSORY_PANEL_DEFAULT_WIDTH = 260;\nexport const ACCESSORY_PANEL_MIN_WIDTH = 180;\nexport const ACCESSORY_PANEL_MIN_PX_AT_END = 50;\nexport const PRIMARY_PANEL_WIDTH = 260;\nexport const ARROW_LEFT_KEY = 'ArrowLeft';\nexport const ARROW_RIGHT_KEY = 'ArrowRight';","import { ACCESSORY_PANEL_DEFAULT_WIDTH, ACCESSORY_PANEL_MIN_PX_AT_END, ACCESSORY_PANEL_MIN_WIDTH, PRIMARY_PANEL_WIDTH } from './accessoryPanelConstants.js';\nexport const STORAGE_KEY = 'dhis2.line-listing.accessoryPanelWidth';\nconst sanitizeWidth = width => {\n  const maxAvailableWidth = window.innerWidth - (PRIMARY_PANEL_WIDTH + ACCESSORY_PANEL_MIN_PX_AT_END);\n  let sanitizedWidth = parseInt(width);\n  if (!Number.isInteger(sanitizedWidth)) {\n    sanitizedWidth = ACCESSORY_PANEL_DEFAULT_WIDTH;\n  }\n\n  // First enforce upper bound\n  if (sanitizedWidth > maxAvailableWidth) {\n    sanitizedWidth = maxAvailableWidth;\n  }\n\n  // Then enforce lower bound, so lower bound takes precedence\n  if (sanitizedWidth < ACCESSORY_PANEL_MIN_WIDTH) {\n    sanitizedWidth = ACCESSORY_PANEL_MIN_WIDTH;\n  }\n  return sanitizedWidth;\n};\nexport const getUserSidebarWidthFromLocalStorage = () => sanitizeWidth(window.localStorage.getItem(STORAGE_KEY));\nexport const setUserSidebarWidthToLocalStorage = width => {\n  window.localStorage.setItem(STORAGE_KEY, sanitizeWidth(width));\n};","export const removeLastPathSegment = path => {\n  // if root path, then return unprocessed path\n  if (path.match(/\\//g).length === 1) {\n    return path;\n  }\n  return path.substr(0, path.lastIndexOf('/'));\n};\nexport const getOuPath = (id, metadata, parentGraphMap) => {\n  if (metadata[id] && metadata[id].path) {\n    return metadata[id].path;\n  }\n\n  // for root org units\n  if (parentGraphMap[id] === id || parentGraphMap[id] === '') {\n    return `/${id}`;\n  }\n  return parentGraphMap[id] ? `/${parentGraphMap[id]}/${id}` : undefined;\n};","import { DIMENSION_ID_ORGUNIT, layoutGetAxisIdDimensionIdsObject } from '@dhis2/analytics';\nimport { getInverseLayout } from './layout.js';\nimport { removeLastPathSegment } from './orgUnit.js';\nexport const getParentGraphMapFromVisualization = vis => {\n  const dimensionIdsByAxis = layoutGetAxisIdDimensionIdsObject(vis);\n  const inverseLayout = getInverseLayout(dimensionIdsByAxis);\n  const ouAxis = inverseLayout[DIMENSION_ID_ORGUNIT];\n  if (!ouAxis) {\n    return {};\n  }\n  const parentGraphMap = {};\n  const ouDimension = vis[ouAxis].find(dimension => dimension.dimension === DIMENSION_ID_ORGUNIT);\n  ouDimension.items.filter(orgUnit => orgUnit.path).forEach(orgUnit => {\n    if ('/' + orgUnit.id === orgUnit.path) {\n      // root org unit case\n      parentGraphMap[orgUnit.id] = '';\n    } else {\n      const path = removeLastPathSegment(orgUnit.path);\n      parentGraphMap[orgUnit.id] = path[0] === '/' ? path.substr(1) : path;\n    }\n  });\n  return parentGraphMap;\n};","import { layoutGetAxisIdDimensionIdsObject, layoutGetDimensionIdItemIdsObject, VIS_TYPE_LINE_LIST, VIS_TYPE_PIVOT_TABLE } from '@dhis2/analytics';\nimport { getConditionsFromVisualization } from './conditions.js';\nimport { getRequestOptions } from './getRequestOptions.js';\nimport { getAdaptedUiLayoutByType } from './layout.js';\nimport { getUserSidebarWidthFromLocalStorage } from './localStorage.js';\nimport { getOptionsFromVisualization } from './options.js';\nimport { getParentGraphMapFromVisualization } from './parentGraphMap.js';\nimport { getRepetitionFromVisualisation } from './repetition.js';\nimport { getHeadersMap } from './visualization.js';\nconst lineListUiAdapter = ui => ({\n  ...ui,\n  layout: getAdaptedUiLayoutByType(ui.layout, VIS_TYPE_LINE_LIST)\n});\nexport const getAdaptedUiByType = ui => {\n  switch (ui.type) {\n    case VIS_TYPE_LINE_LIST:\n      return lineListUiAdapter(ui);\n    case VIS_TYPE_PIVOT_TABLE:\n    default:\n      return ui;\n  }\n};\nexport const getUiFromVisualization = function (vis) {\n  var _vis$program, _vis$programStage;\n  let currentState = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  return {\n    ...currentState,\n    input: {\n      type: vis.outputType\n    },\n    entityType: vis.trackedEntityType,\n    program: {\n      id: (_vis$program = vis.program) === null || _vis$program === void 0 ? void 0 : _vis$program.id,\n      stageId: (_vis$programStage = vis.programStage) === null || _vis$programStage === void 0 ? void 0 : _vis$programStage.id\n    },\n    options: getOptionsFromVisualization(vis),\n    layout: layoutGetAxisIdDimensionIdsObject(vis),\n    itemsByDimension: layoutGetDimensionIdItemIdsObject(vis),\n    conditions: getConditionsFromVisualization(vis),\n    parentGraphMap: vis.parentGraphMap || getParentGraphMapFromVisualization(vis) || currentState.parentGraphMap,\n    repetitionByDimension: getRepetitionFromVisualisation(vis),\n    sorting: getSortingFromVisualization(vis)\n  };\n};\n\n// Sorting\n//\nexport const getSortingFromVisualization = vis => {\n  var _vis$sorting;\n  const dimensionHeadersMap = getHeadersMap(getRequestOptions(vis));\n  return (_vis$sorting = vis.sorting) !== null && _vis$sorting !== void 0 && _vis$sorting.length ? {\n    dimension: dimensionHeadersMap[vis.sorting[0].dimension] || vis.sorting[0].dimension,\n    direction: vis.sorting[0].direction.toLowerCase()\n  } : undefined;\n};\nexport const getDefaultSorting = () => ({\n  dimension: null,\n  direction: 'default'\n});\nexport const getUserSidebarWidth = getUserSidebarWidthFromLocalStorage;","export const SET_LOAD_ERROR = 'SET_LOAD_ERROR';\nexport const CLEAR_LOAD_ERROR = 'CLEAR_LOAD_ERROR';\nexport const SET_VISUALIZATION_LOADING = 'SET_VISUALIZATION_LOADING';\nexport const DEFAULT_LOADING = {\n  loadingError: null,\n  isVisualizationLoading: true\n};\nexport default (function () {\n  let state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : DEFAULT_LOADING;\n  let action = arguments.length > 1 ? arguments[1] : undefined;\n  switch (action.type) {\n    case SET_LOAD_ERROR:\n      {\n        return {\n          ...state,\n          loadingError: action.value\n        };\n      }\n    case CLEAR_LOAD_ERROR:\n      return {\n        ...state,\n        loadingError: DEFAULT_LOADING.loadingError\n      };\n    case SET_VISUALIZATION_LOADING:\n      return {\n        ...state,\n        isVisualizationLoading: action.value\n      };\n    default:\n      return state;\n  }\n});\n\n// Selectors\nexport const sGetLoadError = state => state.loader.loadingError;\nexport const sGetIsVisualizationLoading = state => state.loader.isVisualizationLoading;","import { DIMENSION_TYPE_PERIOD } from '@dhis2/analytics';\nimport i18n from '@dhis2/d2-i18n';\nimport { DIMENSION_ID_CREATED, DIMENSION_ID_CREATED_BY, DIMENSION_ID_LAST_UPDATED, DIMENSION_ID_LAST_UPDATED_BY, DIMENSION_TYPE_USER } from './dimensionConstants.js';\nimport { getDefaultOuMetadata } from './metadata.js';\nimport { OUTPUT_TYPE_TRACKED_ENTITY } from './visualization.js';\nexport const getCreatedDimension = () => ({\n  [DIMENSION_ID_CREATED]: {\n    id: DIMENSION_ID_CREATED,\n    dimensionType: DIMENSION_TYPE_PERIOD,\n    name: i18n.t('Registration date')\n  }\n});\nexport const getMainDimensions = inputType => ({\n  ...(inputType === OUTPUT_TYPE_TRACKED_ENTITY ? {\n    ...getDefaultOuMetadata(inputType),\n    ...getCreatedDimension()\n  } : {}),\n  [DIMENSION_ID_LAST_UPDATED]: {\n    id: DIMENSION_ID_LAST_UPDATED,\n    dimensionType: DIMENSION_TYPE_PERIOD,\n    name: i18n.t('Last updated on')\n  },\n  [DIMENSION_ID_CREATED_BY]: {\n    id: DIMENSION_ID_CREATED_BY,\n    dimensionType: DIMENSION_TYPE_USER,\n    name: i18n.t('Created by')\n  },\n  [DIMENSION_ID_LAST_UPDATED_BY]: {\n    id: DIMENSION_ID_LAST_UPDATED_BY,\n    dimensionType: DIMENSION_TYPE_USER,\n    name: i18n.t('Last updated by')\n  }\n});","export const PROGRAM_TYPE_WITHOUT_REGISTRATION = 'WITHOUT_REGISTRATION';\nexport const PROGRAM_TYPE_WITH_REGISTRATION = 'WITH_REGISTRATION';","import { DIMENSION_ID_ORGUNIT, DIMENSION_TYPE_ORGANISATION_UNIT } from '@dhis2/analytics';\nimport i18n from '@dhis2/d2-i18n';\nimport { DIMENSION_ID_EVENT_STATUS, DIMENSION_TYPE_STATUS, DIMENSION_ID_PROGRAM_STATUS } from './dimensionConstants.js';\nimport { extractDimensionIdParts } from './dimensionId.js';\nimport { getDefaultOrgUnitLabel } from './metadata.js';\nimport { PROGRAM_TYPE_WITHOUT_REGISTRATION } from './programTypes.js';\nimport { OUTPUT_TYPE_ENROLLMENT, OUTPUT_TYPE_EVENT, OUTPUT_TYPE_TRACKED_ENTITY } from './visualization.js';\nconst prefixDimensionId = (prefix, dimensionId) => prefix ? `${prefix}.${dimensionId}` : dimensionId;\nexport const getProgramDimensions = programId => ({\n  [prefixDimensionId(programId, DIMENSION_ID_ORGUNIT)]: {\n    id: prefixDimensionId(programId, DIMENSION_ID_ORGUNIT),\n    dimensionType: DIMENSION_TYPE_ORGANISATION_UNIT,\n    name: getDefaultOrgUnitLabel()\n  },\n  [prefixDimensionId(programId, DIMENSION_ID_EVENT_STATUS)]: {\n    id: prefixDimensionId(programId, DIMENSION_ID_EVENT_STATUS),\n    dimensionType: DIMENSION_TYPE_STATUS,\n    name: i18n.t('Event status')\n  },\n  [prefixDimensionId(programId, DIMENSION_ID_PROGRAM_STATUS)]: {\n    id: prefixDimensionId(programId, DIMENSION_ID_PROGRAM_STATUS),\n    dimensionType: DIMENSION_TYPE_STATUS,\n    name: i18n.t('Program status')\n  }\n});\nexport const getIsProgramDimensionDisabled = _ref => {\n  let {\n    dimensionId,\n    inputType,\n    programType\n  } = _ref;\n  const {\n    dimensionId: id\n  } = extractDimensionIdParts(dimensionId, inputType);\n  if (id === DIMENSION_ID_PROGRAM_STATUS && inputType === OUTPUT_TYPE_EVENT) {\n    if (!programType) {\n      return true;\n    } else if (programType === PROGRAM_TYPE_WITHOUT_REGISTRATION) {\n      return true;\n    }\n  } else if (id === DIMENSION_ID_EVENT_STATUS && [OUTPUT_TYPE_ENROLLMENT, OUTPUT_TYPE_TRACKED_ENTITY].includes(inputType)) {\n    return true;\n  }\n  return false;\n};","import { DIMENSION_TYPE_PERIOD, VALUE_TYPE_DATE, layoutGetAllDimensions } from '@dhis2/analytics';\nimport i18n from '@dhis2/d2-i18n';\nimport { DIMENSION_ID_EVENT_DATE, DIMENSION_ID_ENROLLMENT_DATE, DIMENSION_ID_INCIDENT_DATE, DIMENSION_ID_SCHEDULED_DATE, DIMENSION_IDS_TIME } from './dimensionConstants.js';\nimport { PROGRAM_TYPE_WITH_REGISTRATION } from './programTypes.js';\nimport { OUTPUT_TYPE_ENROLLMENT, OUTPUT_TYPE_EVENT, OUTPUT_TYPE_TRACKED_ENTITY } from './visualization.js';\nconst NAME_PARENT_PROPERTY_PROGRAM = 'program';\nconst NAME_PARENT_PROPERTY_STAGE = 'stage';\nexport const getTimeDimensions = () => ({\n  [DIMENSION_ID_EVENT_DATE]: {\n    id: DIMENSION_ID_EVENT_DATE,\n    dimensionType: DIMENSION_TYPE_PERIOD,\n    defaultName: i18n.t('Event date'),\n    nameParentProperty: NAME_PARENT_PROPERTY_STAGE,\n    nameProperty: 'displayExecutionDateLabel',\n    formatType: VALUE_TYPE_DATE\n  },\n  [DIMENSION_ID_ENROLLMENT_DATE]: {\n    id: DIMENSION_ID_ENROLLMENT_DATE,\n    dimensionType: DIMENSION_TYPE_PERIOD,\n    defaultName: i18n.t('Enrollment date'),\n    nameParentProperty: NAME_PARENT_PROPERTY_PROGRAM,\n    nameProperty: 'displayEnrollmentDateLabel',\n    formatType: VALUE_TYPE_DATE\n  },\n  [DIMENSION_ID_INCIDENT_DATE]: {\n    id: DIMENSION_ID_INCIDENT_DATE,\n    dimensionType: DIMENSION_TYPE_PERIOD,\n    defaultName: i18n.t('Incident date'),\n    nameParentProperty: NAME_PARENT_PROPERTY_PROGRAM,\n    nameProperty: 'displayIncidentDateLabel',\n    formatType: VALUE_TYPE_DATE\n  },\n  [DIMENSION_ID_SCHEDULED_DATE]: {\n    id: DIMENSION_ID_SCHEDULED_DATE,\n    dimensionType: DIMENSION_TYPE_PERIOD,\n    defaultName: i18n.t('Scheduled date'),\n    nameParentProperty: NAME_PARENT_PROPERTY_STAGE,\n    nameProperty: 'displayDueDateLabel',\n    formatType: VALUE_TYPE_DATE\n  }\n});\nexport const getTimeDimensionName = (dimension, program, stage) => {\n  if (!dimension.nameParentProperty || !program) {\n    return dimension.defaultName;\n  }\n  const name = dimension.nameParentProperty === NAME_PARENT_PROPERTY_PROGRAM ? program[dimension.nameProperty] : stage === null || stage === void 0 ? void 0 : stage[dimension.nameProperty];\n  return name || dimension.defaultName;\n};\nexport const getHiddenTimeDimensions = (inputType, program, stage) => {\n  const hiddenDimensions = [];\n  switch (inputType) {\n    case OUTPUT_TYPE_EVENT:\n      {\n        if ((program === null || program === void 0 ? void 0 : program.programType) === PROGRAM_TYPE_WITH_REGISTRATION) {\n          if (program.displayIncidentDate === false) {\n            hiddenDimensions.push(DIMENSION_ID_INCIDENT_DATE);\n          }\n          if ((stage === null || stage === void 0 ? void 0 : stage.hideDueDate) === true) {\n            hiddenDimensions.push(DIMENSION_ID_SCHEDULED_DATE);\n          }\n        } else {\n          hiddenDimensions.push(DIMENSION_ID_ENROLLMENT_DATE);\n          hiddenDimensions.push(DIMENSION_ID_INCIDENT_DATE);\n          hiddenDimensions.push(DIMENSION_ID_SCHEDULED_DATE);\n        }\n        return hiddenDimensions;\n      }\n    case OUTPUT_TYPE_ENROLLMENT:\n    case OUTPUT_TYPE_TRACKED_ENTITY:\n      {\n        hiddenDimensions.push(DIMENSION_ID_EVENT_DATE);\n        hiddenDimensions.push(DIMENSION_ID_SCHEDULED_DATE);\n        if (!program || program.displayIncidentDate === false) {\n          hiddenDimensions.push(DIMENSION_ID_INCIDENT_DATE);\n        }\n        return hiddenDimensions;\n      }\n    default:\n      {\n        return [DIMENSION_ID_EVENT_DATE, DIMENSION_ID_ENROLLMENT_DATE, DIMENSION_ID_SCHEDULED_DATE, DIMENSION_ID_INCIDENT_DATE];\n      }\n  }\n};\nexport const isAoWithTimeDimension = ao => layoutGetAllDimensions(ao).some(_ref => {\n  let {\n    dimensionType,\n    dimension,\n    items\n  } = _ref;\n  return (dimensionType === DIMENSION_TYPE_PERIOD || DIMENSION_IDS_TIME.has(dimension)) && Array.isArray(items) && items.length > 0;\n});","import { DIMENSION_ID_ORGUNIT, DIMENSION_TYPE_ORGANISATION_UNIT, USER_ORG_UNIT, USER_ORG_UNIT_CHILDREN, USER_ORG_UNIT_GRANDCHILDREN } from '@dhis2/analytics';\nimport i18n from '@dhis2/d2-i18n';\nimport { formatDimensionId } from './dimensionId.js';\nimport { getMainDimensions, getCreatedDimension } from './mainDimensions.js';\nimport { getProgramDimensions } from './programDimensions.js';\nimport { getTimeDimensions, getTimeDimensionName } from './timeDimensions.js';\nimport { OUTPUT_TYPE_TRACKED_ENTITY, getStatusNames } from './visualization.js';\nconst formatObject = object => Object.entries(object).reduce((obj, _ref) => {\n  let [key, value] = _ref;\n  return {\n    ...obj,\n    [key]: {\n      name: value\n    }\n  };\n}, {});\nconst getOrganisationUnits = () => ({\n  [USER_ORG_UNIT]: i18n.t('User organisation unit'),\n  [USER_ORG_UNIT_CHILDREN]: i18n.t('User sub-units'),\n  [USER_ORG_UNIT_GRANDCHILDREN]: i18n.t('User sub-x2-units')\n});\nexport const getDefaultMetadata = () => ({\n  ...getMainDimensions(),\n  ...getCreatedDimension(),\n  ...getProgramDimensions(),\n  ...getDefaultTimeDimensionsMetadata(),\n  ...formatObject(getOrganisationUnits()),\n  ...formatObject(getStatusNames())\n});\nexport const getDefaultTimeDimensionsMetadata = () => {\n  return Object.values(getTimeDimensions()).reduce((acc, _ref2) => {\n    let {\n      id,\n      name,\n      dimensionType\n    } = _ref2;\n    acc[id] = {\n      id,\n      name,\n      dimensionType\n    };\n    return acc;\n  }, {});\n};\nexport const getDefaultOuMetadata = inputType => ({\n  [DIMENSION_ID_ORGUNIT]: {\n    id: DIMENSION_ID_ORGUNIT,\n    dimensionType: DIMENSION_TYPE_ORGANISATION_UNIT,\n    name: getDefaultOrgUnitLabel(inputType)\n  }\n});\nexport const getDefaultOrgUnitLabel = inputType => {\n  if (inputType === OUTPUT_TYPE_TRACKED_ENTITY) {\n    return i18n.t('Registration org. unit');\n  } else {\n    return i18n.t('Organisation unit');\n  }\n};\nexport const getProgramAsMetadata = program => ({\n  ...program.programStages.reduce((acc, stage) => {\n    acc[stage.id] = stage;\n    return acc;\n  }, {}),\n  [program.id]: program\n});\nexport const getDynamicTimeDimensionsMetadata = (program, stage, inputType) => ({\n  ...Object.values(getTimeDimensions()).reduce((acc, dimension) => {\n    const id = formatDimensionId({\n      dimensionId: dimension.id,\n      programId: program === null || program === void 0 ? void 0 : program.id,\n      outputType: inputType\n    });\n    acc[id] = {\n      id,\n      dimensionType: dimension.dimensionType,\n      name: getTimeDimensionName(dimension, program, stage)\n    };\n    return acc;\n  }, {})\n});\nexport const isPopulatedObject = input => {\n  if (input && typeof input === 'object' && !Array.isArray(input)) {\n    for (const prop in input) {\n      if (Object.hasOwn(input, prop)) {\n        return true;\n      }\n    }\n  }\n  return false;\n};\nexport const transformMetaDataResponseObject = metaDataResponseObject => Object.entries(metaDataResponseObject).filter(_ref3 => {\n  let [item] = _ref3;\n  return ![USER_ORG_UNIT, USER_ORG_UNIT_CHILDREN, USER_ORG_UNIT_GRANDCHILDREN, DIMENSION_ID_ORGUNIT].includes(item);\n}).reduce((obj, _ref4) => {\n  let [id, item] = _ref4;\n  obj[id] = {\n    id,\n    name: item.name || item.displayName,\n    displayName: item.displayName,\n    dimensionType: item.dimensionType || item.dimensionItemType,\n    code: item.code\n  };\n  return obj;\n}, {});","export const ADD_METADATA = 'ADD_METADATA';\nexport const CLEAR_METADATA = 'CLEAR_METADATA';\nconst EMPTY_METADATA = {};\nexport default (function () {\n  let state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : EMPTY_METADATA;\n  let action = arguments.length > 1 ? arguments[1] : undefined;\n  switch (action.type) {\n    case ADD_METADATA:\n      {\n        const result = {\n          ...state\n        };\n        Object.entries(action.value).forEach(_ref => {\n          let [key, value] = _ref;\n          return result[key] = {\n            ...result[key],\n            ...value\n          };\n        });\n        return result;\n      }\n    case CLEAR_METADATA:\n      return EMPTY_METADATA;\n    default:\n      return state;\n  }\n});\n\n// Selectors\n\nexport const sGetMetadata = state => state.metadata;\nexport const sGetMetadataById = (state, id) => state.metadata[id];","import { getDefaultMetadata } from '../modules/metadata.js';\nimport { ADD_METADATA, CLEAR_METADATA } from '../reducers/metadata.js';\nexport const acAddMetadata = value => ({\n  type: ADD_METADATA,\n  value\n});\nconst acClearMetadata = () => ({\n  type: CLEAR_METADATA\n});\nexport const tSetInitMetadata = function () {\n  let rootOrgUnits = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  return dispatch => {\n    const metaData = {\n      ...getDefaultMetadata()\n    };\n    rootOrgUnits.forEach(rootOrgUnit => {\n      if (rootOrgUnit.id) {\n        metaData[rootOrgUnit.id] = {\n          ...rootOrgUnit,\n          path: `/${rootOrgUnit.id}`\n        };\n      }\n    });\n    dispatch(acClearMetadata());\n    dispatch(acAddMetadata(metaData));\n  };\n};","/*eslint no-unused-vars: [\"error\", { \"ignoreRestSiblings\": true }]*/\nimport { DIMENSION_ID_ORGUNIT, USER_ORG_UNIT, VIS_TYPE_LINE_LIST } from '@dhis2/analytics';\nimport { useMemo } from 'react';\nimport { useStore, useSelector } from 'react-redux';\nimport { createSelector } from 'reselect';\nimport { DIMENSION_ID_EVENT_DATE, DIMENSION_ID_ENROLLMENT_DATE, DIMENSION_ID_INCIDENT_DATE, DIMENSION_ID_SCHEDULED_DATE, DIMENSION_ID_EVENT_STATUS, DIMENSION_ID_PROGRAM_STATUS } from '../modules/dimensionConstants.js';\nimport { formatDimensionId, extractDimensionIdParts } from '../modules/dimensionId.js';\nimport { getFilteredLayout } from '../modules/layout.js';\nimport { getMainDimensions } from '../modules/mainDimensions.js';\nimport { getOptionsForUi } from '../modules/options.js';\nimport { getIsProgramDimensionDisabled, getProgramDimensions } from '../modules/programDimensions.js';\nimport { getHiddenTimeDimensions } from '../modules/timeDimensions.js';\nimport { getAdaptedUiByType, getUiFromVisualization, getUserSidebarWidth } from '../modules/ui.js';\nimport { OUTPUT_TYPE_EVENT, OUTPUT_TYPE_TRACKED_ENTITY } from '../modules/visualization.js';\nimport { sGetMetadata, sGetMetadataById } from './metadata.js';\nexport const SET_UI_DRAGGING_ID = 'SET_UI_DRAGGING_ID';\nexport const SET_UI_INPUT = 'SET_UI_INPUT';\nexport const CLEAR_UI_PROGRAM = 'CLEAR_UI_PROGRAM';\nexport const CLEAR_UI_STAGE_ID = 'CLEAR_UI_STAGE_ID';\nexport const CLEAR_UI_ENTITY_TYPE = 'CLEAR_UI_ENTITY_TYPE';\nexport const UPDATE_UI_PROGRAM_ID = 'UPDATE_UI_PROGRAM_ID';\nexport const UPDATE_UI_PROGRAM_STAGE_ID = 'UPDATE_UI_PROGRAM_STAGE_ID';\nexport const UPDATE_UI_ENTITY_TYPE_ID = 'UPDATE_UI_ENTITY_TYPE_ID';\nexport const SET_UI_OPTIONS = 'SET_UI_OPTIONS';\nexport const ADD_UI_LAYOUT_DIMENSIONS = 'ADD_UI_LAYOUT_DIMENSIONS';\nexport const REMOVE_UI_LAYOUT_DIMENSIONS = 'REMOVE_UI_LAYOUT_DIMENSIONS';\nexport const SET_UI_LAYOUT = 'SET_UI_LAYOUT';\nexport const SET_UI_FROM_VISUALIZATION = 'SET_UI_FROM_VISUALIZATION';\nexport const CLEAR_UI = 'CLEAR_UI';\nexport const SET_UI_DETAILS_PANEL_OPEN = 'SET_UI_DETAILS_PANEL_OPEN';\nexport const SET_UI_ACCESSORY_PANEL_OPEN = 'SET_UI_ACCESSORY_PANEL_OPEN';\nexport const SET_UI_ACCESSORY_PANEL_WIDTH = 'SET_UI_ACCESSORY_PANEL_WIDTH';\nexport const SET_UI_ACCESSORY_PANEL_ACTIVE_TAB = 'SET_UI_ACCESSORY_PANEL_ACTIVE_TAB';\nexport const SET_UI_EXPANDED_LAYOUT_PANEL = 'SET_UI_EXPANDED_LAYOUT_PANEL';\nexport const TOGGLE_UI_EXPANDED_VISUALIZATION_CANVAS = 'TOGGLE_UI_EXPANDED_VISUALIZATION_CANVAS';\nexport const TOGGLE_UI_SIDEBAR_HIDDEN = 'TOGGLE_UI_SIDEBAR_HIDDEN';\nexport const TOGGLE_UI_LAYOUT_PANEL_HIDDEN = 'TOGGLE_UI_LAYOUT_PANEL_HIDDEN';\nexport const SET_UI_ACTIVE_MODAL_DIALOG = 'SET_UI_ACTIVE_MODAL_DIALOG';\nexport const SET_UI_ITEMS = 'SET_UI_ITEMS';\nexport const REMOVE_UI_ITEMS = 'REMOVE_UI_ITEMS';\nexport const ADD_UI_PARENT_GRAPH_MAP = 'ADD_UI_PARENT_GRAPH_MAP';\nexport const SET_UI_CONDITIONS = 'SET_UI_CONDITIONS';\nexport const SET_UI_REPETITION = 'SET_UI_REPETITION';\nexport const REMOVE_UI_REPETITION = 'REMOVE_UI_REPETITION';\nexport const CLEAR_UI_REPETITION = 'CLEAR_UI_REPETITION';\nexport const SET_UI_SORTING = 'SET_UI_SORTING';\nexport const CLEAR_UI_SORTING = 'CLEAR_UI_SORTING';\nconst DEFAULT_CONDITIONS = {};\nconst DEFAULT_DIMENSION_CONDITIONS = {};\nconst DEFAULT_DIMENSION_ITEMS = [];\nconst EMPTY_UI = {\n  draggingId: null,\n  type: VIS_TYPE_LINE_LIST,\n  input: {\n    type: OUTPUT_TYPE_EVENT\n  },\n  program: {\n    id: undefined,\n    stageId: undefined\n  },\n  entityType: {\n    id: undefined\n  },\n  layout: {\n    columns: [],\n    filters: []\n  },\n  itemsByDimension: {},\n  accessoryPanelWidth: getUserSidebarWidth(),\n  options: {},\n  parentGraphMap: {},\n  repetitionByDimension: {},\n  conditions: DEFAULT_CONDITIONS\n};\nexport const DEFAULT_UI = {\n  draggingId: null,\n  type: VIS_TYPE_LINE_LIST,\n  input: {\n    type: OUTPUT_TYPE_EVENT\n  },\n  program: {},\n  entityType: {},\n  layout: {\n    // TODO: Populate the layout with the correct default dimensions, these are just temporary for testing\n    columns: [DIMENSION_ID_ORGUNIT],\n    filters: []\n  },\n  itemsByDimension: {\n    [DIMENSION_ID_ORGUNIT]: [],\n    [DIMENSION_ID_EVENT_STATUS]: [],\n    [DIMENSION_ID_PROGRAM_STATUS]: []\n  },\n  options: getOptionsForUi(),\n  showAccessoryPanel: true,\n  accessoryPanelActiveTab: 'INPUT',\n  accessoryPanelWidth: getUserSidebarWidth(),\n  showDetailsPanel: false,\n  showExpandedLayoutPanel: false,\n  hideMainSideBar: false,\n  hideLayoutPanel: false,\n  activeModalDialog: null,\n  parentGraphMap: {},\n  repetitionByDimension: {},\n  conditions: DEFAULT_CONDITIONS\n};\nconst getPreselectedUi = options => {\n  const {\n    rootOrgUnits,\n    digitGroupSeparator\n  } = options;\n  const rootOrgUnitIds = rootOrgUnits.filter(root => root.id).map(root => root.id);\n  const parentGraphMap = {\n    ...DEFAULT_UI.parentGraphMap\n  };\n  rootOrgUnitIds.forEach(id => {\n    parentGraphMap[id] = '';\n  });\n  return {\n    ...DEFAULT_UI,\n    options: {\n      ...DEFAULT_UI.options,\n      digitGroupSeparator\n    },\n    itemsByDimension: {\n      ...DEFAULT_UI.itemsByDimension,\n      [DIMENSION_ID_ORGUNIT]: [USER_ORG_UNIT]\n    },\n    parentGraphMap\n  };\n};\nexport default (function () {\n  let state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : EMPTY_UI;\n  let action = arguments.length > 1 ? arguments[1] : undefined;\n  switch (action.type) {\n    case SET_UI_SORTING:\n      {\n        return {\n          ...state,\n          sorting: action.value\n        };\n      }\n    case CLEAR_UI_SORTING:\n      {\n        return {\n          ...state,\n          sorting: undefined\n        };\n      }\n    case SET_UI_DRAGGING_ID:\n      {\n        return {\n          ...state,\n          draggingId: action.value\n        };\n      }\n    case SET_UI_INPUT:\n      {\n        return {\n          ...state,\n          input: action.value\n        };\n      }\n    case CLEAR_UI_PROGRAM:\n      {\n        return {\n          ...state,\n          program: EMPTY_UI.program\n        };\n      }\n    case CLEAR_UI_STAGE_ID:\n      {\n        return {\n          ...state,\n          program: {\n            id: state.program.id,\n            stageId: undefined\n          }\n        };\n      }\n    case CLEAR_UI_ENTITY_TYPE:\n      {\n        return {\n          ...state,\n          entityType: EMPTY_UI.entityType\n        };\n      }\n    case UPDATE_UI_PROGRAM_ID:\n      {\n        return {\n          ...state,\n          program: {\n            ...state.program,\n            id: action.value\n          }\n        };\n      }\n    case UPDATE_UI_PROGRAM_STAGE_ID:\n      {\n        return {\n          ...state,\n          program: {\n            ...state.program,\n            stageId: action.value\n          }\n        };\n      }\n    case UPDATE_UI_ENTITY_TYPE_ID:\n      {\n        return {\n          ...state,\n          entityType: {\n            ...state.entityType,\n            id: action.value\n          }\n        };\n      }\n    case SET_UI_OPTIONS:\n      {\n        return {\n          ...state,\n          options: {\n            ...state.options,\n            ...action.value\n          }\n        };\n      }\n    // action.value: transfer object (dimensionId:axisId) saying what to add where: { ou: 'rows' }\n    // Reducer takes care of swapping (retransfer) if dimension already exists in layout\n    case ADD_UI_LAYOUT_DIMENSIONS:\n      {\n        const transfers = {\n          ...action.value\n        };\n        let newLayout = state.layout;\n\n        // Add dimension ids to destination (axisId === null means remove from layout)\n        Object.entries(transfers).forEach(_ref => {\n          let [dimensionId, {\n            axisId,\n            index\n          }] = _ref;\n          if (newLayout[axisId]) {\n            // Filter out transferred dimension id (remove from source)\n            newLayout = getFilteredLayout(newLayout, [dimensionId]);\n            if (index === null || index === undefined) {\n              newLayout[axisId].push(dimensionId);\n            } else {\n              newLayout[axisId].splice(index, 0, dimensionId);\n            }\n          }\n        });\n        return {\n          ...state,\n          layout: newLayout\n        };\n      }\n    case REMOVE_UI_LAYOUT_DIMENSIONS:\n      {\n        return {\n          ...state,\n          layout: getFilteredLayout(state.layout, action.value)\n        };\n      }\n    case SET_UI_FROM_VISUALIZATION:\n      {\n        return getAdaptedUiByType(getUiFromVisualization(action.value, state));\n      }\n    case SET_UI_LAYOUT:\n      {\n        return {\n          ...state,\n          layout: {\n            ...action.value\n          }\n        };\n      }\n    case SET_UI_DETAILS_PANEL_OPEN:\n      {\n        return {\n          ...state,\n          showDetailsPanel: action.value,\n          /*\n           * Always close left sidebar when opening the right sidebar\n           * Leave left sidebar unaffected when closing the right sidebar\n           */\n          showAccessoryPanel: action.value ? false : state.showAccessoryPanel\n        };\n      }\n    case SET_UI_ACCESSORY_PANEL_OPEN:\n      {\n        return {\n          ...state,\n          showAccessoryPanel: action.value,\n          /*\n           * Always close right sidebar when opening the left sidebar\n           * Leave right sidebar unaffected when closing the left sidebar\n           */\n          showDetailsPanel: action.value ? false : state.showDetailsPanel\n        };\n      }\n    case SET_UI_ACCESSORY_PANEL_WIDTH:\n      {\n        return {\n          ...state,\n          accessoryPanelWidth: action.value\n        };\n      }\n    case SET_UI_ACCESSORY_PANEL_ACTIVE_TAB:\n      {\n        return {\n          ...state,\n          accessoryPanelActiveTab: action.value\n        };\n      }\n    case TOGGLE_UI_SIDEBAR_HIDDEN:\n      {\n        return {\n          ...state,\n          hideMainSideBar: !state.hideMainSideBar\n        };\n      }\n    case TOGGLE_UI_LAYOUT_PANEL_HIDDEN:\n      {\n        return {\n          ...state,\n          hideLayoutPanel: !state.hideLayoutPanel\n        };\n      }\n    case TOGGLE_UI_EXPANDED_VISUALIZATION_CANVAS:\n      {\n        // Toggle both to `true` unless both already are\n        const nextValue = !(state.hideMainSideBar && state.hideLayoutPanel);\n        return {\n          ...state,\n          hideMainSideBar: nextValue,\n          hideLayoutPanel: nextValue\n        };\n      }\n    case SET_UI_EXPANDED_LAYOUT_PANEL:\n      {\n        return {\n          ...state,\n          showExpandedLayoutPanel: action.value\n        };\n      }\n    case CLEAR_UI:\n      {\n        return getPreselectedUi(action.value);\n      }\n    case SET_UI_ACTIVE_MODAL_DIALOG:\n      {\n        return {\n          ...state,\n          activeModalDialog: action.value || DEFAULT_UI.activeModalDialog\n        };\n      }\n    case SET_UI_ITEMS:\n      {\n        const {\n          dimensionId,\n          itemIds\n        } = action.value;\n        return {\n          ...state,\n          itemsByDimension: {\n            ...state.itemsByDimension,\n            [dimensionId]: itemIds\n          }\n        };\n      }\n    case REMOVE_UI_ITEMS:\n      {\n        const idsToRemove = new Set(action.value);\n        return {\n          ...state,\n          itemsByDimension: Object.entries(state.itemsByDimension).reduce((acc, _ref2) => {\n            let [id, items] = _ref2;\n            if (!idsToRemove.has(id)) {\n              acc[id] = items;\n            }\n            return acc;\n          }, {})\n        };\n      }\n    case ADD_UI_PARENT_GRAPH_MAP:\n      {\n        return {\n          ...state,\n          parentGraphMap: {\n            ...state.parentGraphMap,\n            ...action.value\n          }\n        };\n      }\n    case SET_UI_CONDITIONS:\n      {\n        const {\n          dimension,\n          inputCondition,\n          legendSet\n        } = action.value;\n        return {\n          ...state,\n          conditions: {\n            ...state.conditions,\n            [dimension]: inputCondition.length || legendSet ? {\n              condition: inputCondition,\n              legendSet\n            } : undefined\n          }\n        };\n      }\n    case SET_UI_REPETITION:\n      {\n        const {\n          dimensionId,\n          repetition\n        } = action.value;\n        return {\n          ...state,\n          repetitionByDimension: {\n            ...state.repetitionByDimension,\n            [dimensionId]: repetition\n          }\n        };\n      }\n    case REMOVE_UI_REPETITION:\n      {\n        const {\n          [action.value]: removedProperty,\n          ...repetitionByDimension\n        } = {\n          ...state.repetitionByDimension\n        };\n        return {\n          ...state,\n          repetitionByDimension\n        };\n      }\n    case CLEAR_UI_REPETITION:\n      {\n        return {\n          ...state,\n          repetitionByDimension: EMPTY_UI.repetitionByDimension\n        };\n      }\n    default:\n      return state;\n  }\n});\n\n// Selectors\n\nexport const sGetUi = state => state.ui;\nexport const sGetUiDraggingId = state => sGetUi(state).draggingId;\nexport const sGetUiType = state => sGetUi(state).type;\nexport const sGetUiInput = state => sGetUi(state).input;\nexport const sGetUiProgram = state => sGetUi(state).program;\nexport const sGetUiEntityType = state => sGetUi(state).entityType;\nexport const sGetUiLayout = state => sGetUi(state).layout;\nexport const sGetUiItems = state => sGetUi(state).itemsByDimension;\nexport const sGetUiOptions = state => sGetUi(state).options;\nexport const sGetUiParentGraphMap = state => sGetUi(state).parentGraphMap;\nexport const sGetUiRepetition = state => sGetUi(state).repetitionByDimension || {};\nexport const sGetUiConditions = state => sGetUi(state).conditions || DEFAULT_CONDITIONS;\n\n// TODO - should these props have empty values in the DEFAULT_UI and EMPTY_UI?\nexport const sGetUiShowDetailsPanel = state => sGetUi(state).showDetailsPanel;\nexport const sGetUiShowAccessoryPanel = state => sGetUi(state).showAccessoryPanel;\nexport const sGetUiAccessoryPanelActiveTab = state => sGetUi(state).accessoryPanelActiveTab;\nexport const sGetUiAccessoryPanelWidth = state => sGetUi(state).accessoryPanelWidth;\nexport const sGetUiShowExpandedLayoutPanel = state => sGetUi(state).showExpandedLayoutPanel;\nexport const sGetUiSidebarHidden = state => {\n  var _sGetUi$hideMainSideB;\n  return (_sGetUi$hideMainSideB = sGetUi(state).hideMainSideBar) !== null && _sGetUi$hideMainSideB !== void 0 ? _sGetUi$hideMainSideB : false;\n};\nexport const sGetUiLayoutPanelHidden = state => {\n  var _sGetUi$hideLayoutPan;\n  return (_sGetUi$hideLayoutPan = sGetUi(state).hideLayoutPanel) !== null && _sGetUi$hideLayoutPan !== void 0 ? _sGetUi$hideLayoutPan : false;\n};\nexport const sGetUiShowExpandedVisualizationCanvas = state => sGetUiSidebarHidden(state) && sGetUiLayoutPanelHidden(state);\nexport const sGetUiActiveModalDialog = state => sGetUi(state).activeModalDialog;\n\n// Selectors level 2\n\nexport const sGetUiInputType = state => sGetUiInput(state).type;\nexport const sGetUiProgramId = state => sGetUiProgram(state).id;\nexport const sGetUiProgramStageId = state => sGetUiProgram(state).stageId;\nexport const sGetUiEntityTypeId = state => {\n  var _sGetUiEntityType;\n  return (_sGetUiEntityType = sGetUiEntityType(state)) === null || _sGetUiEntityType === void 0 ? void 0 : _sGetUiEntityType.id;\n};\nexport const sGetUiItemsByDimension = (state, dimension) => sGetUiItems(state)[dimension] || DEFAULT_UI.itemsByDimension[dimension] || DEFAULT_DIMENSION_ITEMS;\nexport const sGetDimensionIdsFromLayout = state => Object.values(sGetUiLayout(state)).reduce((ids, axisDimensionIds) => ids.concat(axisDimensionIds), []);\nexport const sGetUiDimensionIdsByAxisId = (state, axisId) => sGetUiLayout(state)[axisId];\nexport const sGetUiConditionsByDimension = (state, dimension) => sGetUiConditions(state)[dimension] || DEFAULT_DIMENSION_CONDITIONS;\nexport const sGetUiRepetitionByDimension = (state, dimensionId) => sGetUiRepetition(state)[dimensionId];\nexport const renderChipsSelector = createSelector(\n// only render chips when all have names (from metadata) available\n[sGetUiLayout, sGetMetadata], (layout, metadata) => {\n  const layoutItems = Object.values(layout || {}).flat();\n  const dataObjects = [...Object.values(metadata || {})]; // TODO: Refactor to not use the whole metadata list\n\n  return layoutItems.every(item => dataObjects.some(data => data.id === item));\n});\n\n// Selector based hooks\nexport const useMainDimensions = () => {\n  const inputType = useSelector(sGetUiInputType);\n  return Object.values(getMainDimensions(inputType));\n};\nexport const useProgramDimensions = () => {\n  const store = useStore();\n  const inputType = useSelector(sGetUiInputType);\n  const programId = useSelector(sGetUiProgramId);\n  const programStageId = useSelector(sGetUiProgramStageId);\n  const getId = dimensionId => formatDimensionId({\n    dimensionId,\n    programId,\n    outputType: inputType\n  });\n  const eventDateDim = useSelector(state => sGetMetadataById(state, getId(DIMENSION_ID_EVENT_DATE)));\n  const enrollmentDateDim = useSelector(state => sGetMetadataById(state, getId(DIMENSION_ID_ENROLLMENT_DATE)));\n  const incidentDateDim = useSelector(state => sGetMetadataById(state, getId(DIMENSION_ID_INCIDENT_DATE)));\n  const scheduledDateDim = useSelector(state => sGetMetadataById(state, getId(DIMENSION_ID_SCHEDULED_DATE)));\n  return useMemo(() => {\n    const {\n      metadata\n    } = store.getState();\n    const program = metadata[programId];\n    const stage = metadata[programStageId];\n    const hiddenTimeDimensions = getHiddenTimeDimensions(inputType, program, stage);\n    const timeDimensions = [eventDateDim, enrollmentDateDim, scheduledDateDim, incidentDateDim].filter(dimension => {\n      if (!dimension) {\n        return false;\n      }\n      const {\n        dimensionId\n      } = extractDimensionIdParts(dimension.id, inputType);\n      return !hiddenTimeDimensions.includes(dimensionId);\n    });\n    const programDimensions = Object.values(getProgramDimensions(inputType === OUTPUT_TYPE_TRACKED_ENTITY && programId)).filter(dimension => !getIsProgramDimensionDisabled({\n      dimensionId: dimension.id,\n      inputType,\n      programType: program === null || program === void 0 ? void 0 : program.programType\n    }));\n    return programDimensions.concat(timeDimensions);\n  }, [inputType, programId, programStageId, eventDateDim, enrollmentDateDim, incidentDateDim, scheduledDateDim]);\n};","import { DIMENSION_ID_ORGUNIT } from '@dhis2/analytics';\nimport { DIMENSION_TYPES_PROGRAM, DIMENSION_IDS_TIME, DIMENSION_ID_EVENT_STATUS, DIMENSION_ID_PROGRAM_STATUS, DIMENSION_ID_SCHEDULED_DATE, DIMENSION_ID_LAST_UPDATED, DIMENSION_ID_CREATED } from '../modules/dimensionConstants.js';\nimport { extractDimensionIdParts } from '../modules/dimensionId.js';\nimport { getDefaultTimeDimensionsMetadata, getDynamicTimeDimensionsMetadata, getProgramAsMetadata, getDefaultOuMetadata } from '../modules/metadata.js';\nimport { PROGRAM_TYPE_WITH_REGISTRATION } from '../modules/programTypes.js';\nimport { OUTPUT_TYPE_EVENT, OUTPUT_TYPE_TRACKED_ENTITY } from '../modules/visualization.js';\nimport { sGetMetadataById } from '../reducers/metadata.js';\nimport { ADD_UI_LAYOUT_DIMENSIONS, REMOVE_UI_LAYOUT_DIMENSIONS, CLEAR_UI_SORTING, SET_UI_SORTING, SET_UI_DRAGGING_ID, SET_UI_LAYOUT, SET_UI_OPTIONS, SET_UI_FROM_VISUALIZATION, CLEAR_UI, SET_UI_DETAILS_PANEL_OPEN, SET_UI_ACCESSORY_PANEL_OPEN, SET_UI_EXPANDED_LAYOUT_PANEL, SET_UI_ACTIVE_MODAL_DIALOG, SET_UI_ITEMS, ADD_UI_PARENT_GRAPH_MAP, SET_UI_CONDITIONS, SET_UI_REPETITION, REMOVE_UI_REPETITION, CLEAR_UI_REPETITION, SET_UI_INPUT, UPDATE_UI_PROGRAM_ID, UPDATE_UI_PROGRAM_STAGE_ID, CLEAR_UI_PROGRAM, CLEAR_UI_STAGE_ID, REMOVE_UI_ITEMS, sGetUiProgramId, sGetUiInputType, TOGGLE_UI_EXPANDED_VISUALIZATION_CANVAS, TOGGLE_UI_SIDEBAR_HIDDEN, TOGGLE_UI_LAYOUT_PANEL_HIDDEN, SET_UI_ACCESSORY_PANEL_ACTIVE_TAB, UPDATE_UI_ENTITY_TYPE_ID, CLEAR_UI_ENTITY_TYPE, SET_UI_ACCESSORY_PANEL_WIDTH } from '../reducers/ui.js';\nexport const acSetUiDraggingId = value => ({\n  type: SET_UI_DRAGGING_ID,\n  value\n});\nexport const acSetUiInput = (value, metadata) => ({\n  type: SET_UI_INPUT,\n  value,\n  metadata\n});\nexport const acClearUiProgram = () => ({\n  type: CLEAR_UI_PROGRAM,\n  metadata: getDefaultTimeDimensionsMetadata()\n});\nexport const acClearUiStageId = metadata => ({\n  type: CLEAR_UI_STAGE_ID,\n  metadata\n});\nexport const acClearUiEntityType = () => ({\n  type: CLEAR_UI_ENTITY_TYPE,\n  metadata: getDefaultTimeDimensionsMetadata()\n});\nexport const acUpdateUiProgramId = (value, metadata) => ({\n  type: UPDATE_UI_PROGRAM_ID,\n  value,\n  metadata\n});\nexport const acUpdateUiProgramStageId = (value, metadata) => ({\n  type: UPDATE_UI_PROGRAM_STAGE_ID,\n  value,\n  metadata\n});\nexport const acUpdateUiEntityTypeId = (value, metadata) => ({\n  type: UPDATE_UI_ENTITY_TYPE_ID,\n  value,\n  metadata\n});\nconst tClearUiProgramRelatedDimensions = () => (dispatch, getState) => {\n  const {\n    ui,\n    metadata\n  } = getState();\n  const idsToRemove = ui.layout.columns.concat(ui.layout.filters).filter(id => {\n    const dimension = metadata[id];\n    const {\n      dimensionId\n    } = extractDimensionIdParts(id);\n    const isProgramDataDimension = DIMENSION_TYPES_PROGRAM.has(dimension.dimensionType);\n    const isProgramDimension = dimensionId === DIMENSION_ID_PROGRAM_STATUS || dimensionId === DIMENSION_ID_EVENT_STATUS || dimensionId === DIMENSION_ID_ORGUNIT && id !== DIMENSION_ID_ORGUNIT || DIMENSION_IDS_TIME.has(dimensionId) && dimensionId !== DIMENSION_ID_LAST_UPDATED || dimensionId === DIMENSION_ID_CREATED;\n    return isProgramDataDimension || isProgramDimension;\n  });\n  dispatch(acRemoveUiLayoutDimensions(idsToRemove), idsToRemove);\n  dispatch(acRemoveUiItems(idsToRemove));\n};\nexport const tClearUiProgramStageDimensions = stageId => (dispatch, getState) => {\n  const state = getState();\n  const program = sGetMetadataById(state, sGetUiProgramId(state));\n  const needsClearing = sGetUiInputType(state) === OUTPUT_TYPE_EVENT && program.programType === PROGRAM_TYPE_WITH_REGISTRATION;\n  if (needsClearing) {\n    const idsToRemove = state.ui.layout.columns.concat(state.ui.layout.filters).filter(dimensionId => dimensionId.includes(`${stageId}.`) || dimensionId === DIMENSION_ID_SCHEDULED_DATE);\n    dispatch(acRemoveUiLayoutDimensions(idsToRemove));\n    dispatch(acRemoveUiItems(idsToRemove));\n  }\n};\nexport const tSetUiInput = value => dispatch => {\n  dispatch(acClearUiEntityType());\n  dispatch(acClearUiProgram());\n  dispatch(tClearUiProgramRelatedDimensions());\n  dispatch(acClearUiRepetition());\n  dispatch(acSetUiInput(value, {\n    ...getDefaultTimeDimensionsMetadata(),\n    ...getDefaultOuMetadata(value.type)\n  }));\n};\nexport const tSetUiProgram = _ref => {\n  let {\n    program,\n    stage\n  } = _ref;\n  return (dispatch, getState) => {\n    const state = getState();\n    dispatch(acClearUiProgram());\n    const inputType = sGetUiInputType(state);\n    if (inputType !== OUTPUT_TYPE_TRACKED_ENTITY) {\n      dispatch(tClearUiProgramRelatedDimensions());\n    }\n    program && dispatch(acUpdateUiProgramId(program.id, {\n      ...getProgramAsMetadata(program),\n      ...getDynamicTimeDimensionsMetadata(program, stage, inputType)\n    }));\n    stage && dispatch(acUpdateUiProgramStageId(stage.id));\n  };\n};\nexport const tSetUiEntityType = _ref2 => {\n  let {\n    type\n  } = _ref2;\n  return dispatch => {\n    dispatch(acClearUiProgram());\n    dispatch(tClearUiProgramRelatedDimensions());\n    dispatch(acClearUiEntityType());\n    dispatch(acUpdateUiEntityTypeId(type.id, {\n      [type.id]: type\n    }));\n  };\n};\nexport const tClearUiStage = () => (dispatch, getState) => {\n  const state = getState();\n  const program = sGetMetadataById(state, sGetUiProgramId(state));\n  dispatch(acClearUiStageId(getDynamicTimeDimensionsMetadata(program)));\n};\nexport const tSetUiStage = stage => (dispatch, getState) => {\n  const state = getState();\n  const program = sGetMetadataById(state, sGetUiProgramId(state));\n  dispatch(acUpdateUiProgramStageId(stage.id, getDynamicTimeDimensionsMetadata(program, stage)));\n};\nexport const acSetUiOptions = value => ({\n  type: SET_UI_OPTIONS,\n  value\n});\nexport const acAddUiLayoutDimensions = (value, metadata) => ({\n  type: ADD_UI_LAYOUT_DIMENSIONS,\n  value,\n  metadata\n});\nexport const acRemoveUiLayoutDimensions = value => ({\n  type: REMOVE_UI_LAYOUT_DIMENSIONS,\n  value\n});\nexport const acRemoveUiItems = value => ({\n  type: REMOVE_UI_ITEMS,\n  value\n});\nexport const acSetUiLayout = value => ({\n  type: SET_UI_LAYOUT,\n  value\n});\nexport const acSetUiFromVisualization = (value, metadata) => ({\n  type: SET_UI_FROM_VISUALIZATION,\n  value,\n  metadata\n});\nexport const acClearUi = value => ({\n  type: CLEAR_UI,\n  value\n});\nexport const acSetUiDetailsPanelOpen = value => ({\n  type: SET_UI_DETAILS_PANEL_OPEN,\n  value\n});\nexport const acSetUiAccessoryPanelOpen = value => ({\n  type: SET_UI_ACCESSORY_PANEL_OPEN,\n  value\n});\nexport const acSetUiAccessoryPanelActiveTab = value => ({\n  type: SET_UI_ACCESSORY_PANEL_ACTIVE_TAB,\n  value\n});\nexport const acSetUiAccessoryPanelWidth = value => ({\n  type: SET_UI_ACCESSORY_PANEL_WIDTH,\n  value\n});\nexport const acToggleUiSidebarHidden = () => ({\n  type: TOGGLE_UI_SIDEBAR_HIDDEN\n});\nexport const acToggleUiLayoutPanelHidden = () => ({\n  type: TOGGLE_UI_LAYOUT_PANEL_HIDDEN\n});\nexport const acToggleUiExpandedVisualizationCanvas = () => ({\n  type: TOGGLE_UI_EXPANDED_VISUALIZATION_CANVAS\n});\nexport const acSetShowExpandedLayoutPanel = value => ({\n  type: SET_UI_EXPANDED_LAYOUT_PANEL,\n  value\n});\nexport const acSetUiOpenDimensionModal = (value, metadata) => ({\n  type: SET_UI_ACTIVE_MODAL_DIALOG,\n  value,\n  metadata\n});\nexport const acSetUiItems = (value, metadata) => ({\n  type: SET_UI_ITEMS,\n  value,\n  metadata\n});\nexport const acAddParentGraphMap = value => ({\n  type: ADD_UI_PARENT_GRAPH_MAP,\n  value\n});\nexport const acSetUiConditions = value => ({\n  type: SET_UI_CONDITIONS,\n  value\n});\nexport const acSetUiRepetition = value => ({\n  type: SET_UI_REPETITION,\n  value\n});\nexport const acSetUiDataSorting = value => ({\n  type: SET_UI_SORTING,\n  value\n});\nexport const acClearUiDataSorting = () => ({\n  type: CLEAR_UI_SORTING\n});\nexport const acRemoveUiRepetition = value => ({\n  type: REMOVE_UI_REPETITION,\n  value\n});\nexport const acClearUiRepetition = () => ({\n  type: CLEAR_UI_REPETITION\n});","import { getUiDimensionType } from '../modules/dimensionConstants.js';\nimport { formatDimensionId } from '../modules/dimensionId.js';\nimport { getDynamicTimeDimensionsMetadata, getProgramAsMetadata } from '../modules/metadata.js';\nimport { getDimensionMetadataFromVisualization } from '../modules/visualization.js';\nimport { SET_VISUALIZATION, CLEAR_VISUALIZATION } from '../reducers/visualization.js';\nexport const acSetVisualization = value => {\n  const {\n    outputType,\n    program,\n    programStage\n  } = value;\n  const timeDimensions = getDynamicTimeDimensionsMetadata(program, programStage);\n  const collectedMetadata = getDimensionMetadataFromVisualization(value) || {};\n  const dimensions = [...(value.columns || []), ...(value.rows || []), ...(value.filters || [])];\n  const metadata = dimensions.reduce((md, dimension) => {\n    var _dimension$programSta, _dimension$program, _dimension$optionSet;\n    if (!collectedMetadata[dimension === null || dimension === void 0 ? void 0 : dimension.dimension]) {\n      return md;\n    }\n    const prefixedId = formatDimensionId({\n      dimensionId: dimension.dimension,\n      programStageId: (_dimension$programSta = dimension.programStage) === null || _dimension$programSta === void 0 ? void 0 : _dimension$programSta.id,\n      programId: (_dimension$program = dimension.program) === null || _dimension$program === void 0 ? void 0 : _dimension$program.id,\n      outputType\n    });\n    md.push({\n      [prefixedId]: {\n        id: prefixedId,\n        name: collectedMetadata[dimension.dimension].name,\n        valueType: dimension.valueType,\n        optionSet: (_dimension$optionSet = dimension.optionSet) === null || _dimension$optionSet === void 0 ? void 0 : _dimension$optionSet.id,\n        dimensionType: getUiDimensionType({\n          dimensionId: prefixedId,\n          dimensionType: dimension.dimensionType\n        })\n      }\n    });\n    return md;\n  }, []);\n\n  // program\n  if (program) {\n    metadata.push(getProgramAsMetadata(program));\n  }\n\n  // program stage\n  if (programStage) {\n    metadata.push({\n      [programStage.id]: programStage\n    });\n  }\n\n  // time dimensions\n  Object.keys(timeDimensions).forEach(timeDimensionId => {\n    metadata.push({\n      [timeDimensionId]: timeDimensions[timeDimensionId]\n    });\n  });\n  return {\n    type: SET_VISUALIZATION,\n    value,\n    metadata\n  };\n};\nexport const acClearVisualization = () => ({\n  type: CLEAR_VISUALIZATION\n});","import { SET_LOAD_ERROR, CLEAR_LOAD_ERROR, SET_VISUALIZATION_LOADING } from '../reducers/loader.js';\nimport { acClearCurrent } from './current.js';\nimport { tSetInitMetadata } from './metadata.js';\nimport { acClearUi } from './ui.js';\nimport { acClearVisualization } from './visualization.js';\nexport const acSetLoadError = value => ({\n  type: SET_LOAD_ERROR,\n  value\n});\nexport const acClearLoadError = () => ({\n  type: CLEAR_LOAD_ERROR\n});\nexport const acSetVisualizationLoading = value => ({\n  type: SET_VISUALIZATION_LOADING,\n  value\n});\nexport const acClearAll = _ref => {\n  let {\n    error = null,\n    digitGroupSeparator,\n    rootOrgUnits\n  } = _ref;\n  return dispatch => {\n    if (error) {\n      dispatch(acSetLoadError(error));\n    } else {\n      dispatch(acClearLoadError());\n    }\n    dispatch(tSetInitMetadata(rootOrgUnits));\n    dispatch(acClearVisualization());\n    dispatch(acClearCurrent());\n    dispatch(acClearUi({\n      rootOrgUnits,\n      digitGroupSeparator\n    }));\n  };\n};","import { getAdaptedVisualization } from '../components/Visualization/analyticsQueryTools.js';\nimport { genericClientError } from '../modules/error.js';\nimport { layoutHasProgramId, layoutHasTrackedEntityTypeId, validateLayout } from '../modules/layoutValidation.js';\nimport { getSortingFromVisualization } from '../modules/ui.js';\nimport { SET_CURRENT, CLEAR_CURRENT, SET_CURRENT_FROM_UI, sGetCurrentFromUi } from '../reducers/current.js';\nimport { acClearLoadError, acSetLoadError, acSetVisualizationLoading } from './loader.js';\nimport { acSetShowExpandedLayoutPanel, acClearUiDataSorting } from './ui.js';\nconst acSetCurrent = value => ({\n  type: SET_CURRENT,\n  value\n});\nexport const tSetCurrent = visualization => dispatch => {\n  dispatch(acSetCurrent(visualization));\n};\nexport const acClearCurrent = () => ({\n  type: CLEAR_CURRENT\n});\nexport const acSetCurrentFromUi = value => ({\n  type: SET_CURRENT_FROM_UI,\n  value\n});\nexport const tSetCurrentFromUi = function () {\n  let {\n    validateOnly\n  } = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  return (dispatch, getState) => {\n    const state = getState();\n    const currentFromUi = sGetCurrentFromUi(state);\n    const currentOverrides = {};\n    const sorting = getSortingFromVisualization(currentFromUi);\n    const {\n      headers\n    } = getAdaptedVisualization(currentFromUi);\n    if (headers && sorting !== null && sorting !== void 0 && sorting.dimension) {\n      // reset sorting if current sort dimension has been removed from Columns DHIS2-13948\n      // flat() is needed here for repeated events where the dimension ids are nested in an array\n      if (!headers.flat().includes(sorting.dimension)) {\n        currentOverrides.sorting = undefined;\n        dispatch(acClearUiDataSorting());\n      }\n    }\n    const current = {\n      ...currentFromUi,\n      ...currentOverrides\n    };\n    try {\n      validateLayout(current);\n      if (!validateOnly) {\n        dispatch(acClearLoadError());\n        dispatch(acSetVisualizationLoading(true));\n      }\n    } catch (error) {\n      dispatch(acSetLoadError(error || genericClientError()));\n    }\n    if (!validateOnly) {\n      // proceed if the layout either has a program id or a tracked entity type id\n      if (layoutHasProgramId(current) || layoutHasTrackedEntityTypeId(current)) {\n        dispatch(acSetCurrent(current));\n      } else {\n        dispatch(acClearCurrent());\n      }\n      dispatch(acSetShowExpandedLayoutPanel(false));\n    }\n  };\n};","export const EVENT_TYPE = 'EVENT_VISUALIZATION_VIEW';","import { createHashHistory } from 'history';\nexport default createHashHistory();","const SYSTEM_SETTING_DATE_FORMAT = 'keyDateFormat';\nconst SYSTEM_SETTINGS_RELATIVE_PERIOD = 'keyAnalysisRelativePeriod';\nexport const SYSTEM_SETTINGS_DIGIT_GROUP_SEPARATOR = 'keyAnalysisDigitGroupSeparator';\nexport const SYSTEM_SETTINGS_HIDE_DAILY_PERIODS = 'keyHideDailyPeriods';\nexport const SYSTEM_SETTINGS_HIDE_WEEKLY_PERIODS = 'keyHideWeeklyPeriods';\nexport const SYSTEM_SETTINGS_HIDE_BIWEEKLY_PERIODS = 'keyHideBiWeeklyPeriods';\nexport const SYSTEM_SETTINGS_HIDE_MONTHLY_PERIODS = 'keyHideMonthlyPeriods';\nexport const SYSTEM_SETTINGS_HIDE_BIMONTHLY_PERIODS = 'keyHideBiMonthlyPeriods';\nexport const systemSettingsKeys = [SYSTEM_SETTING_DATE_FORMAT, SYSTEM_SETTINGS_RELATIVE_PERIOD, SYSTEM_SETTINGS_DIGIT_GROUP_SEPARATOR, SYSTEM_SETTINGS_HIDE_DAILY_PERIODS, SYSTEM_SETTINGS_HIDE_WEEKLY_PERIODS, SYSTEM_SETTINGS_HIDE_BIWEEKLY_PERIODS, SYSTEM_SETTINGS_HIDE_MONTHLY_PERIODS, SYSTEM_SETTINGS_HIDE_BIMONTHLY_PERIODS];","export const USER_SETTINGS_UI_LOCALE = 'keyUiLocale';\nexport const USER_SETTINGS_DISPLAY_PROPERTY = 'keyAnalysisDisplayProperty';\nexport const DERIVED_USER_SETTINGS_DISPLAY_NAME_PROPERTY = 'DERIVED_USER_SETTINGS_DISPLAY_NAME_PROPERTY';","// extracted by mini-css-extract-plugin\nexport default {\"eventReportsApp\":\"App_eventReportsApp__eK+xt\",\"flexCt\":\"App_flexCt__bBj8h\",\"flexDirCol\":\"App_flexDirCol__hoM5i\",\"flexGrow1\":\"App_flexGrow1__6cI5i\",\"minWidth0\":\"App_minWidth0__qQrjz\",\"flexBasis0\":\"App_flexBasis0__dyvFN\",\"sectionToolbar\":\"App_sectionToolbar__sDCWF\",\"sectionMain\":\"App_sectionMain__VwEm0\",\"mainRight\":\"App_mainRight__g1+bY\",\"hidden\":\"App_hidden__-FdsG\",\"mainCenterCanvas\":\"App_mainCenterCanvas__qZ1hx\",\"loadingCover\":\"App_loadingCover__gn3PU\"};","// extracted by mini-css-extract-plugin\nexport default {\"panel\":\"DetailsPanel_panel__6uoNE\"};","import { AboutAOUnit, InterpretationsUnit, useCachedDataQuery } from '@dhis2/analytics';\nimport PropTypes from 'prop-types';\nimport { stringify } from 'query-string';\nimport React, { useMemo } from 'react';\nimport { connect } from 'react-redux';\nimport history from '../../modules/history.js';\nimport { isAoWithTimeDimension } from '../../modules/timeDimensions.js';\nimport { sGetCurrent } from '../../reducers/current.js';\nimport { sGetLoadError } from '../../reducers/loader.js';\nimport classes from './styles/DetailsPanel.module.css';\nconst navigateToOpenModal = (interpretationId, initialFocus) => {\n  history.push({\n    pathName: history.location.pathname,\n    search: `?${stringify({\n      interpretationId,\n      initialFocus\n    })}`\n  }, {\n    isModalOpening: true\n  });\n};\nconst DetailsPanel = _ref => {\n  let {\n    visualization,\n    aboutAOUnitRenderId,\n    interpretationsUnitRenderId,\n    disabled\n  } = _ref;\n  const {\n    currentUser\n  } = useCachedDataQuery();\n  const hasTimeDimension = useMemo(() => isAoWithTimeDimension(visualization), [visualization]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.panel,\n    \"data-test\": \"details-panel\"\n  }, /*#__PURE__*/React.createElement(AboutAOUnit, {\n    type: \"eventVisualization\",\n    id: visualization.id,\n    renderId: aboutAOUnitRenderId\n  }), /*#__PURE__*/React.createElement(InterpretationsUnit, {\n    type: \"eventVisualization\",\n    visualizationHasTimeDimension: hasTimeDimension,\n    id: visualization.id,\n    currentUser: currentUser,\n    onInterpretationClick: interpretationId => navigateToOpenModal(interpretationId),\n    onReplyIconClick: interpretationId => navigateToOpenModal(interpretationId, true),\n    disabled: disabled,\n    renderId: interpretationsUnitRenderId\n  }));\n};\nDetailsPanel.propTypes = {\n  visualization: PropTypes.object.isRequired,\n  aboutAOUnitRenderId: PropTypes.number,\n  disabled: PropTypes.bool,\n  interpretationsUnitRenderId: PropTypes.number\n};\nconst mapStateToProps = state => ({\n  visualization: sGetCurrent(state),\n  disabled: !!sGetLoadError(state)\n});\nexport default connect(mapStateToProps)(DetailsPanel);","function _extends() { return _extends = Object.assign ? Object.assign.bind() : function (n) { for (var e = 1; e < arguments.length; e++) { var t = arguments[e]; for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]); } return n; }, _extends.apply(null, arguments); }\nimport i18n from '@dhis2/d2-i18n';\nimport { Button } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nconst UpdateButton = _ref => {\n  let {\n    onClick,\n    ...props\n  } = _ref;\n  return /*#__PURE__*/React.createElement(Button, _extends({}, props, {\n    onClick: onClick,\n    type: \"button\",\n    primary: true\n  }), i18n.t('Update'));\n};\nUpdateButton.propTypes = {\n  onClick: PropTypes.func.isRequired\n};\nexport default UpdateButton;","import { useDispatch } from 'react-redux';\nimport { tSetCurrentFromUi } from '../../actions/current.js';\nconst UpdateVisualizationContainer = _ref => {\n  let {\n    renderComponent\n  } = _ref;\n  const dispatch = useDispatch();\n  const onClick = () => {\n    dispatch(tSetCurrentFromUi());\n  };\n  return renderComponent(onClick);\n};\nexport default UpdateVisualizationContainer;","import { getAvailableAxes, getAxisNameByLayoutType, getLayoutTypeByVisType } from '@dhis2/analytics';\nimport i18n from '@dhis2/d2-i18n';\nimport { SplitButton, FlyoutMenu, MenuItem, Button } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { acAddUiLayoutDimensions } from '../../../actions/ui.js';\nimport { sGetUiActiveModalDialog, sGetUiType } from '../../../reducers/ui.js';\nconst AddToLayoutButton = _ref => {\n  let {\n    dialogId,\n    visType,\n    onAddDimension,\n    onClick,\n    dataTest\n  } = _ref;\n  const availableAxes = getAvailableAxes(visType);\n  const AddToLayoutButton = availableAxes.length > 1 ? SplitButton : Button;\n  const clickHandler = axisId => {\n    onAddDimension({\n      [dialogId]: {\n        axisId\n      }\n    });\n    onClick();\n  };\n  const renderMenu = () => /*#__PURE__*/React.createElement(FlyoutMenu, {\n    maxWidth: \"380px\",\n    dataTest: `${dataTest}-flyout-menu`\n  }, getAvailableAxes(visType).slice(1).map(axis => /*#__PURE__*/React.createElement(MenuItem, {\n    key: axis,\n    dataTest: `${dataTest}-flyout-menu-option-${axis}`,\n    onClick: () => clickHandler(axis),\n    label: i18n.t(`Add to {{axisName}}`, {\n      axisName: getAxisNameByLayoutType(axis, getLayoutTypeByVisType(visType))\n    })\n  })));\n  return /*#__PURE__*/React.createElement(AddToLayoutButton, {\n    component: availableAxes.length > 1 ? renderMenu() : null,\n    onClick: () => clickHandler(availableAxes[0]),\n    dataTest: dataTest\n  }, i18n.t(`Add to {{axisName}}`, {\n    axisName: getAxisNameByLayoutType(availableAxes[0], getLayoutTypeByVisType(visType))\n  }));\n};\nAddToLayoutButton.propTypes = {\n  dialogId: PropTypes.string.isRequired,\n  visType: PropTypes.string.isRequired,\n  onAddDimension: PropTypes.func.isRequired,\n  onClick: PropTypes.func.isRequired,\n  dataTest: PropTypes.string\n};\nconst mapStateToProps = state => ({\n  visType: sGetUiType(state),\n  dialogId: sGetUiActiveModalDialog(state)\n});\nexport default connect(mapStateToProps, {\n  onAddDimension: acAddUiLayoutDimensions\n})(AddToLayoutButton);","// extracted by mini-css-extract-plugin\nexport default {\"modalContent\":\"DimensionModal_modalContent__I8Ac1\"};","import i18n from '@dhis2/d2-i18n';\nimport { Modal, ModalContent, ModalActions, ButtonStrip, ModalTitle, Button } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport UpdateButton from '../UpdateButton/UpdateButton.js';\nimport UpdateVisualizationContainer from '../UpdateButton/UpdateVisualizationContainer.js';\nimport AddToLayoutButton from './AddToLayoutButton/AddToLayoutButton.js';\nimport classes from './styles/DimensionModal.module.css';\nconst DimensionModal = _ref => {\n  let {\n    children,\n    dataTest,\n    isInLayout,\n    onClose,\n    title\n  } = _ref;\n  const onClick = handler => {\n    onClose();\n    handler();\n  };\n  return /*#__PURE__*/React.createElement(Modal, {\n    onClose: onClose,\n    dataTest: `${dataTest}`,\n    position: \"top\",\n    large: true\n  }, /*#__PURE__*/React.createElement(ModalTitle, {\n    dataTest: `${dataTest}-title`\n  }, title), /*#__PURE__*/React.createElement(ModalContent, {\n    dataTest: `${dataTest}-content`,\n    className: classes.modalContent\n  }, children), /*#__PURE__*/React.createElement(ModalActions, {\n    dataTest: `${dataTest}-actions`\n  }, /*#__PURE__*/React.createElement(ButtonStrip, null, /*#__PURE__*/React.createElement(Button, {\n    type: \"button\",\n    secondary: true,\n    onClick: onClose,\n    dataTest: `${dataTest}-action-cancel`\n  }, i18n.t('Hide')), isInLayout ? /*#__PURE__*/React.createElement(UpdateVisualizationContainer, {\n    renderComponent: handler => /*#__PURE__*/React.createElement(UpdateButton, {\n      onClick: () => onClick(handler),\n      dataTest: `${dataTest}-action-confirm`\n    })\n  }) : /*#__PURE__*/React.createElement(AddToLayoutButton, {\n    onClick: onClose,\n    dataTest: `${dataTest}-action-confirm`\n  }))));\n};\nDimensionModal.propTypes = {\n  onClose: PropTypes.func.isRequired,\n  children: PropTypes.node,\n  dataTest: PropTypes.string,\n  isInLayout: PropTypes.bool,\n  title: PropTypes.node\n};\nexport default DimensionModal;","// extracted by mini-css-extract-plugin\nexport default {\"transferEmptyList\":\"Common_transferEmptyList__3Pt2M\",\"transferRightHeader\":\"Common_transferRightHeader__qQHWB\",\"transferLeftHeader\":\"Common_transferLeftHeader__+n1df\",\"transferLeftTitle\":\"Common_transferLeftTitle__ukbcS\",\"paragraph\":\"Common_paragraph__-vVQa\",\"mainSection\":\"Common_mainSection__AC1+T\",\"verticalCheckbox\":\"Common_verticalCheckbox__OV0Gy\"};","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"Condition_container__BaIZO\",\"caseSensitiveCheckbox\":\"Condition_caseSensitiveCheckbox__V7Q3e\",\"checkboxOption\":\"Condition_checkboxOption__CPojx\",\"legendSelect\":\"Condition_legendSelect__dEeTB\",\"textInput\":\"Condition_textInput__qRBTT\",\"legendSetSelect\":\"Condition_legendSetSelect__PhjE1\",\"removeButton\":\"Condition_removeButton__9sHpH\",\"operatorSelect\":\"Condition_operatorSelect__tL+MN\",\"dateInput\":\"Condition_dateInput__D3jO0\",\"numericInput\":\"Condition_numericInput__b13+a\",\"phoneNumberInput\":\"Condition_phoneNumberInput__I975F\",\"letterInput\":\"Condition_letterInput__Jqjku\"};","function _extends() { return _extends = Object.assign ? Object.assign.bind() : function (n) { for (var e = 1; e < arguments.length; e++) { var t = arguments[e]; for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]); } return n; }, _extends.apply(null, arguments); }\nimport i18n from '@dhis2/d2-i18n';\nimport { SingleSelectField, SingleSelectOption, Button, Input, Checkbox } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React, { useEffect } from 'react';\nimport { NULL_VALUE, CASE_INSENSITIVE_PREFIX, OPERATOR_NOT_EMPTY, OPERATOR_EMPTY, addCaseSensitivePrefix, removeCaseSensitivePrefix, checkIsCaseSensitive, getAlphaNumericOperators } from '../../../modules/conditions.js';\nimport classes from './styles/Condition.module.css';\nconst BaseCondition = _ref => {\n  let {\n    condition,\n    onChange,\n    onRemove,\n    allowCaseSensitive,\n    valueClassName\n  } = _ref;\n  let operator, value, isCaseSensitive;\n  useEffect(() => {\n    if (!(condition !== null && condition !== void 0 && condition.length)) {\n      onChange(`${CASE_INSENSITIVE_PREFIX}:`);\n    }\n  }, [condition]);\n  if (condition.includes(NULL_VALUE)) {\n    operator = condition;\n  } else {\n    const parts = condition.split(':');\n    isCaseSensitive = checkIsCaseSensitive(parts[0]);\n    operator = removeCaseSensitivePrefix(parts[0]);\n    value = parts[1];\n  }\n  const setOperator = input => {\n    if (input.includes(NULL_VALUE)) {\n      onChange(`${input}`);\n    } else {\n      onChange(`${addCaseSensitivePrefix(input, isCaseSensitive)}:${value || ''}`);\n    }\n  };\n  const setValue = input => {\n    onChange(`${addCaseSensitivePrefix(operator, isCaseSensitive)}:${input || ''}`);\n  };\n  const toggleCaseSensitive = cs => {\n    onChange(`${addCaseSensitivePrefix(operator, cs)}:${value || ''}`);\n  };\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.container,\n    \"data-test\": 'alphanumeric-condition'\n  }, /*#__PURE__*/React.createElement(SingleSelectField, {\n    selected: operator,\n    placeholder: i18n.t('Choose a condition type'),\n    dense: true,\n    onChange: _ref2 => {\n      let {\n        selected\n      } = _ref2;\n      return setOperator(selected);\n    },\n    className: classes.operatorSelect\n  }, Object.entries(getAlphaNumericOperators()).map(_ref3 => {\n    let [key, value] = _ref3;\n    return /*#__PURE__*/React.createElement(SingleSelectOption, {\n      key: key,\n      value: key,\n      label: value,\n      dataTest: \"alphanumeric-condition-type\"\n    });\n  })), operator && !operator.includes(NULL_VALUE) && /*#__PURE__*/React.createElement(Input, {\n    value: value,\n    type: \"text\",\n    onChange: _ref4 => {\n      let {\n        value\n      } = _ref4;\n      return setValue(value);\n    },\n    className: valueClassName || classes.textInput,\n    dense: true\n  }), allowCaseSensitive && ![OPERATOR_EMPTY, OPERATOR_NOT_EMPTY].includes(operator) && /*#__PURE__*/React.createElement(Checkbox, {\n    checked: isCaseSensitive,\n    label: i18n.t('Case sensitive'),\n    onChange: _ref5 => {\n      let {\n        checked\n      } = _ref5;\n      return toggleCaseSensitive(checked);\n    },\n    dense: true,\n    className: classes.caseSensitiveCheckbox,\n    dataTest: \"condition-case-sensitive-checkbox\"\n  }), /*#__PURE__*/React.createElement(Button, {\n    type: \"button\",\n    small: true,\n    secondary: true,\n    onClick: onRemove,\n    className: classes.removeButton\n  }, i18n.t('Remove')));\n};\nBaseCondition.propTypes = {\n  condition: PropTypes.string.isRequired,\n  onChange: PropTypes.func.isRequired,\n  onRemove: PropTypes.func.isRequired,\n  allowCaseSensitive: PropTypes.bool,\n  valueClassName: PropTypes.object\n};\nexport const PhoneNumberCondition = props => /*#__PURE__*/React.createElement(BaseCondition, _extends({\n  valueClassName: classes.phoneNumberInput\n}, props));\nexport const LetterCondition = props => /*#__PURE__*/React.createElement(BaseCondition, _extends({\n  valueClassName: classes.letterInput,\n  allowCaseSensitive: true\n}, props));\nexport const CaseSensitiveAlphanumericCondition = props => /*#__PURE__*/React.createElement(BaseCondition, _extends({\n  allowCaseSensitive: true\n}, props));","function _extends() { return _extends = Object.assign ? Object.assign.bind() : function (n) { for (var e = 1; e < arguments.length; e++) { var t = arguments[e]; for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]); } return n; }, _extends.apply(null, arguments); }\nimport { Checkbox } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { OPERATOR_IN, NULL_VALUE, TRUE_VALUE, FALSE_VALUE, getBooleanValues } from '../../../modules/conditions.js';\nimport classes from './styles/Condition.module.css';\nconst BaseCondition = _ref => {\n  let {\n    condition,\n    onChange,\n    showFalseOption\n  } = _ref;\n  const parts = condition.split(':');\n  const values = parts[1] || '';\n  const booleanValues = getBooleanValues();\n  const onCheckboxChange = (input, checked) => {\n    const currentValues = values.length ? values.split(';') : [];\n    if (checked) {\n      setValues([...currentValues, input].join(';'));\n    } else {\n      setValues(currentValues.filter(v => v !== input).join(';'));\n    }\n  };\n  const setValues = input => {\n    onChange(`${OPERATOR_IN}:${input || ''}`);\n  };\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.container\n  }, /*#__PURE__*/React.createElement(Checkbox, {\n    checked: values.includes(TRUE_VALUE),\n    label: booleanValues[TRUE_VALUE],\n    onChange: _ref2 => {\n      let {\n        checked\n      } = _ref2;\n      return onCheckboxChange(TRUE_VALUE, checked);\n    },\n    dense: true,\n    className: classes.checkboxOption\n  }), showFalseOption && /*#__PURE__*/React.createElement(Checkbox, {\n    checked: values.includes(FALSE_VALUE),\n    label: booleanValues[FALSE_VALUE],\n    onChange: _ref3 => {\n      let {\n        checked\n      } = _ref3;\n      return onCheckboxChange(FALSE_VALUE, checked);\n    },\n    dense: true,\n    className: classes.checkboxOption\n  }), /*#__PURE__*/React.createElement(Checkbox, {\n    checked: values.includes(NULL_VALUE),\n    label: booleanValues[NULL_VALUE],\n    onChange: _ref4 => {\n      let {\n        checked\n      } = _ref4;\n      return onCheckboxChange(NULL_VALUE, checked);\n    },\n    dense: true,\n    className: classes.checkboxOption\n  }));\n};\nBaseCondition.propTypes = {\n  condition: PropTypes.string.isRequired,\n  onChange: PropTypes.func.isRequired,\n  showFalseOption: PropTypes.bool\n};\nexport const BooleanCondition = props => /*#__PURE__*/React.createElement(BaseCondition, _extends({\n  showFalseOption: true\n}, props));\nexport const TrueOnlyCondition = props => /*#__PURE__*/React.createElement(BaseCondition, props);","function _extends() { return _extends = Object.assign ? Object.assign.bind() : function (n) { for (var e = 1; e < arguments.length; e++) { var t = arguments[e]; for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]); } return n; }, _extends.apply(null, arguments); }\nimport i18n from '@dhis2/d2-i18n';\nimport { SingleSelectField, SingleSelectOption, Button, Input } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { NULL_VALUE, UI_TIME_DIVIDER, API_TIME_DIVIDER, getDateOperators } from '../../../modules/conditions.js';\nimport classes from './styles/Condition.module.css';\nconst TYPE_DATE = 'date';\nconst TYPE_DATETIME = 'datetime-local';\nconst TYPE_TIME = 'time';\nconst BaseCondition = _ref => {\n  var _value;\n  let {\n    condition,\n    onChange,\n    onRemove,\n    type,\n    max\n  } = _ref;\n  let operator, value;\n  if (condition.includes(NULL_VALUE)) {\n    operator = condition;\n  } else {\n    const parts = condition.split(':');\n    operator = parts[0];\n    value = parts[1];\n  }\n  const setOperator = input => {\n    if (input.includes(NULL_VALUE)) {\n      onChange(`${input}`);\n    } else {\n      onChange(`${input}:${value || ''}`);\n    }\n  };\n  const setValue = input => {\n    onChange(`${operator}:${(input === null || input === void 0 ? void 0 : input.replaceAll(UI_TIME_DIVIDER, API_TIME_DIVIDER)) || ''}`);\n  };\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.container\n  }, /*#__PURE__*/React.createElement(SingleSelectField, {\n    selected: operator,\n    placeholder: i18n.t('Choose a condition type'),\n    dense: true,\n    onChange: _ref2 => {\n      let {\n        selected\n      } = _ref2;\n      return setOperator(selected);\n    },\n    className: classes.operatorSelect\n  }, Object.entries(getDateOperators()).map(_ref3 => {\n    let [key, value] = _ref3;\n    return /*#__PURE__*/React.createElement(SingleSelectOption, {\n      key: key,\n      value: key,\n      label: value,\n      dataTest: \"date-condition-type\"\n    });\n  })), operator && !operator.includes(NULL_VALUE) && /*#__PURE__*/React.createElement(Input, {\n    value: (_value = value) === null || _value === void 0 ? void 0 : _value.replaceAll(API_TIME_DIVIDER, UI_TIME_DIVIDER),\n    type: type,\n    onChange: _ref4 => {\n      let {\n        value\n      } = _ref4;\n      return setValue(value);\n    },\n    className: classes.dateInput,\n    max: max,\n    dense: true\n  }), /*#__PURE__*/React.createElement(Button, {\n    type: \"button\",\n    small: true,\n    secondary: true,\n    onClick: onRemove,\n    className: classes.removeButton\n  }, i18n.t('Remove')));\n};\nBaseCondition.propTypes = {\n  condition: PropTypes.string.isRequired,\n  type: PropTypes.string.isRequired,\n  onChange: PropTypes.func.isRequired,\n  onRemove: PropTypes.func.isRequired,\n  max: PropTypes.string\n};\nexport const DateCondition = props => /*#__PURE__*/React.createElement(BaseCondition, _extends({\n  type: TYPE_DATE,\n  max: \"9999-12-31\"\n}, props));\nexport const DateTimeCondition = props => /*#__PURE__*/React.createElement(BaseCondition, _extends({\n  type: TYPE_DATETIME,\n  max: \"9999-12-31T23:59:59\"\n}, props));\nexport const TimeCondition = props => /*#__PURE__*/React.createElement(BaseCondition, _extends({\n  type: TYPE_TIME\n}, props));","import { DIMENSION_TYPE_DATA_ELEMENT, DIMENSION_TYPE_PROGRAM_ATTRIBUTE, DIMENSION_TYPE_PROGRAM_INDICATOR } from '@dhis2/analytics';\nimport { extractDimensionIdParts } from '../modules/dimensionId.js';\nconst dataElementsQuery = {\n  resource: 'dataElements',\n  id: _ref => {\n    let {\n      id\n    } = _ref;\n    return id;\n  },\n  params: {\n    fields: 'legendSets[id,name]'\n  }\n};\nconst trackedEntityAttributesQuery = {\n  resource: 'trackedEntityAttributes',\n  id: _ref2 => {\n    let {\n      id\n    } = _ref2;\n    return id;\n  },\n  params: {\n    fields: 'legendSets[id,name]'\n  }\n};\nconst programIndicatorsQuery = {\n  resource: 'programIndicators',\n  id: _ref3 => {\n    let {\n      id\n    } = _ref3;\n    return id;\n  },\n  params: {\n    fields: 'legendSets[id,name]'\n  }\n};\nconst legendSetQuery = {\n  resource: 'legendSets',\n  id: _ref4 => {\n    let {\n      id\n    } = _ref4;\n    return id;\n  },\n  params: {\n    fields: ['id', 'displayName~rename(name)', 'legends[id,displayName~rename(name),startValue,endValue]'],\n    paging: 'false'\n  }\n};\nexport const apiFetchLegendSetById = async _ref5 => {\n  let {\n    dataEngine,\n    id\n  } = _ref5;\n  const response = await dataEngine.query({\n    legendSet: legendSetQuery\n  }, {\n    variables: {\n      id\n    },\n    onError: error => console.log('Error: ', error)\n  });\n  return response.legendSet;\n};\nexport const apiFetchLegendSetsByDimension = async _ref6 => {\n  let {\n    dataEngine,\n    dimensionId,\n    dimensionType\n  } = _ref6;\n  let query;\n  switch (dimensionType) {\n    case DIMENSION_TYPE_DATA_ELEMENT:\n      query = dataElementsQuery;\n      break;\n    case DIMENSION_TYPE_PROGRAM_ATTRIBUTE:\n      query = trackedEntityAttributesQuery;\n      break;\n    case DIMENSION_TYPE_PROGRAM_INDICATOR:\n      query = programIndicatorsQuery;\n      break;\n    default:\n      throw new Error(`${dimensionType} is not a valid dimension type`);\n  }\n  const {\n    dimensionId: id\n  } = extractDimensionIdParts(dimensionId);\n  const response = await dataEngine.query({\n    legendSets: query\n  }, {\n    variables: {\n      id\n    },\n    onError: error => console.log('Error: ', error)\n  });\n  return response.legendSets.legendSets;\n};","import { useDataEngine } from '@dhis2/app-runtime';\nimport i18n from '@dhis2/d2-i18n';\nimport { SingleSelectField, SingleSelectOption, Button, Input, MultiSelectField, MultiSelectOption, MenuDivider } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React, { useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { acAddMetadata } from '../../../actions/metadata.js';\nimport { apiFetchLegendSetById, apiFetchLegendSetsByDimension } from '../../../api/legendSets.js';\nimport { getNumericOperators, OPERATOR_IN } from '../../../modules/conditions.js';\nimport { sGetMetadataById } from '../../../reducers/metadata.js';\nimport classes from './styles/Condition.module.css';\nconst NULL_VALUE = 'NV';\nconst NumericCondition = _ref => {\n  var _legendSet$legends, _value, _legendSet$legends2;\n  let {\n    condition,\n    onChange,\n    onRemove,\n    legendSetId,\n    numberOfConditions,\n    onLegendSetChange,\n    enableDecimalSteps,\n    dimension,\n    allowIntegerOnly\n  } = _ref;\n  let operator, value;\n  const dispatch = useDispatch();\n  const availableLegendSets = useSelector(state => {\n    var _sGetMetadataById;\n    return (_sGetMetadataById = sGetMetadataById(state, dimension.id)) === null || _sGetMetadataById === void 0 ? void 0 : _sGetMetadataById.legendSets;\n  });\n  const setAvailableLegendSets = legendSets => dispatch(acAddMetadata({\n    [dimension.id]: {\n      legendSets\n    }\n  }));\n  const legendSet = useSelector(state => sGetMetadataById(state, legendSetId));\n  const setLegendSet = input => dispatch(acAddMetadata({\n    [input.id]: input\n  }));\n  const dataEngine = useDataEngine();\n  const fetchLegendSets = async () => {\n    const result = await apiFetchLegendSetsByDimension({\n      dataEngine,\n      dimensionId: dimension.id,\n      dimensionType: dimension.dimensionType\n    });\n    setAvailableLegendSets(result);\n  };\n  useEffect(() => {\n    if (operator === OPERATOR_IN && !availableLegendSets) {\n      fetchLegendSets();\n    }\n  }, []);\n  if (condition.includes(NULL_VALUE)) {\n    operator = condition;\n  } else if (legendSetId && !condition) {\n    operator = OPERATOR_IN;\n  } else {\n    const parts = condition.split(':');\n    operator = parts[0];\n    value = parts[1];\n  }\n  const onOperatorChange = input => {\n    if (input === OPERATOR_IN && !availableLegendSets) {\n      fetchLegendSets();\n    }\n    setOperator(input);\n  };\n  const setOperator = input => {\n    if (input.includes(NULL_VALUE)) {\n      onChange(`${input}`);\n    } else if (input === OPERATOR_IN || operator === OPERATOR_IN) {\n      onChange(`${input}:`);\n    } else {\n      onChange(`${input}:${value || ''}`);\n    }\n    if (!input.includes(OPERATOR_IN) && legendSetId) {\n      onLegendSetChange();\n    }\n  };\n  useEffect(() => {\n    const fetchLegendSet = async () => {\n      const result = await apiFetchLegendSetById({\n        dataEngine,\n        id: legendSetId\n      });\n      setLegendSet(result);\n    };\n    if (legendSetId && !legendSet) {\n      fetchLegendSet();\n    }\n  }, [legendSetId]);\n  const setValue = input => onChange(`${operator}:${input || input === 0 ? input : ''}`);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.container\n  }, /*#__PURE__*/React.createElement(SingleSelectField, {\n    selected: operator,\n    placeholder: i18n.t('Choose a condition type'),\n    dense: true,\n    onChange: _ref2 => {\n      let {\n        selected\n      } = _ref2;\n      return onOperatorChange(selected);\n    },\n    className: classes.operatorSelect\n  }, Object.entries(getNumericOperators()).map(_ref3 => {\n    let [key, value] = _ref3;\n    return /*#__PURE__*/React.createElement(SingleSelectOption, {\n      key: key,\n      value: key,\n      label: value,\n      dataTest: \"numeric-condition-type\"\n    });\n  }), /*#__PURE__*/React.createElement(MenuDivider, {\n    dense: true\n  }), /*#__PURE__*/React.createElement(SingleSelectOption, {\n    key: OPERATOR_IN,\n    value: OPERATOR_IN,\n    label: i18n.t('is one of preset options'),\n    disabled: numberOfConditions > 1,\n    dataTest: \"numeric-condition-type\"\n  })), operator && !operator.includes(NULL_VALUE) && operator !== OPERATOR_IN && /*#__PURE__*/React.createElement(Input, {\n    value: value,\n    type: \"number\",\n    onChange: _ref4 => {\n      let {\n        value\n      } = _ref4;\n      return setValue(allowIntegerOnly ? parseInt(value, 10) : value);\n    },\n    className: classes.numericInput,\n    dense: true,\n    step: enableDecimalSteps ? '0.1' : '1'\n  }), operator === OPERATOR_IN && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(SingleSelectField, {\n    selected: availableLegendSets && legendSetId,\n    className: classes.legendSetSelect,\n    placeholder: !availableLegendSets ? i18n.t('Loading...') : i18n.t('Choose a set of options'),\n    dense: true,\n    onChange: _ref5 => {\n      let {\n        selected\n      } = _ref5;\n      onLegendSetChange(selected);\n      setValue(null);\n    },\n    loading: !availableLegendSets,\n    empty: i18n.t('No preset option sets for this data item')\n  }, availableLegendSets === null || availableLegendSets === void 0 ? void 0 : availableLegendSets.map(item => /*#__PURE__*/React.createElement(SingleSelectOption, {\n    key: item.id,\n    value: item.id,\n    label: item.name\n  }))), legendSetId && /*#__PURE__*/React.createElement(MultiSelectField, {\n    placeholder: !legendSet ? i18n.t('Loading...') : i18n.t('Choose options'),\n    onChange: _ref6 => {\n      let {\n        selected\n      } = _ref6;\n      return setValue(selected.join(';'));\n    },\n    className: classes.legendSelect,\n    selected: (legendSet === null || legendSet === void 0 ? void 0 : (_legendSet$legends = legendSet.legends) === null || _legendSet$legends === void 0 ? void 0 : _legendSet$legends.length) && ((_value = value) === null || _value === void 0 ? void 0 : _value.length) && value.split(';') || [],\n    dense: true,\n    loading: !legendSet\n  }, (legendSet === null || legendSet === void 0 ? void 0 : (_legendSet$legends2 = legendSet.legends) === null || _legendSet$legends2 === void 0 ? void 0 : _legendSet$legends2.length) && legendSet.legends.sort((a, b) => a.startValue - b.startValue).map(legend => /*#__PURE__*/React.createElement(MultiSelectOption, {\n    key: legend.id,\n    value: legend.id,\n    label: legend.name\n  })))), /*#__PURE__*/React.createElement(Button, {\n    type: \"button\",\n    small: true,\n    secondary: true,\n    onClick: onRemove,\n    className: classes.removeButton\n  }, i18n.t('Remove')));\n};\nNumericCondition.propTypes = {\n  condition: PropTypes.string.isRequired,\n  numberOfConditions: PropTypes.number.isRequired,\n  onChange: PropTypes.func.isRequired,\n  onLegendSetChange: PropTypes.func.isRequired,\n  onRemove: PropTypes.func.isRequired,\n  allowIntegerOnly: PropTypes.bool,\n  dimension: PropTypes.shape({\n    dimensionType: PropTypes.string,\n    id: PropTypes.string\n  }),\n  enableDecimalSteps: PropTypes.bool,\n  legendSetId: PropTypes.string\n};\nexport default NumericCondition;","const optionsQuery = {\n  resource: 'options',\n  params: _ref => {\n    let {\n      optionSetId,\n      searchTerm,\n      page\n    } = _ref;\n    const filters = [`optionSet.id:eq:${optionSetId}`];\n    if (searchTerm) {\n      filters.push(`displayName:ilike:${searchTerm}`);\n    }\n    return {\n      fields: 'code,displayName~rename(name),id',\n      filter: filters,\n      paging: true,\n      page\n    };\n  }\n};\nexport const apiFetchOptions = async _ref2 => {\n  let {\n    dataEngine,\n    searchTerm,\n    optionSetId,\n    page\n  } = _ref2;\n  const optionsData = await dataEngine.query({\n    options: optionsQuery\n  }, {\n    variables: {\n      searchTerm,\n      optionSetId,\n      page\n    },\n    onError: error => console.log('Error: ', error)\n  });\n  const response = optionsData.options;\n  return {\n    options: response.options,\n    nextPage: response.pager.nextPage ? response.pager.page + 1 : null\n  };\n};","import { useState, useEffect, useRef } from 'react';\nconst DEFAULT_USER_INPUT_DELAY = 500;\nexport const debounceEventHandler = function (callback) {\n  let delay = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 150;\n  let timer = null;\n  return event => {\n    if (timer) {\n      clearTimeout(timer);\n    }\n    timer = setTimeout(callback, delay, event);\n  };\n};\nexport const useDebounce = function (value) {\n  let delay = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : DEFAULT_USER_INPUT_DELAY;\n  const [debouncedValue, setDebouncedValue] = useState(value);\n  useEffect(() => {\n    const handler = setTimeout(() => {\n      setDebouncedValue(value);\n    }, delay);\n    return () => {\n      clearTimeout(handler);\n    };\n  }, [value, delay]);\n  return debouncedValue;\n};\nexport const useDidUpdateEffect = (fn, inputs) => {\n  const didMountRef = useRef(false);\n  useEffect(() => {\n    if (didMountRef.current) {\n      fn();\n    } else {\n      didMountRef.current = true;\n    }\n  }, inputs);\n};","import i18n from '@dhis2/d2-i18n';\nimport React from 'react';\nimport classes from '../styles/Common.module.css';\nexport const TransferEmptySelection = () => /*#__PURE__*/React.createElement(\"p\", {\n  className: classes.transferEmptyList\n}, i18n.t('No items selected'));","import i18n from '@dhis2/d2-i18n';\nimport { InputField } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport classes from '../styles/Common.module.css';\nexport const TransferLeftHeader = _ref => {\n  let {\n    searchTerm,\n    setSearchTerm,\n    dataTest\n  } = _ref;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.transferLeftHeader\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: classes.transferLeftTitle\n  }, i18n.t('Available options')), /*#__PURE__*/React.createElement(InputField, {\n    value: searchTerm,\n    onChange: _ref2 => {\n      let {\n        value\n      } = _ref2;\n      return setSearchTerm(value);\n    },\n    placeholder: i18n.t('Filter options'),\n    dataTest: `${dataTest}-filter-input-field`,\n    dense: true,\n    initialFocus: true,\n    type: \"search\"\n  }));\n};\nTransferLeftHeader.propTypes = {\n  dataTest: PropTypes.string,\n  searchTerm: PropTypes.string,\n  setSearchTerm: PropTypes.func\n};","import i18n from '@dhis2/d2-i18n';\nimport React from 'react';\nimport classes from '../styles/Common.module.css';\nexport const TransferRightHeader = () => /*#__PURE__*/React.createElement(\"p\", {\n  className: classes.transferRightHeader\n}, i18n.t('Selected options'));","import i18n from '@dhis2/d2-i18n';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport classes from '../styles/Common.module.css';\nexport const TransferSourceEmptyPlaceholder = _ref => {\n  let {\n    loading,\n    searchTerm,\n    options,\n    dataTest\n  } = _ref;\n  return !loading && !options.length && /*#__PURE__*/React.createElement(\"p\", {\n    className: classes.transferEmptyList,\n    \"data-test\": dataTest\n  }, searchTerm ? i18n.t('Nothing found for \"{{- searchTerm}}\"', {\n    searchTerm: searchTerm\n  }) : i18n.t('No options'));\n};\nTransferSourceEmptyPlaceholder.propTypes = {\n  dataTest: PropTypes.string,\n  loading: PropTypes.bool,\n  options: PropTypes.array,\n  searchTerm: PropTypes.string\n};","export const TRANSFER_OPTIONS_WIDTH = '359px';\nexport const TRANSFER_SELECTED_WIDTH = '359px';\nexport const TRANSFER_HEIGHT = '512px';","function _extends() { return _extends = Object.assign ? Object.assign.bind() : function (n) { for (var e = 1; e < arguments.length; e++) { var t = arguments[e]; for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]); } return n; }, _extends.apply(null, arguments); }\nimport { useDataEngine } from '@dhis2/app-runtime';\nimport { Transfer, TransferOption } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React, { useState } from 'react';\nimport { connect } from 'react-redux';\nimport { acAddMetadata } from '../../../actions/metadata.js';\nimport { apiFetchOptions } from '../../../api/options.js';\nimport { OPERATOR_IN } from '../../../modules/conditions.js';\nimport { useDebounce, useDidUpdateEffect } from '../../../modules/utils.js';\nimport { sGetMetadata } from '../../../reducers/metadata.js';\nimport { TransferEmptySelection } from '../common/TransferEmptySelection.js';\nimport { TransferLeftHeader } from '../common/TransferLeftHeader.js';\nimport { TransferRightHeader } from '../common/TransferRightHeader.js';\nimport { TransferSourceEmptyPlaceholder } from '../common/TransferSourceEmptyPlaceholder.js';\nimport { TRANSFER_HEIGHT, TRANSFER_OPTIONS_WIDTH, TRANSFER_SELECTED_WIDTH } from '../utils.js';\nconst OptionSetCondition = _ref => {\n  var _parts$;\n  let {\n    condition,\n    optionSetId,\n    onChange,\n    metadata,\n    addMetadata\n  } = _ref;\n  const parts = condition.split(':');\n  const values = (_parts$ = parts[1]) !== null && _parts$ !== void 0 && _parts$.length ? parts[1].split(';') : [];\n  const selectedOptions = values.map(code => {\n    var _Object$values$find;\n    return {\n      code,\n      name: ((_Object$values$find = Object.values(metadata).find(item => item.code === code)) === null || _Object$values$find === void 0 ? void 0 : _Object$values$find.name) || code\n    };\n  });\n  const dataTest = 'option-set';\n  const setValues = selected => {\n    addMetadata({\n      // update options in the optionSet metadata used for the lookup of the correct\n      // name from code (options for different option sets have the same code)\n      [optionSetId]: {\n        ...metadata[optionSetId],\n        options: selected.map(soCode => state.options.find(_ref2 => {\n          let {\n            code\n          } = _ref2;\n          return code === soCode;\n        }))\n      }\n    });\n    onChange(`${OPERATOR_IN}:${selected.join(';') || ''}`);\n  };\n  const [state, setState] = useState({\n    searchTerm: '',\n    options: [],\n    loading: true,\n    nextPage: 1\n  });\n  const dataEngine = useDataEngine();\n  const setSearchTerm = searchTerm => setState(state => ({\n    ...state,\n    searchTerm\n  }));\n  const debouncedSearchTerm = useDebounce(state.searchTerm);\n  const fetchItems = async page => {\n    var _result$options;\n    setState(state => ({\n      ...state,\n      loading: true\n    }));\n    const result = await apiFetchOptions({\n      dataEngine,\n      page,\n      optionSetId,\n      searchTerm: state.searchTerm\n    });\n    const newOptions = [];\n    (_result$options = result.options) === null || _result$options === void 0 ? void 0 : _result$options.forEach(item => {\n      newOptions.push({\n        name: item.name,\n        code: item.code,\n        id: item.id\n      });\n    });\n    setState(state => ({\n      ...state,\n      loading: false,\n      options: page > 1 ? [...state.options, ...newOptions] : newOptions,\n      nextPage: result.nextPage\n    }));\n    /*  The following handles a very specific edge-case where the user can select all items from a \n        page and then reopen the modal. Usually Transfer triggers the onEndReached when the end of \n        the page is reached (scrolling down) or if too few items are on the left side (e.g. selecting \n        49 items from page 1, leaving only 1 item on the left side). However, due to the way Transfer \n        works, if 0 items are available, more items are fetched, but all items are already selected \n        (leaving 0 items on the left side still), the onReachedEnd won't trigger. Hence the code below:\n        IF there is a next page AND some options were just fetched AND you have the same or more\n        selected items than fetched items AND all fetched items are already selected -> fetch more!\n    */\n    if (result.nextPage && newOptions.length && selectedOptions.length >= newOptions.length && newOptions.every(newOption => selectedOptions.find(selectedItem => selectedItem.code === newOption.code))) {\n      fetchItems(result.nextPage);\n    }\n  };\n  useDidUpdateEffect(() => {\n    setState(state => ({\n      ...state,\n      loading: true,\n      nextPage: 1\n    }));\n    fetchItems(1);\n  }, [debouncedSearchTerm, state.filter]);\n  const onEndReached = () => {\n    if (state.nextPage) {\n      fetchItems(state.nextPage);\n    }\n  };\n  return /*#__PURE__*/React.createElement(Transfer, {\n    onChange: _ref3 => {\n      let {\n        selected\n      } = _ref3;\n      return setValues(selected);\n    },\n    selected: selectedOptions.map(option => option.code),\n    options: [...state.options, ...selectedOptions].map(option => ({\n      value: option.code,\n      label: option.name\n    })),\n    loading: state.loading,\n    loadingPicked: state.loading,\n    sourceEmptyPlaceholder: /*#__PURE__*/React.createElement(TransferSourceEmptyPlaceholder, {\n      loading: state.loading,\n      searchTerm: debouncedSearchTerm,\n      options: state.options,\n      dataTest: `${dataTest}-empty-source`\n    }),\n    onEndReached: onEndReached,\n    leftHeader: /*#__PURE__*/React.createElement(TransferLeftHeader, {\n      searchTerm: state.searchTerm,\n      setSearchTerm: setSearchTerm,\n      dataTest: `${dataTest}-left-header`\n    }),\n    height: TRANSFER_HEIGHT,\n    optionsWidth: TRANSFER_OPTIONS_WIDTH,\n    selectedWidth: TRANSFER_SELECTED_WIDTH,\n    selectedEmptyComponent: /*#__PURE__*/React.createElement(TransferEmptySelection, null),\n    rightHeader: /*#__PURE__*/React.createElement(TransferRightHeader, null),\n    renderOption: props => /*#__PURE__*/React.createElement(TransferOption, _extends({}, props, {\n      dataTest: `${dataTest}-transfer-option`\n    })),\n    dataTest: `${dataTest}-transfer`\n  });\n};\nOptionSetCondition.propTypes = {\n  addMetadata: PropTypes.func.isRequired,\n  condition: PropTypes.string.isRequired,\n  metadata: PropTypes.object.isRequired,\n  optionSetId: PropTypes.string.isRequired,\n  onChange: PropTypes.func.isRequired\n};\nconst mapStateToProps = state => ({\n  metadata: sGetMetadata(state)\n});\nexport default connect(mapStateToProps, {\n  addMetadata: acAddMetadata\n})(OptionSetCondition);","import { OrgUnitDimension, ouIdHelper, useCachedDataQuery } from '@dhis2/analytics';\nimport { useConfig } from '@dhis2/app-runtime';\nimport { OrganisationUnitTree } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React, { useCallback, useMemo } from 'react';\nimport { connect } from 'react-redux';\nimport { acAddMetadata } from '../../../actions/metadata.js';\nimport { acAddParentGraphMap } from '../../../actions/ui.js';\nimport { OPERATOR_EQUAL, OPERATOR_IN } from '../../../modules/conditions.js';\nimport { getOuPath, removeLastPathSegment } from '../../../modules/orgUnit.js';\nimport { DERIVED_USER_SETTINGS_DISPLAY_NAME_PROPERTY } from '../../../modules/userSettings.js';\nimport { sGetMetadata } from '../../../reducers/metadata.js';\nimport { sGetUiParentGraphMap } from '../../../reducers/ui.js';\n\n// VERSION-TOGGLE: remove when 42 is lowest supported version\nconst OrgUnitConditionMaxVersionV41 = _ref => {\n  var _parts$, _selected$path;\n  let {\n    addMetadata,\n    addParentGraphMap,\n    condition,\n    onChange,\n    metadata,\n    parentGraphMap\n  } = _ref;\n  const {\n    rootOrgUnits\n  } = useCachedDataQuery();\n  const parts = condition.split(':');\n  const value = ((_parts$ = parts[1]) === null || _parts$ === void 0 ? void 0 : _parts$.length) && parts[1];\n  const setValues = item => {\n    if (item.checked) {\n      const forMetadata = {};\n      const forParentGraphMap = {};\n      forMetadata[item.id] = {\n        id: item.id,\n        name: item.name || item.displayName,\n        displayName: item.displayName\n      };\n      if (item.path) {\n        const path = removeLastPathSegment(item.path);\n        forParentGraphMap[item.id] = path === `/${item.id}` ? '' : path.replace(/^\\//, '');\n      }\n      addMetadata(forMetadata);\n      addParentGraphMap(forParentGraphMap);\n      onChange(`${OPERATOR_EQUAL}:${item.id}`);\n    } else {\n      onChange('');\n    }\n  };\n  const selected = value ? {\n    id: value,\n    name: metadata[value].displayName || metadata[value].name,\n    path: getOuPath(value, metadata, parentGraphMap)\n  } : {};\n  const roots = rootOrgUnits.map(rootOrgUnit => rootOrgUnit.id);\n  return /*#__PURE__*/React.createElement(OrganisationUnitTree, {\n    roots: roots,\n    initiallyExpanded: [...(roots.length === 1 ? [`/${roots[0]}`] : []), selected === null || selected === void 0 ? void 0 : (_selected$path = selected.path) === null || _selected$path === void 0 ? void 0 : _selected$path.substring(0, selected.path.lastIndexOf('/'))].filter(path => path),\n    selected: selected.path && [selected.path],\n    onChange: item => setValues(item),\n    dataTest: \"org-unit-tree\",\n    singleSelection: true\n  });\n};\n\n// VERSION-TOGGLE: rename to OrgUnitCondition when 42 is lowest supported version\nconst OrgUnitConditionMinVersionV42 = _ref2 => {\n  let {\n    addMetadata,\n    addParentGraphMap,\n    condition,\n    onChange,\n    metadata,\n    parentGraphMap\n  } = _ref2;\n  const {\n    rootOrgUnits,\n    currentUser\n  } = useCachedDataQuery();\n  const selected = useMemo(() => {\n    var _condition$split$, _condition$split;\n    const idsString = (_condition$split$ = (_condition$split = condition.split(':')) === null || _condition$split === void 0 ? void 0 : _condition$split[1]) !== null && _condition$split$ !== void 0 ? _condition$split$ : '';\n    if (idsString.length === 0) {\n      return [];\n    }\n    return idsString.split(';').map(id => {\n      const isOuTreeItem = !ouIdHelper.hasLevelPrefix(id) && !ouIdHelper.hasGroupPrefix(id) && !id.startsWith('USER_ORGUNIT');\n      const metaDataId = ouIdHelper.removePrefix(id);\n      const item = {\n        id,\n        name: metadata[metaDataId].displayName || metadata[metaDataId].name\n      };\n      if (isOuTreeItem) {\n        item.path = getOuPath(id, metadata, parentGraphMap);\n      }\n      return item;\n    });\n  }, [condition, metadata, parentGraphMap]);\n  const onSelect = useCallback(_ref3 => {\n    let {\n      items\n    } = _ref3;\n    if (items.length === 0) {\n      onChange('');\n    } else {\n      const {\n        forMetadata,\n        forParentGraphMap,\n        itemIds\n      } = items.reduce((acc, item) => {\n        const metaDataId = ouIdHelper.removePrefix(item.id);\n        acc.itemIds.push(item.id);\n        acc.forMetadata[metaDataId] = {\n          id: metaDataId,\n          name: item.name || item.displayName,\n          displayName: item.displayName\n        };\n        if (item.path) {\n          const path = removeLastPathSegment(item.path);\n          acc.forParentGraphMap[item.id] = path === `/${item.id}` ? '' : path.replace(/^\\//, '');\n        }\n        return acc;\n      }, {\n        forMetadata: {},\n        forParentGraphMap: {},\n        itemIds: []\n      });\n      addMetadata(forMetadata);\n      addParentGraphMap(forParentGraphMap);\n      onChange(`${OPERATOR_IN}:${itemIds.join(';')}`);\n    }\n  }, [addMetadata, addParentGraphMap, onChange]);\n  const roots = rootOrgUnits.map(rootOrgUnit => rootOrgUnit.id);\n  return /*#__PURE__*/React.createElement(OrgUnitDimension, {\n    selected: selected,\n    roots: roots,\n    displayNameProp: currentUser.settings[DERIVED_USER_SETTINGS_DISPLAY_NAME_PROPERTY],\n    onSelect: onSelect\n  });\n};\n\n// VERSION-TOGGLE: remove when 42 is lowest supported version\nconst OrgUnitCondition = props => {\n  const config = useConfig();\n  return config.serverVersion.minor >= 42 ? /*#__PURE__*/React.createElement(OrgUnitConditionMinVersionV42, props) : /*#__PURE__*/React.createElement(OrgUnitConditionMaxVersionV41, props);\n};\nOrgUnitCondition.propTypes = {\n  condition: PropTypes.string.isRequired,\n  onChange: PropTypes.func.isRequired,\n  addMetadata: PropTypes.func,\n  addParentGraphMap: PropTypes.func,\n  metadata: PropTypes.object,\n  parentGraphMap: PropTypes.object\n};\nOrgUnitCondition.defaultProps = {\n  rootOrgUnits: []\n};\n\n// VERSION-TOGGLE: remove when 42 is lowest supported version\nOrgUnitConditionMaxVersionV41.propTypes = OrgUnitCondition.propTypes;\nOrgUnitConditionMinVersionV42.propTypes = OrgUnitCondition.propTypes;\nOrgUnitConditionMaxVersionV41.defaultProps = OrgUnitCondition.defaultProps;\nOrgUnitConditionMinVersionV42.defaultProps = OrgUnitCondition.defaultProps;\nconst mapStateToProps = state => ({\n  metadata: sGetMetadata(state),\n  parentGraphMap: sGetUiParentGraphMap(state)\n});\nexport default connect(mapStateToProps, {\n  addMetadata: acAddMetadata,\n  addParentGraphMap: acAddParentGraphMap\n})(OrgUnitCondition);","// extracted by mini-css-extract-plugin\nexport default {\"infoIcon\":\"ConditionsManager_infoIcon__Pbojd\",\"separator\":\"ConditionsManager_separator__Vw5Qr\",\"tooltipReference\":\"ConditionsManager_tooltipReference__9Qhgg\",\"addConditionButton\":\"ConditionsManager_addConditionButton__hkXTH\",\"tabBar\":\"ConditionsManager_tabBar__8llWf\",\"repeatableWrapper\":\"ConditionsManager_repeatableWrapper__5jvI2\",\"repeatableInput\":\"ConditionsManager_repeatableInput__EkBZf\"};","import i18n from '@dhis2/d2-i18n';\nimport { Input } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React, { useState, useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { acRemoveUiRepetition, acSetUiRepetition } from '../../../actions/ui.js';\nimport { getDefaultUiRepetition, PROP_MOST_RECENT, PROP_OLDEST } from '../../../modules/repetition.js';\nimport { sGetUiRepetitionByDimension } from '../../../reducers/ui.js';\nimport commonClasses from '../styles/Common.module.css';\nimport classes from './styles/ConditionsManager.module.css';\nconst isDefaultRepetition = repetition => {\n  const {\n    [PROP_MOST_RECENT]: defaultMostRecent,\n    [PROP_OLDEST]: defaultOldest\n  } = getDefaultUiRepetition();\n  return (repetition === null || repetition === void 0 ? void 0 : repetition[PROP_MOST_RECENT]) === defaultMostRecent && (repetition === null || repetition === void 0 ? void 0 : repetition[PROP_OLDEST]) === defaultOldest;\n};\nconst RepeatableEvents = _ref => {\n  let {\n    dimensionId\n  } = _ref;\n  const dispatch = useDispatch();\n  const sRepetition = useSelector(state => sGetUiRepetitionByDimension(state, dimensionId));\n  const [repetition, setRepetition] = useState(sRepetition && !isDefaultRepetition(isDefaultRepetition) ? sRepetition : getDefaultUiRepetition());\n  useEffect(() => {\n    if (isDefaultRepetition(repetition)) {\n      dispatch(acRemoveUiRepetition(dimensionId));\n    } else {\n      dispatch(acSetUiRepetition({\n        dimensionId,\n        repetition\n      }));\n    }\n  }, [repetition]);\n  const {\n    [PROP_MOST_RECENT]: mostRecent,\n    [PROP_OLDEST]: oldest\n  } = repetition;\n  const parseInput = value => {\n    const parsedValue = parseInt(value, 10);\n    return parsedValue > 0 ? parsedValue : 0;\n  };\n  const onMostRecentChange = value => {\n    setRepetition({\n      [PROP_MOST_RECENT]: parseInput(value),\n      [PROP_OLDEST]: oldest\n    });\n  };\n  const onOldestChange = value => {\n    setRepetition({\n      [PROP_OLDEST]: parseInput(value),\n      [PROP_MOST_RECENT]: mostRecent\n    });\n  };\n  return /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(\"p\", {\n    className: commonClasses.paragraph\n  }, i18n.t('From stages with repeatable events, show values for this data element from:', {\n    nsSeparator: '^^'\n  })), /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.repeatableWrapper\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: commonClasses.paragraph\n  }, i18n.t('Most recent events:', {\n    keySeparator: '>',\n    nsSeparator: '^^'\n  })), /*#__PURE__*/React.createElement(Input, {\n    type: \"number\",\n    dense: true,\n    className: classes.repeatableInput,\n    value: mostRecent.toString(),\n    onChange: _ref2 => {\n      let {\n        value\n      } = _ref2;\n      return onMostRecentChange(value);\n    },\n    min: \"0\",\n    dataTest: \"most-recent-input\"\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.repeatableWrapper\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: commonClasses.paragraph\n  }, i18n.t('Oldest events:', {\n    keySeparator: '>',\n    nsSeparator: '^^'\n  })), /*#__PURE__*/React.createElement(Input, {\n    type: \"number\",\n    dense: true,\n    className: classes.repeatableInput,\n    value: oldest.toString(),\n    onChange: _ref3 => {\n      let {\n        value\n      } = _ref3;\n      return onOldestChange(value);\n    },\n    min: \"0\",\n    dataTest: \"oldest-input\"\n  }))));\n};\nRepeatableEvents.propTypes = {\n  dimensionId: PropTypes.string.isRequired\n};\nexport default RepeatableEvents;","import { DIMENSION_TYPE_DATA_ELEMENT, DIMENSION_TYPE_PROGRAM_INDICATOR, VALUE_TYPE_NUMBER, VALUE_TYPE_UNIT_INTERVAL, VALUE_TYPE_PERCENTAGE, VALUE_TYPE_INTEGER, VALUE_TYPE_INTEGER_POSITIVE, VALUE_TYPE_INTEGER_NEGATIVE, VALUE_TYPE_INTEGER_ZERO_OR_POSITIVE, VALUE_TYPE_TEXT, VALUE_TYPE_LONG_TEXT, VALUE_TYPE_LETTER, VALUE_TYPE_PHONE_NUMBER, VALUE_TYPE_EMAIL, VALUE_TYPE_USERNAME, VALUE_TYPE_URL, VALUE_TYPE_BOOLEAN, VALUE_TYPE_TRUE_ONLY, VALUE_TYPE_DATE, VALUE_TYPE_TIME, VALUE_TYPE_DATETIME, VALUE_TYPE_ORGANISATION_UNIT } from '@dhis2/analytics';\nimport i18n from '@dhis2/d2-i18n';\nimport { Button, IconInfo16, Tooltip, TabBar, Tab } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React, { useState } from 'react';\nimport { connect } from 'react-redux';\nimport { acSetUiConditions } from '../../../actions/ui.js';\nimport { OPERATOR_IN, parseConditionsArrayToString, parseConditionsStringToArray } from '../../../modules/conditions.js';\nimport { extractDimensionIdParts } from '../../../modules/dimensionId.js';\nimport { OUTPUT_TYPE_ENROLLMENT, OUTPUT_TYPE_TRACKED_ENTITY } from '../../../modules/visualization.js';\nimport { sGetMetadataById } from '../../../reducers/metadata.js';\nimport { sGetDimensionIdsFromLayout, sGetUiConditionsByDimension, sGetUiInputType } from '../../../reducers/ui.js';\nimport DimensionModal from '../DimensionModal.js';\nimport commonClasses from '../styles/Common.module.css';\nimport { PhoneNumberCondition, CaseSensitiveAlphanumericCondition, LetterCondition } from './AlphanumericCondition.js';\nimport { BooleanCondition, TrueOnlyCondition } from './BooleanCondition.js';\nimport { DateCondition, DateTimeCondition, TimeCondition } from './DateCondition.js';\nimport NumericCondition from './NumericCondition.js';\nimport OptionSetCondition from './OptionSetCondition.js';\nimport OrgUnitCondition from './OrgUnitCondition.js';\nimport RepeatableEvents from './RepeatableEvents.js';\nimport classes from './styles/ConditionsManager.module.css';\nconst TAB_CONDITIONS = 'CONDITIONS';\nconst TAB_REPEATABLE_EVENTS = 'REPEATABLE_EVENTS';\nconst NUMERIC_TYPES = [VALUE_TYPE_NUMBER, VALUE_TYPE_UNIT_INTERVAL, VALUE_TYPE_PERCENTAGE, VALUE_TYPE_INTEGER, VALUE_TYPE_INTEGER_POSITIVE, VALUE_TYPE_INTEGER_NEGATIVE, VALUE_TYPE_INTEGER_ZERO_OR_POSITIVE];\nconst SINGLETON_TYPES = [VALUE_TYPE_BOOLEAN, VALUE_TYPE_TRUE_ONLY, VALUE_TYPE_ORGANISATION_UNIT];\nconst SUPPORTED_TYPES = [VALUE_TYPE_NUMBER, VALUE_TYPE_UNIT_INTERVAL, VALUE_TYPE_PERCENTAGE, VALUE_TYPE_INTEGER, VALUE_TYPE_INTEGER_POSITIVE, VALUE_TYPE_INTEGER_NEGATIVE, VALUE_TYPE_INTEGER_ZERO_OR_POSITIVE, VALUE_TYPE_TEXT, VALUE_TYPE_LONG_TEXT, VALUE_TYPE_LETTER, VALUE_TYPE_PHONE_NUMBER, VALUE_TYPE_EMAIL, VALUE_TYPE_USERNAME, VALUE_TYPE_URL, VALUE_TYPE_BOOLEAN, VALUE_TYPE_TRUE_ONLY, VALUE_TYPE_DATE, VALUE_TYPE_TIME, VALUE_TYPE_DATETIME, VALUE_TYPE_ORGANISATION_UNIT];\nconst EMPTY_CONDITION = '';\nconst ConditionsManager = _ref => {\n  let {\n    conditions,\n    inputType,\n    isInLayout,\n    dimension,\n    stage,\n    onClose,\n    setConditionsByDimension\n  } = _ref;\n  const [currentTab, setCurrentTab] = useState(TAB_CONDITIONS);\n  const valueType = dimension.valueType;\n  const isProgramIndicator = dimension.dimensionType === DIMENSION_TYPE_PROGRAM_INDICATOR;\n  const isOptionSetCondition = dimension.optionSet;\n  const canHaveLegendSets = NUMERIC_TYPES.includes(valueType) || isProgramIndicator;\n  const isSupported = SUPPORTED_TYPES.includes(valueType) || isProgramIndicator;\n  const getInitConditions = () => {\n    var _conditions$condition;\n    return (_conditions$condition = conditions.condition) !== null && _conditions$condition !== void 0 && _conditions$condition.length ? parseConditionsStringToArray(conditions.condition) : null;\n  };\n  const getEmptyConditions = () => SINGLETON_TYPES.includes(valueType) || isOptionSetCondition || conditions.legendSet ? [EMPTY_CONDITION] : [];\n  const [conditionsList, setConditionsList] = useState(getInitConditions() || getEmptyConditions());\n  const [selectedLegendSet, setSelectedLegendSet] = useState(conditions.legendSet);\n  const addCondition = () => setConditionsList([...conditionsList, EMPTY_CONDITION]);\n  const removeCondition = conditionIndex => {\n    const filteredConditionsList = conditionsList.filter((_, index) => index !== conditionIndex);\n    setConditionsList(filteredConditionsList);\n    if (selectedLegendSet && !filteredConditionsList.some(condition => condition.includes(OPERATOR_IN))) {\n      setSelectedLegendSet(null);\n    }\n  };\n  const setCondition = (conditionIndex, value) => setConditionsList(conditionsList.map((condition, index) => index === conditionIndex ? value : condition));\n  const storeConditions = () => setConditionsByDimension({\n    inputCondition: parseConditionsArrayToString(conditionsList.filter(cnd => cnd.length && cnd.slice(-1) !== ':')),\n    dimension: dimension.id,\n    legendSet: selectedLegendSet\n  });\n  const closeModal = () => {\n    storeConditions();\n    onClose();\n  };\n  const renderConditionsContent = () => {\n    const getDividerContent = index => conditionsList.length > 1 && index < conditionsList.length - 1 && /*#__PURE__*/React.createElement(\"span\", {\n      className: classes.separator\n    }, i18n.t('and'));\n    if (isOptionSetCondition) {\n      return conditionsList.map((condition, index) => /*#__PURE__*/React.createElement(\"div\", {\n        key: index\n      }, /*#__PURE__*/React.createElement(OptionSetCondition, {\n        condition: condition,\n        optionSetId: dimension.optionSet,\n        onChange: value => setCondition(index, value)\n      })));\n    }\n    const renderNumericCondition = function () {\n      let {\n        enableDecimalSteps,\n        allowIntegerOnly\n      } = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      return (conditionsList.length && conditionsList || selectedLegendSet && ['']).map((condition, index) => /*#__PURE__*/React.createElement(\"div\", {\n        key: index\n      }, /*#__PURE__*/React.createElement(NumericCondition, {\n        condition: condition,\n        onChange: value => setCondition(index, value),\n        onRemove: () => removeCondition(index),\n        numberOfConditions: conditionsList.length || (selectedLegendSet ? 1 : 0),\n        legendSetId: selectedLegendSet,\n        onLegendSetChange: value => setSelectedLegendSet(value),\n        enableDecimalSteps: enableDecimalSteps,\n        allowIntegerOnly: allowIntegerOnly,\n        dimension: dimension\n      }), getDividerContent(index)));\n    };\n    if (isProgramIndicator) {\n      return renderNumericCondition();\n    }\n    switch (valueType) {\n      case VALUE_TYPE_UNIT_INTERVAL:\n        {\n          return renderNumericCondition({\n            enableDecimalSteps: true\n          });\n        }\n      case VALUE_TYPE_INTEGER:\n      case VALUE_TYPE_INTEGER_POSITIVE:\n      case VALUE_TYPE_INTEGER_NEGATIVE:\n      case VALUE_TYPE_INTEGER_ZERO_OR_POSITIVE:\n        {\n          return renderNumericCondition({\n            allowIntegerOnly: true\n          });\n        }\n      case VALUE_TYPE_NUMBER:\n      case VALUE_TYPE_PERCENTAGE:\n        {\n          return renderNumericCondition();\n        }\n      case VALUE_TYPE_PHONE_NUMBER:\n        {\n          return conditionsList.map((condition, index) => /*#__PURE__*/React.createElement(\"div\", {\n            key: index\n          }, /*#__PURE__*/React.createElement(PhoneNumberCondition, {\n            condition: condition,\n            onChange: value => setCondition(index, value),\n            onRemove: () => removeCondition(index)\n          }), getDividerContent(index)));\n        }\n      case VALUE_TYPE_LETTER:\n        {\n          return conditionsList.map((condition, index) => /*#__PURE__*/React.createElement(\"div\", {\n            key: index\n          }, /*#__PURE__*/React.createElement(LetterCondition, {\n            condition: condition,\n            onChange: value => setCondition(index, value),\n            onRemove: () => removeCondition(index)\n          }), getDividerContent(index)));\n        }\n      case VALUE_TYPE_TEXT:\n      case VALUE_TYPE_LONG_TEXT:\n      case VALUE_TYPE_EMAIL:\n      case VALUE_TYPE_USERNAME:\n      case VALUE_TYPE_URL:\n        {\n          return conditionsList.map((condition, index) => /*#__PURE__*/React.createElement(\"div\", {\n            key: index\n          }, /*#__PURE__*/React.createElement(CaseSensitiveAlphanumericCondition, {\n            condition: condition,\n            onChange: value => setCondition(index, value),\n            onRemove: () => removeCondition(index)\n          }), getDividerContent(index)));\n        }\n      case VALUE_TYPE_BOOLEAN:\n        {\n          return conditionsList.map((condition, index) => /*#__PURE__*/React.createElement(\"div\", {\n            key: index\n          }, /*#__PURE__*/React.createElement(BooleanCondition, {\n            condition: condition,\n            onChange: value => setCondition(index, value)\n          })));\n        }\n      case VALUE_TYPE_TRUE_ONLY:\n        {\n          return conditionsList.map((condition, index) => /*#__PURE__*/React.createElement(\"div\", {\n            key: index\n          }, /*#__PURE__*/React.createElement(TrueOnlyCondition, {\n            condition: condition,\n            onChange: value => setCondition(index, value)\n          })));\n        }\n      case VALUE_TYPE_DATE:\n        {\n          return conditionsList.map((condition, index) => /*#__PURE__*/React.createElement(\"div\", {\n            key: index\n          }, /*#__PURE__*/React.createElement(DateCondition, {\n            condition: condition,\n            onChange: value => setCondition(index, value),\n            onRemove: () => removeCondition(index)\n          }), getDividerContent(index)));\n        }\n      case VALUE_TYPE_TIME:\n        {\n          return conditionsList.map((condition, index) => /*#__PURE__*/React.createElement(\"div\", {\n            key: index\n          }, /*#__PURE__*/React.createElement(TimeCondition, {\n            condition: condition,\n            onChange: value => setCondition(index, value),\n            onRemove: () => removeCondition(index)\n          }), getDividerContent(index)));\n        }\n      case VALUE_TYPE_DATETIME:\n        {\n          return conditionsList.map((condition, index) => /*#__PURE__*/React.createElement(\"div\", {\n            key: index\n          }, /*#__PURE__*/React.createElement(DateTimeCondition, {\n            condition: condition,\n            onChange: value => setCondition(index, value),\n            onRemove: () => removeCondition(index)\n          }), getDividerContent(index)));\n        }\n      case VALUE_TYPE_ORGANISATION_UNIT:\n        {\n          return conditionsList.map((condition, index) => /*#__PURE__*/React.createElement(\"div\", {\n            key: index\n          }, /*#__PURE__*/React.createElement(OrgUnitCondition, {\n            condition: condition,\n            onChange: value => setCondition(index, value)\n          })));\n        }\n    }\n  };\n  const disableAddButton = canHaveLegendSets && (conditionsList.some(condition => condition.includes(OPERATOR_IN)) || selectedLegendSet);\n  const isRepeatable = [OUTPUT_TYPE_ENROLLMENT, OUTPUT_TYPE_TRACKED_ENTITY].includes(inputType) && dimension.dimensionType === DIMENSION_TYPE_DATA_ELEMENT;\n  const renderConditions = () => /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", null, isSupported ? /*#__PURE__*/React.createElement(\"p\", {\n    className: commonClasses.paragraph\n  }, i18n.t('Show items that meet the following conditions for this data item:', {\n    nsSeparator: '^^'\n  })) : /*#__PURE__*/React.createElement(\"p\", {\n    className: commonClasses.paragraph\n  }, i18n.t(\"This dimension can't be filtered. All values will be shown.\"))), isSupported && /*#__PURE__*/React.createElement(\"div\", {\n    className: commonClasses.mainSection\n  }, !conditionsList.length && !selectedLegendSet && !(SINGLETON_TYPES.includes(valueType) || isOptionSetCondition) ? /*#__PURE__*/React.createElement(\"p\", {\n    className: commonClasses.paragraph\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: classes.infoIcon\n  }, /*#__PURE__*/React.createElement(IconInfo16, null)), i18n.t('No conditions yet, so all values will be included. Add a condition to filter results.')) : renderConditionsContent(), !(SINGLETON_TYPES.includes(valueType) || isOptionSetCondition) && /*#__PURE__*/React.createElement(Tooltip, {\n    content: i18n.t(\"Preset options can't be combined with other conditions\"),\n    placement: \"bottom\",\n    closeDelay: 200\n  }, _ref2 => {\n    let {\n      onMouseOver,\n      onMouseOut,\n      ref\n    } = _ref2;\n    return /*#__PURE__*/React.createElement(\"span\", {\n      ref: ref,\n      onMouseOver: () => disableAddButton && onMouseOver(),\n      onMouseOut: () => disableAddButton && onMouseOut(),\n      className: classes.tooltipReference\n    }, /*#__PURE__*/React.createElement(Button, {\n      type: \"button\",\n      small: true,\n      onClick: addCondition,\n      className: classes.addConditionButton,\n      disabled: disableAddButton,\n      dataTest: \"button-add-condition\"\n    }, conditionsList.length ? i18n.t('Add another condition') : i18n.t('Add a condition')));\n  })));\n  const renderTabs = () => {\n    const disableRepeatableTab = !(stage !== null && stage !== void 0 && stage.repeatable);\n    const repeatableTab = /*#__PURE__*/React.createElement(Tab, {\n      key: TAB_REPEATABLE_EVENTS,\n      onClick: () => setCurrentTab(TAB_REPEATABLE_EVENTS),\n      selected: currentTab === TAB_REPEATABLE_EVENTS,\n      disabled: disableRepeatableTab\n    }, i18n.t('Repeated events'));\n    return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(TabBar, {\n      className: classes.tabBar\n    }, /*#__PURE__*/React.createElement(Tab, {\n      key: TAB_CONDITIONS,\n      onClick: () => setCurrentTab(TAB_CONDITIONS),\n      selected: currentTab === TAB_CONDITIONS\n    }, i18n.t('Conditions')), disableRepeatableTab ? /*#__PURE__*/React.createElement(Tooltip, {\n      key: \"repeatable-tooltip\",\n      placement: \"bottom\",\n      content: i18n.t('Only available for repeatable stages'),\n      dataTest: \"repeatable-events-tooltip\"\n    }, repeatableTab) : repeatableTab), currentTab === TAB_CONDITIONS ? renderConditions() : /*#__PURE__*/React.createElement(RepeatableEvents, {\n      dimensionId: dimension.id\n    }));\n  };\n  if (process.env.NODE_ENV !== 'production') {\n    console.log(`valueType: ${valueType}, dimensionType: ${dimension.dimensionType}, id: ${dimension.id}`);\n  }\n  return dimension ? /*#__PURE__*/React.createElement(DimensionModal, {\n    dataTest: \"conditions-modal\",\n    isInLayout: isInLayout,\n    onClose: closeModal,\n    title: stage !== null && stage !== void 0 && stage.name ? `${dimension.name} - ${stage.name}` : dimension.name\n  }, isRepeatable ? renderTabs() : renderConditions()) : null;\n};\nConditionsManager.propTypes = {\n  conditions: PropTypes.object.isRequired,\n  dimension: PropTypes.object.isRequired,\n  isInLayout: PropTypes.bool.isRequired,\n  inputType: PropTypes.string,\n  legendSet: PropTypes.string,\n  setConditionsByDimension: PropTypes.func,\n  stage: PropTypes.object,\n  onClose: PropTypes.func\n};\nconst mapStateToProps = (state, ownProps) => {\n  var _ownProps$dimension, _ownProps$dimension2, _extractDimensionIdPa, _ownProps$dimension3;\n  return {\n    isInLayout: sGetDimensionIdsFromLayout(state).includes((_ownProps$dimension = ownProps.dimension) === null || _ownProps$dimension === void 0 ? void 0 : _ownProps$dimension.id),\n    conditions: sGetUiConditionsByDimension(state, (_ownProps$dimension2 = ownProps.dimension) === null || _ownProps$dimension2 === void 0 ? void 0 : _ownProps$dimension2.id),\n    dimensionIdsInLayout: sGetDimensionIdsFromLayout(state),\n    inputType: sGetUiInputType(state),\n    stage: sGetMetadataById(state, (_extractDimensionIdPa = extractDimensionIdParts((_ownProps$dimension3 = ownProps.dimension) === null || _ownProps$dimension3 === void 0 ? void 0 : _ownProps$dimension3.id)) === null || _extractDimensionIdPa === void 0 ? void 0 : _extractDimensionIdPa.programStageId) || {}\n  };\n};\nconst mapDispatchToProps = {\n  setConditionsByDimension: acSetUiConditions\n};\nexport default connect(mapStateToProps, mapDispatchToProps)(ConditionsManager);","function _extends() { return _extends = Object.assign ? Object.assign.bind() : function (n) { for (var e = 1; e < arguments.length; e++) { var t = arguments[e]; for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]); } return n; }, _extends.apply(null, arguments); }\nimport { apiFetchItemsByDimension, useCachedDataQuery } from '@dhis2/analytics';\nimport { useDataEngine } from '@dhis2/app-runtime';\nimport i18n from '@dhis2/d2-i18n';\nimport { Transfer, TransferOption } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React, { useState } from 'react';\nimport { connect } from 'react-redux';\nimport { acAddMetadata } from '../../actions/metadata.js';\nimport { acSetUiItems } from '../../actions/ui.js';\nimport { DERIVED_USER_SETTINGS_DISPLAY_NAME_PROPERTY } from '../../modules/userSettings.js';\nimport { useDebounce, useDidUpdateEffect } from '../../modules/utils.js';\nimport { sGetMetadata } from '../../reducers/metadata.js';\nimport { sGetDimensionIdsFromLayout, sGetUiItemsByDimension } from '../../reducers/ui.js';\nimport { TransferEmptySelection } from './common/TransferEmptySelection.js';\nimport { TransferLeftHeader } from './common/TransferLeftHeader.js';\nimport { TransferRightHeader } from './common/TransferRightHeader.js';\nimport { TransferSourceEmptyPlaceholder } from './common/TransferSourceEmptyPlaceholder.js';\nimport DimensionModal from './DimensionModal.js';\nimport classes from './styles/Common.module.css';\nimport { TRANSFER_HEIGHT, TRANSFER_OPTIONS_WIDTH, TRANSFER_SELECTED_WIDTH } from './utils.js';\nconst DynamicDimension = _ref => {\n  let {\n    onClose,\n    dimension,\n    isInLayout,\n    setUiItems,\n    selectedIds,\n    addMetadata,\n    metadata\n  } = _ref;\n  const {\n    currentUser\n  } = useCachedDataQuery();\n  const [state, setState] = useState({\n    searchTerm: '',\n    items: [],\n    loading: true,\n    nextPage: 1\n  });\n  const dataTest = `dynamic-dimension-${dimension.id}`;\n  const dataEngine = useDataEngine();\n  const setSearchTerm = searchTerm => setState(state => ({\n    ...state,\n    searchTerm\n  }));\n  const debouncedSearchTerm = useDebounce(state.searchTerm);\n  const selectedItems = selectedIds.map(id => ({\n    value: id,\n    label: Object.values(metadata).find(item => item.id === id).name\n  }));\n  const fetchItems = async page => {\n    var _result$dimensionItem;\n    setState(state => ({\n      ...state,\n      loading: true\n    }));\n    const result = await apiFetchItemsByDimension({\n      dataEngine,\n      dimensionId: dimension.id,\n      searchTerm: state.searchTerm,\n      page,\n      nameProp: currentUser.settings[DERIVED_USER_SETTINGS_DISPLAY_NAME_PROPERTY]\n    });\n    const newItems = (_result$dimensionItem = result.dimensionItems) === null || _result$dimensionItem === void 0 ? void 0 : _result$dimensionItem.map(_ref2 => {\n      let {\n        id,\n        name,\n        disabled\n      } = _ref2;\n      return {\n        label: name,\n        value: id,\n        disabled\n      };\n    });\n    setState(state => ({\n      ...state,\n      loading: false,\n      items: page > 1 ? [...state.items, ...newItems] : newItems,\n      nextPage: result.nextPage\n    }));\n    /*  The following handles a very specific edge-case where the user can select all items from a \n        page and then reopen the modal. Usually Transfer triggers the onEndReached when the end of \n        the page is reached (scrolling down) or if too few items are on the left side (e.g. selecting \n        49 items from page 1, leaving only 1 item on the left side). However, due to the way Transfer \n        works, if 0 items are available, more items are fetched, but all items are already selected \n        (leaving 0 items on the left side still), the onReachedEnd won't trigger. Hence the code below:\n        IF there is a next page AND some items were just fetched AND you have the same or more\n        selected items than fetched items AND all fetched items are already selected -> fetch more!\n    */\n    if (result.nextPage && newItems.length && selectedItems.length >= newItems.length && newItems.every(newItem => selectedItems.find(selectedItem => selectedItem.value === newItem.value))) {\n      fetchItems(result.nextPage);\n    }\n  };\n  useDidUpdateEffect(() => {\n    setState(state => ({\n      ...state,\n      loading: true,\n      nextPage: 1\n    }));\n    fetchItems(1);\n  }, [debouncedSearchTerm, state.filter]);\n  const onEndReached = () => {\n    if (state.nextPage) {\n      fetchItems(state.nextPage);\n    }\n  };\n  const selectUiItems = selected => {\n    addMetadata(state.items.filter(item => selected.includes(item.value) && !selectedItems.find(si => si.value === item.value)).reduce((acc, item) => ({\n      ...acc,\n      [item.value]: {\n        id: item.value,\n        name: item.label\n      }\n    }), {}));\n    setUiItems({\n      dimensionId: dimension.id,\n      itemIds: selected\n    });\n  };\n  const closeModal = () => onClose();\n  const renderModalContent = () => /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"p\", {\n    className: classes.paragraph\n  }, i18n.t('Show items that meet the following conditions for this data item:')), /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.mainSection\n  }, /*#__PURE__*/React.createElement(Transfer, {\n    onChange: _ref3 => {\n      let {\n        selected\n      } = _ref3;\n      return selectUiItems(selected);\n    },\n    selected: selectedItems.map(item => item.value),\n    options: [...state.items, ...selectedItems],\n    loading: state.loading,\n    loadingPicked: state.loading,\n    sourceEmptyPlaceholder: /*#__PURE__*/React.createElement(TransferSourceEmptyPlaceholder, {\n      loading: state.loading,\n      searchTerm: debouncedSearchTerm,\n      options: state.items,\n      dataTest: `${dataTest}-empty-source`\n    }),\n    onEndReached: onEndReached,\n    leftHeader: /*#__PURE__*/React.createElement(TransferLeftHeader, {\n      searchTerm: state.searchTerm,\n      setSearchTerm: setSearchTerm,\n      dataTest: `${dataTest}-left-header`\n    }),\n    height: TRANSFER_HEIGHT,\n    optionsWidth: TRANSFER_OPTIONS_WIDTH,\n    selectedWidth: TRANSFER_SELECTED_WIDTH,\n    selectedEmptyComponent: /*#__PURE__*/React.createElement(TransferEmptySelection, null),\n    rightHeader: /*#__PURE__*/React.createElement(TransferRightHeader, null),\n    renderOption: props => /*#__PURE__*/React.createElement(TransferOption, _extends({}, props, {\n      dataTest: `${dataTest}-transfer-option`\n    })),\n    dataTest: `${dataTest}-transfer`\n  })));\n  if (process.env.NODE_ENV !== 'production') {\n    console.log(`dimensionType: ${dimension.dimensionType}, id: ${dimension.id}`);\n  }\n  return dimension ? /*#__PURE__*/React.createElement(DimensionModal, {\n    dataTest: \"dynamic-dimension-modal\",\n    isInLayout: isInLayout,\n    onClose: closeModal,\n    title: dimension.name\n  }, renderModalContent()) : null;\n};\nDynamicDimension.propTypes = {\n  addMetadata: PropTypes.func.isRequired,\n  dimension: PropTypes.object.isRequired,\n  isInLayout: PropTypes.bool.isRequired,\n  metadata: PropTypes.object.isRequired,\n  selectedIds: PropTypes.array.isRequired,\n  onClose: PropTypes.func.isRequired,\n  setUiItems: PropTypes.func\n};\nconst mapStateToProps = (state, ownProps) => {\n  var _ownProps$dimension, _ownProps$dimension2;\n  return {\n    isInLayout: sGetDimensionIdsFromLayout(state).includes((_ownProps$dimension = ownProps.dimension) === null || _ownProps$dimension === void 0 ? void 0 : _ownProps$dimension.id),\n    selectedIds: sGetUiItemsByDimension(state, (_ownProps$dimension2 = ownProps.dimension) === null || _ownProps$dimension2 === void 0 ? void 0 : _ownProps$dimension2.id),\n    metadata: sGetMetadata(state)\n  };\n};\nexport default connect(mapStateToProps, {\n  setUiItems: acSetUiItems,\n  addMetadata: acAddMetadata\n})(DynamicDimension);","function _extends() { return _extends = Object.assign ? Object.assign.bind() : function (n) { for (var e = 1; e < arguments.length; e++) { var t = arguments[e]; for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]); } return n; }, _extends.apply(null, arguments); }\nimport { OrgUnitDimension, ouIdHelper, DIMENSION_ID_ORGUNIT, useCachedDataQuery } from '@dhis2/analytics';\nimport i18n from '@dhis2/d2-i18n';\nimport { Checkbox } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { acAddMetadata } from '../../actions/metadata.js';\nimport { acSetUiItems, acAddParentGraphMap } from '../../actions/ui.js';\nimport { DIMENSION_ID_EVENT_STATUS, DIMENSION_ID_PROGRAM_STATUS } from '../../modules/dimensionConstants.js';\nimport { extractDimensionIdParts, formatDimensionId } from '../../modules/dimensionId.js';\nimport { removeLastPathSegment, getOuPath } from '../../modules/orgUnit.js';\nimport { DERIVED_USER_SETTINGS_DISPLAY_NAME_PROPERTY } from '../../modules/userSettings.js';\nimport { STATUS_ACTIVE, STATUS_CANCELLED, STATUS_COMPLETED, STATUS_SCHEDULED, getStatusNames } from '../../modules/visualization.js';\nimport { sGetMetadata } from '../../reducers/metadata.js';\nimport { sGetUiItemsByDimension, sGetUiParentGraphMap, sGetDimensionIdsFromLayout, sGetUiInputType } from '../../reducers/ui.js';\nimport DimensionModal from './DimensionModal.js';\nimport classes from './styles/Common.module.css';\nconst FixedDimension = _ref => {\n  let {\n    addMetadata,\n    addParentGraphMap,\n    onClose,\n    dimension,\n    isInLayout,\n    metadata,\n    parentGraphMap,\n    setUiItems,\n    selectedItemsIds,\n    inputType\n  } = _ref;\n  const {\n    rootOrgUnits,\n    currentUser\n  } = useCachedDataQuery();\n  const statusNames = getStatusNames();\n  const {\n    programId,\n    dimensionId\n  } = extractDimensionIdParts(dimension.id, inputType);\n  const selectUiItems = _ref2 => {\n    let {\n      dimensionId,\n      items\n    } = _ref2;\n    setUiItems({\n      dimensionId: dimension.id,\n      itemIds: items.map(item => item.id)\n    });\n    switch (dimensionId) {\n      case DIMENSION_ID_ORGUNIT:\n        {\n          const forMetadata = {};\n          const forParentGraphMap = {};\n          items.forEach(ou => {\n            const id = ouIdHelper.removePrefix(ou.id);\n            forMetadata[id] = {\n              id,\n              name: ou.name || ou.displayName,\n              displayName: ou.displayName\n            };\n            if (ou.path) {\n              const path = removeLastPathSegment(ou.path);\n              forParentGraphMap[ou.id] = path === `/${ou.id}` ? '' : path.replace(/^\\//, '');\n            }\n          });\n          addMetadata(forMetadata);\n          addParentGraphMap(forParentGraphMap);\n          break;\n        }\n      // TODO: case DIMENSION_ID_PERIOD:\n    }\n  };\n  const closeModal = () => onClose();\n  const renderStatusParagraph = () => /*#__PURE__*/React.createElement(\"p\", {\n    className: classes.paragraph\n  }, i18n.t('Show items where the status is:', {\n    nsSeparator: '^^'\n  }));\n  const setStatus = _ref3 => {\n    let {\n      selectedItemsIds,\n      itemId,\n      toggle\n    } = _ref3;\n    const newIds = toggle ? [...new Set([...selectedItemsIds, itemId])] : selectedItemsIds.filter(id => id !== itemId);\n    selectUiItems({\n      items: newIds.map(id => ({\n        id\n      }))\n    });\n  };\n  const renderProgramStatus = () => {\n    const ALL_STATUSES = [{\n      id: formatDimensionId({\n        dimensionId: STATUS_ACTIVE,\n        programId,\n        outputType: inputType\n      }),\n      name: statusNames[STATUS_ACTIVE]\n    }, {\n      id: formatDimensionId({\n        dimensionId: STATUS_COMPLETED,\n        programId,\n        outputType: inputType\n      }),\n      name: statusNames[STATUS_COMPLETED]\n    }, {\n      id: formatDimensionId({\n        dimensionId: STATUS_CANCELLED,\n        programId,\n        outputType: inputType\n      }),\n      name: statusNames[STATUS_CANCELLED]\n    }];\n    return /*#__PURE__*/React.createElement(React.Fragment, null, renderStatusParagraph(), /*#__PURE__*/React.createElement(\"div\", null, ALL_STATUSES.map(_ref4 => {\n      let {\n        id,\n        name\n      } = _ref4;\n      return /*#__PURE__*/React.createElement(Checkbox, {\n        key: id,\n        checked: selectedItemsIds.includes(id),\n        label: name,\n        onChange: _ref5 => {\n          let {\n            checked\n          } = _ref5;\n          return setStatus({\n            selectedItemsIds,\n            itemId: id,\n            toggle: checked\n          });\n        },\n        dense: true,\n        className: classes.verticalCheckbox,\n        dataTest: \"program-status-checkbox\"\n      });\n    })));\n  };\n  const renderEventStatus = () => {\n    const ALL_STATUSES = [{\n      id: STATUS_ACTIVE,\n      name: statusNames[STATUS_ACTIVE]\n    }, {\n      id: STATUS_COMPLETED,\n      name: statusNames[STATUS_COMPLETED]\n    }, {\n      id: STATUS_SCHEDULED,\n      name: statusNames[STATUS_SCHEDULED]\n    }];\n    return /*#__PURE__*/React.createElement(React.Fragment, null, renderStatusParagraph(), /*#__PURE__*/React.createElement(\"div\", null, ALL_STATUSES.map(_ref6 => {\n      let {\n        id,\n        name\n      } = _ref6;\n      return /*#__PURE__*/React.createElement(Checkbox, {\n        key: id,\n        checked: selectedItemsIds.includes(id),\n        label: name,\n        onChange: _ref7 => {\n          let {\n            checked\n          } = _ref7;\n          return setStatus({\n            selectedItemsIds,\n            itemId: id,\n            toggle: checked\n          });\n        },\n        dense: true,\n        className: classes.verticalCheckbox,\n        dataTest: \"event-status-checkbox\"\n      });\n    })));\n  };\n  const renderModalContent = () => {\n    switch (dimensionId) {\n      case DIMENSION_ID_PROGRAM_STATUS:\n        return renderProgramStatus();\n      case DIMENSION_ID_EVENT_STATUS:\n        return renderEventStatus();\n      case DIMENSION_ID_ORGUNIT:\n        {\n          const dimensionProps = {\n            onSelect: selectUiItems\n          };\n          const selected = selectedItemsIds.filter(id => metadata[ouIdHelper.removePrefix(id)] !== undefined).map(id => {\n            const ouUid = ouIdHelper.removePrefix(id);\n            return {\n              id,\n              name: metadata[ouUid].displayName || metadata[ouUid].name,\n              path: getOuPath(ouUid, metadata, parentGraphMap)\n            };\n          });\n          const display = dimensionId === DIMENSION_ID_ORGUNIT ? 'block' : 'none';\n          return /*#__PURE__*/React.createElement(\"div\", {\n            key: dimension.id,\n            style: {\n              display\n            }\n          }, /*#__PURE__*/React.createElement(OrgUnitDimension, _extends({\n            selected: selected,\n            roots: rootOrgUnits.map(rootOrgUnit => rootOrgUnit.id),\n            displayNameProp: currentUser.settings[DERIVED_USER_SETTINGS_DISPLAY_NAME_PROPERTY]\n          }, dimensionProps)));\n        }\n      // TODO: case DIMENSION_ID_PERIOD:\n    }\n  };\n  return dimension ? /*#__PURE__*/React.createElement(DimensionModal, {\n    dataTest: `fixed-dimension-${dimension.id}-modal`,\n    isInLayout: isInLayout,\n    onClose: closeModal,\n    title: dimension.name\n  }, renderModalContent()) : null;\n};\nFixedDimension.propTypes = {\n  dimension: PropTypes.object.isRequired,\n  isInLayout: PropTypes.bool.isRequired,\n  selectedItemsIds: PropTypes.array.isRequired,\n  onClose: PropTypes.func.isRequired,\n  addMetadata: PropTypes.func,\n  addParentGraphMap: PropTypes.func,\n  inputType: PropTypes.string,\n  metadata: PropTypes.object,\n  parentGraphMap: PropTypes.object,\n  setUiItems: PropTypes.func\n};\nFixedDimension.defaultProps = {\n  rootOrgUnits: []\n};\nconst mapStateToProps = (state, ownProps) => {\n  var _ownProps$dimension, _ownProps$dimension2;\n  return {\n    selectedItemsIds: sGetUiItemsByDimension(state, (_ownProps$dimension = ownProps.dimension) === null || _ownProps$dimension === void 0 ? void 0 : _ownProps$dimension.id),\n    isInLayout: sGetDimensionIdsFromLayout(state).includes((_ownProps$dimension2 = ownProps.dimension) === null || _ownProps$dimension2 === void 0 ? void 0 : _ownProps$dimension2.id),\n    inputType: sGetUiInputType(state),\n    metadata: sGetMetadata(state),\n    parentGraphMap: sGetUiParentGraphMap(state)\n  };\n};\nexport default connect(mapStateToProps, {\n  setUiItems: acSetUiItems,\n  addMetadata: acAddMetadata,\n  addParentGraphMap: acAddParentGraphMap\n})(FixedDimension);","import { useCachedDataQuery } from '@dhis2/analytics';\nimport { USER_SETTINGS_UI_LOCALE } from './userSettings.js';\nexport const getStartEndDate = dimensionId => {\n  const parts = dimensionId.split('_');\n  return parts.length === 2 && !isNaN(Date.parse(parts[0])) && !isNaN(Date.parse(parts[1])) ? parts : [];\n};\nexport const isStartEndDate = id => getStartEndDate(id).length === 2;\nexport const useLocalizedStartEndDateFormatter = () => {\n  const {\n    currentUser\n  } = useCachedDataQuery();\n  const formatter = new Intl.DateTimeFormat(currentUser.settings[USER_SETTINGS_UI_LOCALE], {\n    dateStyle: 'long'\n  });\n  return startEndDate => getStartEndDate(startEndDate).map(dateStr => formatter.format(new Date(dateStr))).join(' - ');\n};","// extracted by mini-css-extract-plugin\nexport default {\"entry\":\"PeriodDimension_entry__1mqOI\",\"navigation\":\"PeriodDimension_navigation__oyXK-\"};","// extracted by mini-css-extract-plugin\nexport default {\"row\":\"StartEndDate_row__HkgNs\",\"icon\":\"StartEndDate_icon__0aaG6\"};","import i18n from '@dhis2/d2-i18n';\nimport { Field, IconArrowRight16, InputField, colors } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React, { useEffect, useState } from 'react';\nimport styles from './StartEndDate.module.css';\nexport const StartEndDate = _ref => {\n  let {\n    value: [startDateStr, endDateStr],\n    setValue\n  } = _ref;\n  const [startDate, setStartDate] = useState(startDateStr);\n  const [endDate, setEndDate] = useState(endDateStr);\n  useEffect(() => {\n    setValue(startDate && endDate ? `${startDate}_${endDate}` : '');\n  }, [startDate, endDate]);\n  const onStartDateChange = _ref2 => {\n    let {\n      value\n    } = _ref2;\n    setStartDate(value);\n  };\n  const onEndDateChange = _ref3 => {\n    let {\n      value\n    } = _ref3;\n    setEndDate(value);\n  };\n  return /*#__PURE__*/React.createElement(Field, {\n    helpText: i18n.t('Start and end dates are inclusive and will be included in the outputs.')\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.row\n  }, /*#__PURE__*/React.createElement(InputField, {\n    value: startDate,\n    type: \"date\",\n    onChange: onStartDateChange,\n    label: i18n.t('Start date'),\n    inputWidth: \"200px\",\n    max: \"9999-12-31\",\n    dataTest: \"start-date-input\"\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.icon\n  }, /*#__PURE__*/React.createElement(IconArrowRight16, {\n    color: colors.grey500\n  })), /*#__PURE__*/React.createElement(InputField, {\n    value: endDate,\n    type: \"date\",\n    onChange: onEndDateChange,\n    label: i18n.t('End date'),\n    inputWidth: \"200px\",\n    max: \"9999-12-31\",\n    dataTest: \"end-date-input\"\n  })));\n};\nStartEndDate.propTypes = {\n  setValue: PropTypes.func.isRequired,\n  value: PropTypes.array.isRequired\n};","import { PeriodDimension as BasePeriodDimension, useCachedDataQuery, DAILY, WEEKLY, WEEKLYWED, WEEKLYTHU, WEEKLYSAT, WEEKLYSUN, BIWEEKLY, MONTHLY, BIMONTHLY } from '@dhis2/analytics';\nimport i18n from '@dhis2/d2-i18n';\nimport { SegmentedControl } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React, { useState, useMemo } from 'react';\nimport { useDispatch, useSelector, useStore } from 'react-redux';\nimport { acSetUiItems } from '../../../actions/ui.js';\nimport { getStartEndDate, isStartEndDate } from '../../../modules/dates.js';\nimport { extractDimensionIdParts, formatDimensionId } from '../../../modules/dimensionId.js';\nimport { SYSTEM_SETTINGS_HIDE_DAILY_PERIODS, SYSTEM_SETTINGS_HIDE_WEEKLY_PERIODS, SYSTEM_SETTINGS_HIDE_BIWEEKLY_PERIODS, SYSTEM_SETTINGS_HIDE_MONTHLY_PERIODS, SYSTEM_SETTINGS_HIDE_BIMONTHLY_PERIODS } from '../../../modules/systemSettings.js';\nimport { sGetDimensionIdsFromLayout, sGetUiItemsByDimension, sGetUiInputType } from '../../../reducers/ui.js';\nimport DimensionModal from '../DimensionModal.js';\nimport styles from './PeriodDimension.module.css';\nimport { StartEndDate } from './StartEndDate.js';\nexport const OPTION_PRESETS = 'PRESETS';\nexport const OPTION_START_END_DATES = 'START_END_DATES';\nconst useIsInLayout = dimensionId => {\n  const allDimensionIds = useSelector(sGetDimensionIdsFromLayout);\n  return useMemo(() => !!dimensionId && allDimensionIds.includes(dimensionId), [dimensionId, allDimensionIds]);\n};\nconst useMetadataNameGetter = () => {\n  const store = useStore();\n  return id => {\n    var _metadata$id;\n    const {\n      metadata\n    } = store.getState();\n    return (_metadata$id = metadata[id]) === null || _metadata$id === void 0 ? void 0 : _metadata$id.name;\n  };\n};\nconst useExcludedPeriods = () => {\n  const {\n    systemSettings\n  } = useCachedDataQuery();\n  const types = [];\n  if (systemSettings[SYSTEM_SETTINGS_HIDE_DAILY_PERIODS]) {\n    types.push(DAILY);\n  }\n  if (systemSettings[SYSTEM_SETTINGS_HIDE_WEEKLY_PERIODS]) {\n    types.push(WEEKLY, WEEKLYWED, WEEKLYTHU, WEEKLYSAT, WEEKLYSUN);\n  }\n  if (systemSettings[SYSTEM_SETTINGS_HIDE_BIWEEKLY_PERIODS]) {\n    types.push(BIWEEKLY);\n  }\n  if (systemSettings[SYSTEM_SETTINGS_HIDE_MONTHLY_PERIODS]) {\n    types.push(MONTHLY);\n  }\n  if (systemSettings[SYSTEM_SETTINGS_HIDE_BIMONTHLY_PERIODS]) {\n    types.push(BIMONTHLY);\n  }\n  return types;\n};\nexport const PeriodDimension = _ref => {\n  let {\n    dimension,\n    onClose\n  } = _ref;\n  const getNameFromMetadata = useMetadataNameGetter();\n  const dispatch = useDispatch();\n  const isInLayout = useIsInLayout(dimension === null || dimension === void 0 ? void 0 : dimension.id);\n  const excludedPeriodTypes = useExcludedPeriods();\n  const selectedIds = useSelector(state => sGetUiItemsByDimension(state, dimension === null || dimension === void 0 ? void 0 : dimension.id).map(id => extractDimensionIdParts(id).dimensionId));\n  const [entryMethod, setEntryMethod] = useState(selectedIds.filter(id => isStartEndDate(id)).length ? OPTION_START_END_DATES : OPTION_PRESETS);\n  const outputType = useSelector(sGetUiInputType);\n  const {\n    programId\n  } = extractDimensionIdParts(dimension.id, outputType);\n  const updatePeriodDimensionItems = items => {\n    const {\n      uiItems,\n      metadata\n    } = items.reduce((acc, item) => {\n      const id = formatDimensionId({\n        dimensionId: item.id,\n        programId,\n        outputType\n      });\n      acc.uiItems.push(id);\n      if (isStartEndDate(item.id)) {\n        acc.metadata[item.id] = {\n          id: item.id,\n          name: item.id.replace('_', ' - ')\n        };\n      } else {\n        acc.metadata[item.id] = item;\n      }\n      return acc;\n    }, {\n      uiItems: [],\n      metadata: {}\n    });\n    dispatch(acSetUiItems({\n      dimensionId: dimension.id,\n      itemIds: uiItems\n    }, metadata));\n  };\n  const onSegmentedControlChange = _ref2 => {\n    let {\n      value\n    } = _ref2;\n    if (value !== entryMethod) {\n      setEntryMethod(value);\n      updatePeriodDimensionItems([]);\n    }\n  };\n  return dimension ? /*#__PURE__*/React.createElement(DimensionModal, {\n    dataTest: \"period-dimension-modal\",\n    isInLayout: isInLayout,\n    onClose: onClose,\n    title: dimension.name\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.navigation\n  }, /*#__PURE__*/React.createElement(SegmentedControl, {\n    options: [{\n      label: i18n.t('Choose from presets'),\n      value: OPTION_PRESETS\n    }, {\n      label: i18n.t('Define start - end dates'),\n      value: OPTION_START_END_DATES\n    }],\n    selected: entryMethod,\n    onChange: onSegmentedControlChange\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.entry\n  }, entryMethod === OPTION_PRESETS && /*#__PURE__*/React.createElement(BasePeriodDimension, {\n    selectedPeriods: selectedIds.map(id => ({\n      id,\n      name: getNameFromMetadata(id)\n    })),\n    onSelect: _ref3 => {\n      let {\n        items\n      } = _ref3;\n      return updatePeriodDimensionItems(items);\n    },\n    excludedPeriodTypes: excludedPeriodTypes\n  }), entryMethod === OPTION_START_END_DATES && /*#__PURE__*/React.createElement(StartEndDate, {\n    value: getStartEndDate(selectedIds[0] || ''),\n    setValue: value => {\n      if (!value && selectedIds.length) {\n        updatePeriodDimensionItems([]);\n      } else if (value && value !== selectedIds[0]) {\n        updatePeriodDimensionItems([{\n          id: value\n        }]);\n      }\n    }\n  }))) : null;\n};\nPeriodDimension.propTypes = {\n  dimension: PropTypes.object.isRequired,\n  onClose: PropTypes.func.isRequired\n};","import { PeriodDimension } from './PeriodDimension.js';\nexport default PeriodDimension;","import { DIMENSION_TYPE_CATEGORY, DIMENSION_TYPE_CATEGORY_OPTION_GROUP_SET, DIMENSION_TYPE_ORGANISATION_UNIT, DIMENSION_TYPE_PERIOD, DIMENSION_TYPE_ORGANISATION_UNIT_GROUP_SET } from '@dhis2/analytics';\nimport React from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { acSetUiOpenDimensionModal } from '../../actions/ui.js';\nimport { DIMENSION_TYPE_STATUS } from '../../modules/dimensionConstants.js';\nimport { sGetMetadata } from '../../reducers/metadata.js';\nimport { sGetUiActiveModalDialog } from '../../reducers/ui.js';\nimport ConditionsManager from './Conditions/ConditionsManager.js';\nimport DynamicDimension from './DynamicDimension.js';\nimport FixedDimension from './FixedDimension.js';\nimport PeriodDimension from './PeriodDimension/index.js';\nconst DialogManager = () => {\n  const dispatch = useDispatch();\n  const dimension = useSelector(state => sGetMetadata(state)[sGetUiActiveModalDialog(state)]);\n  const onClose = () => dispatch(acSetUiOpenDimensionModal(null));\n  if (!(dimension !== null && dimension !== void 0 && dimension.id)) {\n    return null;\n  }\n  switch (dimension.dimensionType) {\n    case DIMENSION_TYPE_CATEGORY:\n    case DIMENSION_TYPE_CATEGORY_OPTION_GROUP_SET:\n    case DIMENSION_TYPE_ORGANISATION_UNIT_GROUP_SET:\n      return /*#__PURE__*/React.createElement(DynamicDimension, {\n        dimension: dimension,\n        onClose: onClose\n      });\n    case DIMENSION_TYPE_PERIOD:\n      return /*#__PURE__*/React.createElement(PeriodDimension, {\n        dimension: dimension,\n        onClose: onClose\n      });\n    case DIMENSION_TYPE_STATUS:\n    case DIMENSION_TYPE_ORGANISATION_UNIT:\n      return /*#__PURE__*/React.createElement(FixedDimension, {\n        dimension: dimension,\n        onClose: onClose\n      });\n    default:\n      return /*#__PURE__*/React.createElement(ConditionsManager, {\n        dimension: dimension,\n        onClose: onClose\n      });\n  }\n};\nexport default DialogManager;","// extracted by mini-css-extract-plugin\nexport default {\"overlay\":\"DndContext_overlay__k0SuK\",\"dimensionItem\":\"DndContext_dimensionItem__efp5C\"};","import { DIMENSION_TYPE_PROGRAM_INDICATOR, DIMENSION_TYPE_CATEGORY_OPTION_GROUP_SET, DIMENSION_TYPE_DATA_ELEMENT, DIMENSION_TYPE_CATEGORY, DIMENSION_TYPE_PROGRAM_ATTRIBUTE, DIMENSION_TYPE_PERIOD, DIMENSION_TYPE_ORGANISATION_UNIT, DIMENSION_TYPE_ORGANISATION_UNIT_GROUP_SET } from '@dhis2/analytics';\nimport { IconDimensionData16, IconDimensionProgramIndicator16, IconFilter16, IconDimensionCategoryOptionGroupset16, IconDimensionOrgUnitGroupset16, IconDimensionOrgUnit16, IconCheckmarkCircle16, IconUser16, IconCalendar16 } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { DIMENSION_TYPE_STATUS, DIMENSION_TYPE_USER } from '../../../modules/dimensionConstants.js';\n\n// TODO: move this to ui-icons when Joe is back and has a chance to alter the design\nconst IconDimensionProgramAttribute16 = () => /*#__PURE__*/React.createElement(\"svg\", {\n  height: \"16\",\n  viewBox: \"0 0 16 16\",\n  width: \"16\",\n  xmlns: \"http://www.w3.org/2000/svg\"\n}, /*#__PURE__*/React.createElement(\"path\", {\n  d: \"m15 3 v10h-7v-10z m-1 1 v2h-5v-2z m0 3 v2h-5v-2z m0 3 v2h-5v-2z m-7 -6 h-5v7h5v1h-6v-10h6z\",\n  fill: \"#010101\",\n  fillRule: \"evenodd\"\n}));\nconst DIMENSION_TYPE_ICONS = {\n  /**PROGRAM**/\n  [DIMENSION_TYPE_DATA_ELEMENT]: IconDimensionData16,\n  [DIMENSION_TYPE_PROGRAM_ATTRIBUTE]: IconDimensionProgramAttribute16,\n  [DIMENSION_TYPE_PROGRAM_INDICATOR]: IconDimensionProgramIndicator16,\n  [DIMENSION_TYPE_CATEGORY]: IconFilter16,\n  [DIMENSION_TYPE_CATEGORY_OPTION_GROUP_SET]: IconDimensionCategoryOptionGroupset16,\n  /**YOURS**/\n  [DIMENSION_TYPE_ORGANISATION_UNIT_GROUP_SET]: IconDimensionOrgUnitGroupset16,\n  /**MAIN**/\n  [DIMENSION_TYPE_ORGANISATION_UNIT]: IconDimensionOrgUnit16,\n  [DIMENSION_TYPE_STATUS]: IconCheckmarkCircle16,\n  [DIMENSION_TYPE_USER]: IconUser16,\n  /**TIME**/\n  [DIMENSION_TYPE_PERIOD]: IconCalendar16\n};\n\n// Presentational component used by dnd - do not add redux or dnd functionality\n\nconst DimensionIcon = _ref => {\n  let {\n    dimensionType\n  } = _ref;\n  const Icon = dimensionType && DIMENSION_TYPE_ICONS[dimensionType];\n  return Icon ? /*#__PURE__*/React.createElement(Icon, null) : null;\n};\nDimensionIcon.propTypes = {\n  dimensionType: PropTypes.string\n};\nexport { DimensionIcon };","// extracted by mini-css-extract-plugin\nexport default {\"chip\":\"Chip_chip__DbhbE\",\"content\":\"Chip_content__YPuO6\",\"chipBase\":\"Chip_chipBase__7JkCW\",\"label\":\"Chip_label__F3+1y\",\"primary\":\"Chip_primary__wPrOm\",\"secondary\":\"Chip_secondary__66vP-\",\"items\":\"Chip_items__Y0xbN\",\"dragging\":\"Chip_dragging__XUtRu\",\"active\":\"Chip_active__u+um+\",\"insertBefore\":\"Chip_insertBefore__tyldo\",\"insertAfter\":\"Chip_insertAfter__OvhE0\",\"showBlank\":\"Chip_showBlank__4vGvW\",\"isLast\":\"Chip_isLast__+FnYF\",\"chipEmpty\":\"Chip_chipEmpty__aJrfr\",\"suffix\":\"Chip_suffix__JxDEb\",\"leftIcon\":\"Chip_leftIcon__9VZ-p\"};","import { AXIS_ID_FILTERS, DIMENSION_ID_ORGUNIT, DIMENSION_TYPE_PERIOD, VALUE_TYPE_BOOLEAN, VALUE_TYPE_TRUE_ONLY } from '@dhis2/analytics';\nimport i18n from '@dhis2/d2-i18n';\nimport cx from 'classnames';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { OUTPUT_TYPE_TRACKED_ENTITY } from '../../modules/visualization.js';\nimport { DimensionIcon } from '../MainSidebar/DimensionItem/DimensionIcon.js';\nimport styles from './styles/Chip.module.css';\nconst VALUE_TYPE_TRUE_ONLY_NUM_OPTIONS = 2;\nconst VALUE_TYPE_BOOLEAN_NUM_OPTIONS = 3;\n\n// Presentational component used by dnd - do not add redux or dnd functionality\n\nexport const ChipBase = _ref => {\n  let {\n    dimension,\n    conditionsLength,\n    itemsLength,\n    inputType,\n    axisId\n  } = _ref;\n  const {\n    id,\n    name,\n    dimensionType,\n    optionSet,\n    valueType,\n    suffix\n  } = dimension;\n  const getChipItems = () => {\n    if ((inputType !== OUTPUT_TYPE_TRACKED_ENTITY && id === DIMENSION_ID_ORGUNIT || dimensionType === DIMENSION_TYPE_PERIOD) && !itemsLength) {\n      return null;\n    }\n    const all = i18n.t('all');\n    if (!conditionsLength && !itemsLength && axisId !== AXIS_ID_FILTERS) {\n      return all;\n    }\n    if ((valueType === VALUE_TYPE_TRUE_ONLY && conditionsLength === VALUE_TYPE_TRUE_ONLY_NUM_OPTIONS || valueType === VALUE_TYPE_BOOLEAN && conditionsLength === VALUE_TYPE_BOOLEAN_NUM_OPTIONS) && axisId !== AXIS_ID_FILTERS) {\n      return all;\n    }\n    if (optionSet || itemsLength) {\n      return itemsLength || conditionsLength;\n    } else if (conditionsLength) {\n      return conditionsLength;\n    }\n  };\n  const chipItems = getChipItems();\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: cx(styles.chipBase)\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.leftIcon\n  }, /*#__PURE__*/React.createElement(DimensionIcon, {\n    dimensionType: dimensionType\n  })), /*#__PURE__*/React.createElement(\"span\", {\n    className: styles.label\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: styles.primary\n  }, name), suffix && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"span\", null, \",\"), /*#__PURE__*/React.createElement(\"span\", {\n    className: styles.secondary\n  }, suffix))), chipItems && /*#__PURE__*/React.createElement(\"span\", {\n    className: styles.items,\n    \"data-test\": \"chip-items\"\n  }, chipItems));\n};\nChipBase.propTypes = {\n  axisId: PropTypes.string,\n  conditionsLength: PropTypes.number,\n  dimension: PropTypes.shape({\n    dimensionType: PropTypes.string,\n    id: PropTypes.string,\n    name: PropTypes.string,\n    optionSet: PropTypes.string,\n    suffix: PropTypes.string,\n    valueType: PropTypes.string\n  }),\n  inputType: PropTypes.string,\n  itemsLength: PropTypes.number\n};","// extracted by mini-css-extract-plugin\nexport default {\"dimensionItem\":\"DimensionItemBase_dimensionItem__e6-XG\",\"disabled\":\"DimensionItemBase_disabled__9EVQd\",\"dragging\":\"DimensionItemBase_dragging__xLTMX\",\"selected\":\"DimensionItemBase_selected__msPZv\",\"icon\":\"DimensionItemBase_icon__a+p16\",\"label\":\"DimensionItemBase_label__x-cxT\",\"primary\":\"DimensionItemBase_primary__s4NYh\",\"iconAndLabelWrapper\":\"DimensionItemBase_iconAndLabelWrapper__wwq0Z\",\"secondary\":\"DimensionItemBase_secondary__VRjye\"};","import cx from 'classnames';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { DimensionIcon } from './DimensionIcon.js';\nimport styles from './DimensionItemBase.module.css';\n\n// Presentational component used by dnd - do not add redux or dnd functionality\n\nconst DimensionItemBase = _ref => {\n  let {\n    dragging,\n    name,\n    dimensionType,\n    selected,\n    disabled,\n    stageName,\n    contextMenu,\n    onClick,\n    dataTest\n  } = _ref;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: cx(styles.dimensionItem, {\n      [styles.selected]: selected,\n      [styles.disabled]: disabled,\n      [styles.dragging]: dragging\n    }),\n    onClick: onClick,\n    \"data-test\": dataTest\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.iconAndLabelWrapper\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.icon\n  }, /*#__PURE__*/React.createElement(DimensionIcon, {\n    dimensionType: dimensionType\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.label\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: styles.primary\n  }, name), stageName && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"span\", null, \", \"), /*#__PURE__*/React.createElement(\"span\", {\n    className: styles.secondary\n  }, stageName)))), contextMenu && contextMenu);\n};\nDimensionItemBase.propTypes = {\n  name: PropTypes.string.isRequired,\n  contextMenu: PropTypes.node,\n  dataTest: PropTypes.string,\n  dimensionType: PropTypes.string,\n  disabled: PropTypes.bool,\n  dragging: PropTypes.bool,\n  selected: PropTypes.bool,\n  stageName: PropTypes.string,\n  onClick: PropTypes.func\n};\nexport { DimensionItemBase };","function _extends() { return _extends = Object.assign ? Object.assign.bind() : function (n) { for (var e = 1; e < arguments.length; e++) { var t = arguments[e]; for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]); } return n; }, _extends.apply(null, arguments); }\nimport { AXIS_ID_COLUMNS, AXIS_ID_FILTERS } from '@dhis2/analytics';\nimport { DndContext, DragOverlay, useSensor, useSensors, PointerSensor } from '@dnd-kit/core';\nimport cx from 'classnames';\nimport PropTypes from 'prop-types';\nimport React, { useState } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { acAddMetadata } from '../actions/metadata.js';\nimport { acAddUiLayoutDimensions, acSetUiLayout, acSetUiDraggingId } from '../actions/ui.js';\nimport { getConditionsTexts } from '../modules/conditions.js';\nimport { extractDimensionIdParts } from '../modules/dimensionId.js';\nimport { sGetMetadata } from '../reducers/metadata.js';\nimport { sGetUiLayout, sGetUiItemsByDimension, sGetUiDraggingId, sGetUiConditionsByDimension, sGetUiOptions, sGetUiInputType } from '../reducers/ui.js';\nimport styles from './DndContext.module.css';\nimport { ChipBase } from './Layout/ChipBase.js';\nimport chipStyles from './Layout/styles/Chip.module.css';\nimport { DimensionItemBase } from './MainSidebar/DimensionItem/DimensionItemBase.js';\nconst FIRST_POSITION = 0;\nconst LAST_POSITION = -1;\nconst DIMENSION_PANEL_SOURCE = 'Sortable';\nexport const getDropzoneId = (axisId, position) => `${axisId}-${position}`;\nexport const FIRST = 'first';\nexport const LAST = 'last';\nconst activateAt15pixels = {\n  activationConstraint: {\n    distance: 15\n  }\n};\nfunction getIntersectionRatio(entry, target) {\n  const top = Math.max(target.top, entry.top);\n  const left = Math.max(target.left, entry.left);\n  const right = Math.min(target.left + target.width, entry.left + entry.width);\n  const bottom = Math.min(target.top + target.height, entry.top + entry.height);\n  const width = right - left;\n  const height = bottom - top;\n  if (left < right && top < bottom) {\n    const targetArea = target.width * target.height;\n    const entryArea = entry.width * entry.height;\n    const intersectionArea = width * height;\n    const intersectionRatio = intersectionArea / (targetArea + entryArea - intersectionArea);\n    return Number(intersectionRatio.toFixed(4));\n  } // Rectangles do not overlap, or overlap has an area of zero (edge/corner overlap)\n\n  return 0;\n}\nfunction sortCollisionsDesc(_ref, _ref2) {\n  let {\n    data: {\n      value: a\n    }\n  } = _ref;\n  let {\n    data: {\n      value: b\n    }\n  } = _ref2;\n  return b - a;\n}\nconst rectIntersectionCustom = _ref3 => {\n  let {\n    pointerCoordinates,\n    droppableContainers\n  } = _ref3;\n  // create a rect around the pointerCoords for calculating the intersection\n  const pointerRect = {\n    width: 80,\n    height: 40,\n    top: pointerCoordinates.y - 20,\n    bottom: pointerCoordinates.y + 20,\n    left: pointerCoordinates.x - 40,\n    right: pointerCoordinates.x + 40\n  };\n  const collisions = [];\n  for (const droppableContainer of droppableContainers) {\n    const {\n      id,\n      rect: {\n        current: rect\n      }\n    } = droppableContainer;\n    if (rect) {\n      const intersectionRatio = getIntersectionRatio(rect, pointerRect);\n      if (intersectionRatio > 0) {\n        collisions.push({\n          id,\n          data: {\n            droppableContainer,\n            value: intersectionRatio\n          }\n        });\n      }\n    }\n  }\n  return collisions.sort(sortCollisionsDesc);\n};\nconst getIdFromDraggingId = draggingId => {\n  const [id] = draggingId.split('-').reverse();\n  return id;\n};\nconst OuterDndContext = _ref4 => {\n  let {\n    children\n  } = _ref4;\n  const [sourceAxis, setSourceAxis] = useState(null);\n  const draggingId = useSelector(sGetUiDraggingId);\n  const id = draggingId ? getIdFromDraggingId(draggingId) : null;\n  const layout = useSelector(sGetUiLayout);\n  const inputType = useSelector(sGetUiInputType);\n  const metadata = useSelector(sGetMetadata);\n  const chipItems = useSelector(state => sGetUiItemsByDimension(state, id));\n  const chipConditions = useSelector(state => sGetUiConditionsByDimension(state, id));\n  const {\n    digitGroupSeparator\n  } = useSelector(sGetUiOptions);\n\n  // Wait 15px movement before starting drag, so that click event isn't overridden\n  const sensor = useSensor(PointerSensor, activateAt15pixels);\n  const sensors = useSensors(sensor);\n  const dispatch = useDispatch();\n  const getDragOverlay = () => {\n    var _chipConditions$condi;\n    if (!id) {\n      return null;\n    }\n\n    // TODO - using the rawDimensionId instead of dimensionId\n    // is a temporary workaround\n    // until the backend is updated to return programStageId.dimensionId\n    // in analytics response.metadata.items\n    let dimension;\n    if (metadata[id]) {\n      dimension = metadata[id];\n    } else {\n      const {\n        dimensionId\n      } = extractDimensionIdParts(id);\n      dimension = metadata[dimensionId];\n    }\n    if (!dimension) {\n      return null;\n    }\n    if (sourceAxis === DIMENSION_PANEL_SOURCE) {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: cx(styles.overlay, styles.dimensionItem)\n      }, /*#__PURE__*/React.createElement(DimensionItemBase, _extends({}, dimension, {\n        dragging: true\n      })));\n    }\n    const conditionsTexts = getConditionsTexts({\n      conditions: chipConditions,\n      metadata,\n      dimension,\n      formatValueOptions: {\n        digitGroupSeparator,\n        skipRounding: false\n      }\n    });\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: cx(chipStyles.chip, chipStyles.dragging, styles.overlay, {\n        [chipStyles.chipEmpty]: sourceAxis === AXIS_ID_FILTERS && !chipItems.length && !((_chipConditions$condi = chipConditions.condition) !== null && _chipConditions$condi !== void 0 && _chipConditions$condi.length) && !chipConditions.legendSet\n      })\n    }, /*#__PURE__*/React.createElement(ChipBase, {\n      dimension: dimension,\n      conditionsLength: conditionsTexts.length,\n      itemsLength: chipItems.length,\n      inputType: inputType,\n      axisId: sourceAxis\n    }));\n  };\n  const rearrangeLayoutDimensions = _ref5 => {\n    let {\n      sourceAxisId,\n      sourceIndex,\n      destinationAxisId,\n      destinationIndex\n    } = _ref5;\n    const destItems = Array.from(layout[destinationAxisId]);\n    const newIndex = destinationIndex !== LAST_POSITION ? destinationIndex : destItems.length;\n    const sourceList = Array.from(layout[sourceAxisId]);\n    const [moved] = sourceList.splice(sourceIndex, 1);\n    if (sourceAxisId === destinationAxisId) {\n      sourceList.splice(newIndex, 0, moved);\n      dispatch(acSetUiLayout({\n        ...layout,\n        [sourceAxisId]: sourceList\n      }));\n    } else {\n      dispatch(acAddUiLayoutDimensions({\n        [moved]: {\n          axisId: destinationAxisId,\n          index: newIndex\n        }\n      }));\n    }\n  };\n  const addDimensionToLayout = _ref6 => {\n    let {\n      axisId,\n      index,\n      dimensionId\n    } = _ref6;\n    const sourceList = Array.from(layout[axisId]);\n    const idx = index !== LAST_POSITION ? index : sourceList.length;\n    dispatch(acAddUiLayoutDimensions({\n      [dimensionId]: {\n        axisId,\n        index: idx\n      }\n    }));\n    //TODO: Add onDropWithoutItems\n  };\n  const onDragStart = _ref7 => {\n    let {\n      active\n    } = _ref7;\n    const id = getIdFromDraggingId(active.id);\n    setSourceAxis(active.data.current.sortable.containerId);\n    dispatch(acSetUiDraggingId(active.id));\n    dispatch(acAddMetadata({\n      [id]: {\n        id,\n        name: active.data.current.name,\n        dimensionType: active.data.current.dimensionType,\n        valueType: active.data.current.valueType,\n        optionSet: active.data.current.optionSet\n      }\n    }));\n  };\n  const onDragCancel = () => {\n    dispatch(acSetUiDraggingId(null));\n  };\n  const onDragEnd = result => {\n    var _over$data, _over$data$current, _over$data$current$so, _over$data$current2, _over$data$current2$s, _over$data$current3, _over$data$current3$s;\n    const {\n      active,\n      over\n    } = result;\n    if (!(over !== null && over !== void 0 && over.id) || (over === null || over === void 0 ? void 0 : (_over$data = over.data) === null || _over$data === void 0 ? void 0 : (_over$data$current = _over$data.current) === null || _over$data$current === void 0 ? void 0 : (_over$data$current$so = _over$data$current.sortable) === null || _over$data$current$so === void 0 ? void 0 : _over$data$current$so.containerId) === DIMENSION_PANEL_SOURCE) {\n      // dropped over non-droppable or over dimension panel\n      onDragCancel();\n      return;\n    }\n    const sourceAxisId = active.data.current.sortable.containerId;\n    const destinationAxisId = (((_over$data$current2 = over.data.current) === null || _over$data$current2 === void 0 ? void 0 : (_over$data$current2$s = _over$data$current2.sortable) === null || _over$data$current2$s === void 0 ? void 0 : _over$data$current2$s.containerId) || over.id).split('-')[0];\n    let destinationIndex = ((_over$data$current3 = over.data.current) === null || _over$data$current3 === void 0 ? void 0 : (_over$data$current3$s = _over$data$current3.sortable) === null || _over$data$current3$s === void 0 ? void 0 : _over$data$current3$s.index) || FIRST_POSITION;\n    const isDroppingInFirstPosition = [`${AXIS_ID_COLUMNS}-${FIRST}`, `${AXIS_ID_FILTERS}-${FIRST}`].includes(over.id);\n    const isDroppingInLastPosition = [`${AXIS_ID_COLUMNS}-${LAST}`, `${AXIS_ID_FILTERS}-${LAST}`].includes(over.id);\n    if (sourceAxisId === DIMENSION_PANEL_SOURCE) {\n      if (isDroppingInFirstPosition) {\n        destinationIndex = FIRST_POSITION;\n      } else if (isDroppingInLastPosition) {\n        destinationIndex = LAST_POSITION;\n      } else {\n        ++destinationIndex;\n      }\n      addDimensionToLayout({\n        axisId: destinationAxisId,\n        index: destinationIndex,\n        dimensionId: getIdFromDraggingId(active.id)\n      });\n    } else {\n      const sourceIndex = active.data.current.sortable.index;\n      if (sourceAxisId !== destinationAxisId) {\n        ++destinationIndex;\n      }\n      if (isDroppingInFirstPosition) {\n        destinationIndex = FIRST_POSITION;\n      } else if (isDroppingInLastPosition) {\n        destinationIndex = LAST_POSITION;\n      }\n      rearrangeLayoutDimensions({\n        sourceAxisId,\n        sourceIndex,\n        destinationAxisId,\n        destinationIndex\n      });\n    }\n    onDragCancel();\n  };\n  return /*#__PURE__*/React.createElement(DndContext, {\n    collisionDetection: rectIntersectionCustom,\n    onDragStart: onDragStart,\n    onDragEnd: onDragEnd,\n    onDragCancel: onDragCancel,\n    sensors: sensors\n  }, children, /*#__PURE__*/React.createElement(DragOverlay, {\n    dropAnimation: null\n  }, getDragOverlay()));\n};\nOuterDndContext.propTypes = {\n  children: PropTypes.node\n};\nexport default OuterDndContext;","export const DOWNLOAD_TYPE_PLAIN = 'plain';\nexport const DOWNLOAD_TYPE_TABLE = 'table';\nexport const FILE_FORMAT_CSV = 'csv';\nexport const FILE_FORMAT_HTML_CSS = 'html+css';\nexport const FILE_FORMAT_JSON = 'json';\nexport const FILE_FORMAT_XLS = 'xls';\nexport const FILE_FORMAT_XML = 'xml';\nexport const ID_SCHEME_UID = 'UID';\nexport const ID_SCHEME_CODE = 'CODE';\nexport const ID_SCHEME_NAME = 'NAME';","function _extends() { return _extends = Object.assign ? Object.assign.bind() : function (n) { for (var e = 1; e < arguments.length; e++) { var t = arguments[e]; for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]); } return n; }, _extends.apply(null, arguments); }\nimport { HoverMenuListItem } from '@dhis2/analytics';\nimport i18n from '@dhis2/d2-i18n';\nimport { MenuItem, MenuSectionHeader } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { DOWNLOAD_TYPE_PLAIN, ID_SCHEME_UID, ID_SCHEME_CODE, ID_SCHEME_NAME } from './constants.js';\nexport const PlainDataSourceSubMenu = _ref => {\n  let {\n    download,\n    hoverable,\n    format,\n    label,\n    ...menuItemProps\n  } = _ref;\n  const MenuItemComponent = hoverable ? HoverMenuListItem : MenuItem;\n  return /*#__PURE__*/React.createElement(MenuItemComponent, _extends({\n    label: label\n  }, menuItemProps), /*#__PURE__*/React.createElement(MenuSectionHeader, {\n    label: i18n.t('Metadata ID scheme'),\n    hideDivider: true,\n    dense: hoverable\n  }), /*#__PURE__*/React.createElement(MenuItemComponent, {\n    label: i18n.t('ID'),\n    onClick: () => download(DOWNLOAD_TYPE_PLAIN, format, ID_SCHEME_UID)\n  }), /*#__PURE__*/React.createElement(MenuItemComponent, {\n    label: i18n.t('Code'),\n    onClick: () => download(DOWNLOAD_TYPE_PLAIN, format, ID_SCHEME_CODE)\n  }), /*#__PURE__*/React.createElement(MenuItemComponent, {\n    label: i18n.t('Name'),\n    onClick: () => download(DOWNLOAD_TYPE_PLAIN, format, ID_SCHEME_NAME)\n  }));\n};\nPlainDataSourceSubMenu.propTypes = {\n  download: PropTypes.func.isRequired,\n  format: PropTypes.string.isRequired,\n  label: PropTypes.string.isRequired,\n  hoverable: PropTypes.bool\n};","import { HoverMenuList, HoverMenuListItem } from '@dhis2/analytics';\nimport i18n from '@dhis2/d2-i18n';\nimport { FlyoutMenu, MenuItem, MenuSectionHeader } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { DOWNLOAD_TYPE_TABLE, FILE_FORMAT_HTML_CSS, FILE_FORMAT_CSV, FILE_FORMAT_XLS, FILE_FORMAT_JSON, FILE_FORMAT_XML } from './constants.js';\nimport { PlainDataSourceSubMenu } from './PlainDataSourceSubMenu.js';\nconst DownloadMenu = _ref => {\n  let {\n    download,\n    hoverable\n  } = _ref;\n  const MenuComponent = hoverable ? HoverMenuList : FlyoutMenu;\n  const MenuItemComponent = hoverable ? HoverMenuListItem : MenuItem;\n  return /*#__PURE__*/React.createElement(MenuComponent, null, /*#__PURE__*/React.createElement(MenuSectionHeader, {\n    label: i18n.t('HTML'),\n    hideDivider: true,\n    dense: hoverable\n  }), /*#__PURE__*/React.createElement(MenuItemComponent, {\n    label: i18n.t('HTML+CSS (.html+css)'),\n    onClick: () => download(DOWNLOAD_TYPE_TABLE, FILE_FORMAT_HTML_CSS),\n    className: \"push-analytics-download-as-html-css-menu-item\"\n  }), /*#__PURE__*/React.createElement(MenuSectionHeader, {\n    label: i18n.t('Plain data source'),\n    dense: hoverable\n  }), /*#__PURE__*/React.createElement(PlainDataSourceSubMenu, {\n    hoverable: hoverable,\n    download: download,\n    label: i18n.t('JSON'),\n    format: FILE_FORMAT_JSON\n  }), /*#__PURE__*/React.createElement(PlainDataSourceSubMenu, {\n    hoverable: hoverable,\n    download: download,\n    label: i18n.t('XML'),\n    format: FILE_FORMAT_XML\n  }), /*#__PURE__*/React.createElement(PlainDataSourceSubMenu, {\n    hoverable: hoverable,\n    download: download,\n    label: i18n.t('Microsoft Excel'),\n    format: FILE_FORMAT_XLS\n  }), /*#__PURE__*/React.createElement(PlainDataSourceSubMenu, {\n    hoverable: hoverable,\n    download: download,\n    label: i18n.t('CSV'),\n    format: FILE_FORMAT_CSV\n  }));\n};\nDownloadMenu.propTypes = {\n  download: PropTypes.func.isRequired,\n  hoverable: PropTypes.bool\n};\nexport { DownloadMenu };","import { Analytics } from '@dhis2/analytics';\nimport { useConfig, useDataEngine } from '@dhis2/app-runtime';\nimport { useCallback } from 'react';\nimport { useSelector } from 'react-redux';\nimport { validateLineListLayout } from '../../modules/layoutValidation.js';\nimport { isAoWithTimeDimension } from '../../modules/timeDimensions.js';\nimport { getSortingFromVisualization } from '../../modules/ui.js';\nimport { OUTPUT_TYPE_EVENT, OUTPUT_TYPE_TRACKED_ENTITY } from '../../modules/visualization.js';\nimport { sGetCurrent } from '../../reducers/current.js';\nimport { getAdaptedVisualization, getAnalyticsEndpoint } from '../Visualization/analyticsQueryTools.js';\nimport { DOWNLOAD_TYPE_PLAIN, ID_SCHEME_NAME, DOWNLOAD_TYPE_TABLE, FILE_FORMAT_HTML_CSS, FILE_FORMAT_CSV, FILE_FORMAT_XLS } from './constants.js';\nconst useDownload = relativePeriodDate => {\n  const current = useSelector(sGetCurrent);\n  const {\n    baseUrl\n  } = useConfig();\n  const dataEngine = useDataEngine();\n  const analyticsEngine = Analytics.getAnalytics(dataEngine);\n  const download = useCallback((type, format, idScheme) => {\n    if (!current) {\n      return false;\n    }\n    let target = '_top';\n    const {\n      adaptedVisualization,\n      headers,\n      parameters\n    } = getAdaptedVisualization(current);\n    let req = new analyticsEngine.request().withPath(`${getAnalyticsEndpoint(current.outputType)}/query`).withFormat(format);\n    switch (current.outputType) {\n      case OUTPUT_TYPE_TRACKED_ENTITY:\n        req = req.withTrackedEntityType(current.trackedEntityType.id);\n        break;\n      default:\n        req = req.withProgram(current.program.id).withOutputType(current.outputType);\n        break;\n    }\n    if (current.outputType === OUTPUT_TYPE_EVENT) {\n      var _current$programStage;\n      req = req.withStage((_current$programStage = current.programStage) === null || _current$programStage === void 0 ? void 0 : _current$programStage.id);\n    }\n    switch (type) {\n      case DOWNLOAD_TYPE_TABLE:\n        req = req.fromVisualization(adaptedVisualization).withTableLayout().withColumns(current.columns.filter(column => column.dimension !== 'dy').map(column => column.dimension).join(';')).withRows(current.rows.filter(row => row.dimension !== 'dy').map(row => row.dimension).join(';')).withParameters({\n          ...parameters,\n          headers,\n          dataIdScheme: ID_SCHEME_NAME,\n          paging: false\n        }); // only for LL\n\n        //TODO\n        //displayPropertyName\n        //completedOnly (from options)\n        //hideEmptyColumns (from options)\n        //hideEmptyRows (from options)\n        //showHierarchy (from options)\n        //startDate\n        //endDate\n        target = format === FILE_FORMAT_HTML_CSS ? '_blank' : '_top';\n        break;\n      case DOWNLOAD_TYPE_PLAIN:\n        req = req\n        // Perhaps the 2nd arg `passFilterAsDimension` should be false for the advanced submenu?\n        .fromVisualization(adaptedVisualization, true).withParameters({\n          ...parameters,\n          headers,\n          paging: false\n        });\n\n        // fix option set option names\n        if (idScheme === ID_SCHEME_NAME) {\n          req = req.withParameters({\n            dataIdScheme: idScheme\n          });\n        } else {\n          req = req.withOutputIdScheme(idScheme);\n        }\n\n        // TODO options\n        // startDate\n        // endDate\n        // displayProperty\n        // completedOnly\n        // hierarchyMeta (from options)\n        // outputType\n        // programStatus\n        // eventStatus\n        // limit\n        // sortOrder\n        // value\n        // aggregationType\n        // timeField\n        // orgUnitField\n        // collapsedDataDimensions\n        // useOrgUnit (URL)\n        // relativePeriodDate\n        target = [FILE_FORMAT_CSV, FILE_FORMAT_XLS].includes(format) ? '_top' : '_blank';\n        break;\n    }\n\n    // TODO add common parameters\n    // if there are for both event/enrollment and PT/LL\n\n    if (relativePeriodDate && isAoWithTimeDimension(current)) {\n      req = req.withRelativePeriodDate(relativePeriodDate);\n    }\n    const sorting = getSortingFromVisualization(current);\n    if (sorting) {\n      switch (sorting.direction) {\n        case 'asc':\n          {\n            req = req.withAsc(sorting.dimension);\n            break;\n          }\n        case 'desc':\n          {\n            req = req.withDesc(sorting.dimension);\n            break;\n          }\n      }\n    }\n    const url = new URL(`${baseUrl}/api/${req.buildUrl()}`, `${window.location.origin}${window.location.pathname}`);\n    Object.entries(req.buildQuery()).forEach(_ref => {\n      let [key, value] = _ref;\n      return url.searchParams.append(key, value);\n    });\n    window.open(url, target);\n  }, [current, relativePeriodDate, analyticsEngine, baseUrl]);\n  return {\n    isDownloadDisabled: !validateLineListLayout(current, {\n      dryRun: true\n    }),\n    download\n  };\n};\nexport { useDownload };","import { HoverMenuDropdown } from '@dhis2/analytics';\nimport i18n from '@dhis2/d2-i18n';\nimport React from 'react';\nimport { DownloadMenu } from './DownloadMenu.js';\nimport { useDownload } from './useDownload.js';\nconst ToolbarDownloadDropdown = () => {\n  const {\n    isDownloadDisabled,\n    download\n  } = useDownload();\n  return /*#__PURE__*/React.createElement(HoverMenuDropdown, {\n    label: i18n.t('Download'),\n    disabled: isDownloadDisabled,\n    className: \"push-analytics-download-dropdown-menu-button\"\n  }, /*#__PURE__*/React.createElement(DownloadMenu, {\n    download: download,\n    hoverable: true\n  }));\n};\nexport { ToolbarDownloadDropdown };","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"ModalDownloadDropdown_container__WZAFX\"};","import i18n from '@dhis2/d2-i18n';\nimport { DropdownButton } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React, { useState, useCallback } from 'react';\nimport { DownloadMenu } from './DownloadMenu.js';\nimport styles from './ModalDownloadDropdown.module.css';\nimport { useDownload } from './useDownload.js';\nconst ModalDownloadDropdown = _ref => {\n  let {\n    relativePeriodDate\n  } = _ref;\n  const {\n    isDownloadDisabled,\n    download\n  } = useDownload(relativePeriodDate);\n  const [isOpen, setIsOpen] = useState(false);\n  const toggleOpen = useCallback(() => {\n    setIsOpen(currentIsOpen => !currentIsOpen);\n  }, []);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.container\n  }, /*#__PURE__*/React.createElement(DropdownButton, {\n    component: /*#__PURE__*/React.createElement(DownloadMenu, {\n      download: download\n    }),\n    disabled: isDownloadDisabled,\n    onClick: toggleOpen,\n    open: isOpen,\n    secondary: true,\n    small: true\n  }, i18n.t('Download data from this date')));\n};\nModalDownloadDropdown.propTypes = {\n  relativePeriodDate: PropTypes.string\n};\nexport { ModalDownloadDropdown };","import { formatValue, VALUE_TYPE_AGE, VALUE_TYPE_DATE, VALUE_TYPE_DATETIME, VALUE_TYPE_TEXT } from '@dhis2/analytics';\nimport i18n from '@dhis2/d2-i18n';\nimport moment from 'moment';\nimport { DIMENSION_ID_EVENT_STATUS, DIMENSION_ID_PROGRAM_STATUS, DIMENSION_ID_EVENT_DATE, DIMENSION_ID_ENROLLMENT_DATE, DIMENSION_ID_INCIDENT_DATE, DIMENSION_ID_SCHEDULED_DATE, DIMENSION_ID_LAST_UPDATED } from './dimensionConstants.js';\nimport { extractDimensionIdParts } from './dimensionId.js';\nimport { getTimeDimensions } from './timeDimensions.js';\nimport { headersMap, getDimensionIdFromHeaderName, getStatusNames } from './visualization.js';\nconst timeDimensions = getTimeDimensions();\nconst getFormattedCellValue = _ref => {\n  let {\n    value,\n    header = {},\n    visualization = {}\n  } = _ref;\n  if (header.name && [headersMap[DIMENSION_ID_EVENT_STATUS], headersMap[DIMENSION_ID_PROGRAM_STATUS]].includes(extractDimensionIdParts(header.name, visualization.type).dimensionId)) {\n    return getStatusNames()[value] || value;\n  }\n  let valueType = header.valueType;\n  if ([VALUE_TYPE_DATE, VALUE_TYPE_DATETIME].includes(valueType)) {\n    const dimensionId = extractDimensionIdParts(header.name, visualization.type).dimensionId;\n    if (header.name && [headersMap[DIMENSION_ID_EVENT_DATE], headersMap[DIMENSION_ID_ENROLLMENT_DATE], headersMap[DIMENSION_ID_INCIDENT_DATE], headersMap[DIMENSION_ID_SCHEDULED_DATE]].includes(dimensionId)) {\n      // override valueType for time dimensions to format the value as date (DHIS2-17855)\n      valueType = timeDimensions[getDimensionIdFromHeaderName(dimensionId, visualization)].formatType;\n    }\n    return value && moment(value).format(header.name === headersMap[DIMENSION_ID_LAST_UPDATED] || valueType === VALUE_TYPE_DATETIME ? 'yyyy-MM-DD HH:mm' : 'yyyy-MM-DD');\n  } else if (valueType === VALUE_TYPE_AGE) {\n    return value && moment(value).format('yyyy-MM-DD');\n  } else {\n    return formatValue(value, valueType || VALUE_TYPE_TEXT, header.optionSet ? {} : {\n      digitGroupSeparator: visualization.digitGroupSeparator,\n      skipRounding: false\n    });\n  }\n};\nconst getHeaderText = function () {\n  let {\n    stageOffset,\n    column\n  } = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  if (!column) {\n    return '';\n  }\n  if (Number.isInteger(stageOffset)) {\n    let repetitionSuffix;\n    if (stageOffset === 0) {\n      repetitionSuffix = i18n.t('most recent');\n    } else if (stageOffset === 1) {\n      repetitionSuffix = i18n.t('oldest');\n    } else if (stageOffset > 1) {\n      repetitionSuffix = i18n.t('oldest {{repeatEventIndex}}', {\n        repeatEventIndex: `+${stageOffset - 1}`\n      });\n    } else if (stageOffset < 0) {\n      repetitionSuffix = i18n.t('most recent {{repeatEventIndex}}', {\n        repeatEventIndex: stageOffset\n      });\n    }\n    return `${column} (${repetitionSuffix})`;\n  }\n  return column;\n};\nexport { getFormattedCellValue, getHeaderText };","// extracted by mini-css-extract-plugin\nexport default {\"legendKeyContainer\":\"Visualization_legendKeyContainer__bPsax\",\"legendKeyWrapper\":\"Visualization_legendKeyWrapper__jXSK5\",\"legendKey\":\"Visualization_legendKey__v1jyd\",\"legendKeyScrollbox\":\"Visualization_legendKeyScrollbox__dF-s2\",\"legendKeyToggle\":\"Visualization_legendKeyToggle__qAYr9\",\"pluginContainer\":\"Visualization_pluginContainer__SxFq8\",\"fetchContainer\":\"Visualization_fetchContainer__WUbO6\",\"fetching\":\"Visualization_fetching__ELkxS\",\"fetchIndicator\":\"Visualization_fetchIndicator__ZltpH\",\"rotation\":\"Visualization_rotation__p4UHC\",\"visualizationContainer\":\"Visualization_visualizationContainer__zF1N4\",\"noTimeDimensionWarning\":\"Visualization_noTimeDimensionWarning__yMcwf\",\"stickyFooter\":\"Visualization_stickyFooter__XP-zH\",\"footerCell\":\"Visualization_footerCell__J7zOM\",\"stickyNavigation\":\"Visualization_stickyNavigation__ppd2Z\",\"dataTable\":\"Visualization_dataTable__gwm8Q\",\"headerCell\":\"Visualization_headerCell__+57Qy\",\"dimensionModalHandler\":\"Visualization_dimensionModalHandler__QcMlE\",\"fontSizeLarge\":\"Visualization_fontSizeLarge__bSTtF\",\"fontSizeNormal\":\"Visualization_fontSizeNormal__7-JvC\",\"fontSizeSmall\":\"Visualization_fontSizeSmall__Z8A6P\",\"sizeComfortable\":\"Visualization_sizeComfortable__b8Giy\",\"sizeNormal\":\"Visualization_sizeNormal__DLFas\",\"sizeCompact\":\"Visualization_sizeCompact__dIRWQ\",\"cell\":\"Visualization_cell__1p5tp\",\"emptyCell\":\"Visualization_emptyCell__oI8F3\",\"nowrap\":\"Visualization_nowrap__zu2ED\",\"undefinedCell\":\"Visualization_undefinedCell__s9pwt\",\"error\":\"Visualization_error__IfG6y\"};","import { DIMENSION_TYPE_DATA_ELEMENT, DIMENSION_TYPE_ORGANISATION_UNIT, DIMENSION_TYPE_PERIOD } from '@dhis2/analytics';\nimport { DIMENSION_TYPE_STATUS } from './dimensionConstants.js';\nimport { extractDimensionIdParts } from './dimensionId.js';\nimport { OUTPUT_TYPE_ENROLLMENT, OUTPUT_TYPE_TRACKED_ENTITY } from './visualization.js';\nexport const getDimensionsWithSuffix = _ref => {\n  let {\n    dimensionIds,\n    metadata,\n    inputType\n  } = _ref;\n  const dimensions = dimensionIds.map(id => {\n    const {\n      dimensionId,\n      programStageId,\n      programId\n    } = extractDimensionIdParts(id, inputType);\n    const dimension = {\n      ...metadata[id],\n      dimensionId,\n      programStageId,\n      programId\n    };\n    if (!dimension.id) {\n      dimension.id = id;\n    }\n    return dimension;\n  });\n  if (![OUTPUT_TYPE_ENROLLMENT, OUTPUT_TYPE_TRACKED_ENTITY].includes(inputType)) {\n    return dimensions;\n  }\n  return dimensions.map(dimension => {\n    if ([DIMENSION_TYPE_DATA_ELEMENT, DIMENSION_TYPE_PERIOD].includes(dimension.dimensionType || dimension.dimensionItemType)) {\n      const duplicates = dimensions.filter(d => d.dimensionId === dimension.dimensionId && d !== dimension && (dimension.programId && d.programId || dimension.programStageId && d.programStageId));\n      if (duplicates.length > 0) {\n        const sameProgramId = duplicates.find(dup => dup.programId === dimension.programId);\n        const thirdPartyDuplicates = duplicates.filter(dup => dup.programId !== dimension.programId).find(dpid => duplicates.find(dup => dup.programStageId !== dpid.programStageId && dup.programId === dpid.programId));\n        if (sameProgramId || thirdPartyDuplicates) {\n          var _metadata$dimension$p;\n          dimension.suffix = (_metadata$dimension$p = metadata[dimension.programStageId]) === null || _metadata$dimension$p === void 0 ? void 0 : _metadata$dimension$p.name;\n        } else {\n          var _metadata$dimension$p2;\n          dimension.suffix = (_metadata$dimension$p2 = metadata[dimension.programId]) === null || _metadata$dimension$p2 === void 0 ? void 0 : _metadata$dimension$p2.name;\n        }\n      }\n    } else if (\n    // always suffix ou and statuses for TE\n    inputType === OUTPUT_TYPE_TRACKED_ENTITY && [DIMENSION_TYPE_ORGANISATION_UNIT, DIMENSION_TYPE_STATUS].includes(dimension.dimensionType || dimension.dimensionItemType) && dimension.programId) {\n      var _metadata$dimension$p3;\n      dimension.suffix = (_metadata$dimension$p3 = metadata[dimension.programId]) === null || _metadata$dimension$p3 === void 0 ? void 0 : _metadata$dimension$p3.name;\n    }\n    return dimension;\n  });\n};","import { Analytics, LEGEND_DISPLAY_STRATEGY_FIXED, LEGEND_DISPLAY_STRATEGY_BY_DATA_ITEM, VALUE_TYPE_NUMBER, VALUE_TYPE_BOOLEAN, VALUE_TYPE_TRUE_ONLY, VALUE_TYPE_UNIT_INTERVAL, VALUE_TYPE_PERCENTAGE, VALUE_TYPE_INTEGER, VALUE_TYPE_INTEGER_POSITIVE, VALUE_TYPE_INTEGER_NEGATIVE, VALUE_TYPE_INTEGER_ZERO_OR_POSITIVE, DIMENSION_ID_ORGUNIT } from '@dhis2/analytics';\nimport { useDataEngine } from '@dhis2/app-runtime';\nimport { useEffect, useState, useRef, useCallback } from 'react';\nimport { getBooleanValues } from '../../modules/conditions.js';\nimport { DIMENSION_ID_CREATED, DIMENSION_ID_CREATED_BY, DIMENSION_ID_EVENT_STATUS, DIMENSION_ID_LAST_UPDATED, DIMENSION_ID_LAST_UPDATED_BY, DIMENSION_ID_PROGRAM_STATUS } from '../../modules/dimensionConstants.js';\nimport { extractDimensionIdParts, formatDimensionId } from '../../modules/dimensionId.js';\nimport { getDimensionsWithSuffix } from '../../modules/getDimensionsWithSuffix.js';\nimport { getMainDimensions } from '../../modules/mainDimensions.js';\nimport { getProgramDimensions } from '../../modules/programDimensions.js';\nimport { isAoWithTimeDimension } from '../../modules/timeDimensions.js';\nimport { OUTPUT_TYPE_EVENT, OUTPUT_TYPE_TRACKED_ENTITY, headersMap } from '../../modules/visualization.js';\nimport { getAdaptedVisualization, getAnalyticsEndpoint } from './analyticsQueryTools.js';\nconst lookupOptionSetOptionMetadata = (optionSetId, code, metaDataItems) => {\n  const optionSetMetaData = metaDataItems === null || metaDataItems === void 0 ? void 0 : metaDataItems[optionSetId];\n  if (optionSetMetaData) {\n    var _optionSetMetaData$op;\n    const optionId = (_optionSetMetaData$op = optionSetMetaData.options.find(option => option.code === code)) === null || _optionSetMetaData$op === void 0 ? void 0 : _optionSetMetaData$op.uid;\n    return metaDataItems[optionId];\n  }\n  return undefined;\n};\nconst NOT_DEFINED_VALUE = 'ND';\nexport const cellIsUndefined = function () {\n  var _columnIndex;\n  let rowContext = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  let rowIndex = arguments.length > 1 ? arguments[1] : undefined;\n  let columnIndex = arguments.length > 2 ? arguments[2] : undefined;\n  return ((_columnIndex = (rowContext[rowIndex] || {})[columnIndex]) === null || _columnIndex === void 0 ? void 0 : _columnIndex.valueStatus) === NOT_DEFINED_VALUE;\n};\nconst formatRowValue = _ref => {\n  let {\n    rowValue,\n    header,\n    metaDataItems,\n    isUndefined\n  } = _ref;\n  if (!rowValue) {\n    return rowValue;\n  }\n  switch (header.valueType) {\n    case VALUE_TYPE_BOOLEAN:\n    case VALUE_TYPE_TRUE_ONLY:\n      return !isUndefined ? getBooleanValues()[rowValue] : '';\n    default:\n      {\n        var _metaDataItems$rowVal;\n        if (header.optionSet) {\n          var _lookupOptionSetOptio;\n          return ((_lookupOptionSetOptio = lookupOptionSetOptionMetadata(header.optionSet, rowValue, metaDataItems)) === null || _lookupOptionSetOptio === void 0 ? void 0 : _lookupOptionSetOptio.name) || rowValue;\n        }\n        return ((_metaDataItems$rowVal = metaDataItems[rowValue]) === null || _metaDataItems$rowVal === void 0 ? void 0 : _metaDataItems$rowVal.name) || rowValue;\n      }\n  }\n};\nconst fetchAnalyticsData = async _ref2 => {\n  let {\n    analyticsEngine,\n    visualization,\n    pageSize,\n    page,\n    relativePeriodDate,\n    sortField,\n    sortDirection,\n    displayProperty\n  } = _ref2;\n  // TODO must be reviewed when PT comes around. Most likely LL and PT have quite different handling\n  const {\n    adaptedVisualization,\n    headers,\n    parameters\n  } = getAdaptedVisualization(visualization);\n  let req = new analyticsEngine.request().fromVisualization(adaptedVisualization).withParameters({\n    headers,\n    totalPages: false,\n    ...(visualization.outputType !== OUTPUT_TYPE_EVENT ? {\n      rowContext: true\n    } : {}),\n    ...parameters\n  }).withDisplayProperty(displayProperty.toUpperCase()).withPageSize(pageSize).withPage(page).withIncludeMetadataDetails();\n\n  // trackedEntity request can use multiple programs\n  if (visualization.outputType !== OUTPUT_TYPE_TRACKED_ENTITY) {\n    req = req.withProgram(visualization.program.id).withOutputType(visualization.outputType);\n  }\n  if (visualization.outputType === OUTPUT_TYPE_EVENT) {\n    var _visualization$progra;\n    req = req.withStage((_visualization$progra = visualization.programStage) === null || _visualization$progra === void 0 ? void 0 : _visualization$progra.id);\n  }\n  if (visualization.outputType === OUTPUT_TYPE_TRACKED_ENTITY) {\n    req = req.withTrackedEntityType(visualization.trackedEntityType.id);\n  }\n  if (relativePeriodDate && isAoWithTimeDimension(visualization)) {\n    req = req.withRelativePeriodDate(relativePeriodDate);\n  }\n  if (sortField) {\n    switch (sortDirection) {\n      case 'asc':\n        req = req.withAsc(sortField);\n        break;\n      case 'desc':\n        req = req.withDesc(sortField);\n        break;\n    }\n  }\n  const analyticsApiEndpoint = getAnalyticsEndpoint(visualization.outputType);\n  const rawResponse = await analyticsEngine[analyticsApiEndpoint].getQuery(req);\n  return rawResponse;\n};\nconst legendSetsQuery = {\n  resource: 'legendSets',\n  params: _ref3 => {\n    let {\n      ids\n    } = _ref3;\n    return {\n      fields: 'id,displayName~rename(name),legends[id,displayName~rename(name),startValue,endValue,color]',\n      filter: `id:in:[${ids.join(',')}]`\n    };\n  }\n};\nconst apiFetchLegendSetsByIds = async _ref4 => {\n  let {\n    dataEngine,\n    ids\n  } = _ref4;\n  const legendSetsData = await dataEngine.query({\n    legendSets: legendSetsQuery\n  }, {\n    variables: {\n      ids\n    }\n  });\n  return legendSetsData.legendSets.legendSets;\n};\nconst fetchLegendSets = async _ref5 => {\n  let {\n    legendSetIds,\n    dataEngine\n  } = _ref5;\n  if (!legendSetIds.length) {\n    return [];\n  }\n  const legendSets = await apiFetchLegendSetsByIds({\n    dataEngine,\n    ids: legendSetIds\n  });\n  return legendSets;\n};\nconst extractHeaders = (analyticsResponse, outputType) => {\n  const defaultMetadata = getMainDimensions(outputType);\n  const dimensionIds = analyticsResponse.headers.map(header => {\n    const {\n      dimensionId,\n      programStageId,\n      programId\n    } = extractDimensionIdParts(header.name, outputType);\n    const idMatch = Object.keys(headersMap).find(key => headersMap[key] === dimensionId);\n    const formattedDimensionId = formatDimensionId({\n      dimensionId: [DIMENSION_ID_ORGUNIT, DIMENSION_ID_PROGRAM_STATUS, DIMENSION_ID_EVENT_STATUS, DIMENSION_ID_CREATED_BY, DIMENSION_ID_LAST_UPDATED_BY, DIMENSION_ID_LAST_UPDATED, DIMENSION_ID_CREATED].includes(idMatch) ? idMatch : dimensionId,\n      programStageId,\n      programId,\n      outputType\n    });\n    if (idMatch === DIMENSION_ID_ORGUNIT && (programId || outputType !== OUTPUT_TYPE_TRACKED_ENTITY) || [DIMENSION_ID_PROGRAM_STATUS, DIMENSION_ID_EVENT_STATUS].includes(idMatch)\n    // org unit only if there's a programId or not tracked entity: this prevents pid.ou from being mixed up with just ou in TE\n    // program status + event status in all cases\n    ) {\n      defaultMetadata[formattedDimensionId] = getProgramDimensions(programId)[formattedDimensionId];\n    }\n    return formattedDimensionId;\n  });\n  const metadata = {\n    ...analyticsResponse.metaData.items,\n    ...defaultMetadata\n  };\n  const dimensionsWithSuffix = getDimensionsWithSuffix({\n    dimensionIds,\n    metadata,\n    inputType: outputType\n  });\n  const labels = dimensionsWithSuffix.map(_ref6 => {\n    let {\n      name,\n      suffix,\n      id\n    } = _ref6;\n    return {\n      id,\n      label: suffix ? `${name}, ${suffix}` : name\n    };\n  });\n  const headers = analyticsResponse.headers.map((header, index) => {\n    var _labels$find;\n    const result = {\n      ...header,\n      index\n    };\n    const {\n      dimensionId,\n      programId,\n      programStageId\n    } = extractDimensionIdParts(header.name, outputType);\n    const idMatch = Object.keys(headersMap).find(key => headersMap[key] === dimensionId);\n    result.column = ((_labels$find = labels.find(label => label.id === formatDimensionId({\n      dimensionId: [DIMENSION_ID_ORGUNIT, DIMENSION_ID_PROGRAM_STATUS, DIMENSION_ID_EVENT_STATUS, DIMENSION_ID_CREATED_BY, DIMENSION_ID_LAST_UPDATED_BY, DIMENSION_ID_LAST_UPDATED, DIMENSION_ID_CREATED].includes(idMatch) ? idMatch : dimensionId,\n      programId,\n      programStageId,\n      outputType\n    }))) === null || _labels$find === void 0 ? void 0 : _labels$find.label) || result.column;\n    return result;\n  });\n  return headers;\n};\nconst extractRows = (analyticsResponse, headers) => {\n  const filteredRows = [];\n  for (let rowIndex = 0, rowsCount = analyticsResponse.rows.length; rowIndex < rowsCount; rowIndex++) {\n    const row = analyticsResponse.rows[rowIndex];\n    const filteredRow = [];\n    for (let headerIndex = 0, headersCount = headers.length; headerIndex < headersCount; headerIndex++) {\n      const header = headers[headerIndex];\n      const rowValue = row[header.index];\n      filteredRow.push(formatRowValue({\n        rowValue,\n        header,\n        metaDataItems: analyticsResponse.metaData.items,\n        isUndefined: cellIsUndefined(analyticsResponse.rowContext, rowIndex, headerIndex)\n      }));\n    }\n    filteredRows.push(filteredRow);\n  }\n  return filteredRows;\n};\nconst extractRowContext = analyticsResponse => analyticsResponse.rowContext;\nconst valueTypeIsNumeric = valueType => [VALUE_TYPE_NUMBER, VALUE_TYPE_UNIT_INTERVAL, VALUE_TYPE_PERCENTAGE, VALUE_TYPE_INTEGER, VALUE_TYPE_INTEGER_POSITIVE, VALUE_TYPE_INTEGER_NEGATIVE, VALUE_TYPE_INTEGER_ZERO_OR_POSITIVE].includes(valueType);\nconst useAnalyticsData = _ref7 => {\n  let {\n    visualization,\n    filters,\n    isVisualizationLoading: isGlobalLoading,\n    displayProperty,\n    onResponsesReceived,\n    pageSize,\n    page,\n    sortField,\n    sortDirection\n  } = _ref7;\n  const dataEngine = useDataEngine();\n  const [analyticsEngine] = useState(() => Analytics.getAnalytics(dataEngine));\n  const mounted = useRef(false);\n  const [loading, setLoading] = useState(true);\n  const [fetching, setFetching] = useState(true);\n  const [error, setError] = useState(undefined);\n  const [data, setData] = useState(null);\n  const relativePeriodDate = filters === null || filters === void 0 ? void 0 : filters.relativePeriodDate;\n  const doFetch = useCallback(async () => {\n    try {\n      var _visualization$legend, _visualization$legend2, _visualization$legend3;\n      const analyticsResponse = await fetchAnalyticsData({\n        analyticsEngine,\n        page,\n        pageSize,\n        relativePeriodDate,\n        sortDirection,\n        sortField,\n        visualization,\n        displayProperty\n      });\n      const headers = extractHeaders(analyticsResponse, visualization.outputType);\n      const rows = extractRows(analyticsResponse, headers);\n      const rowContext = extractRowContext(analyticsResponse);\n      const pager = analyticsResponse.metaData.pager;\n      const legendSetIds = [];\n      const headerLegendSetMap = headers.reduce((acc, header) => {\n        var _analyticsResponse$me;\n        return {\n          ...acc,\n          [header.name]: (_analyticsResponse$me = analyticsResponse.metaData.items[header.name]) === null || _analyticsResponse$me === void 0 ? void 0 : _analyticsResponse$me.legendSet\n        };\n      }, {});\n      if (((_visualization$legend = visualization.legend) === null || _visualization$legend === void 0 ? void 0 : _visualization$legend.strategy) === LEGEND_DISPLAY_STRATEGY_FIXED && (_visualization$legend2 = visualization.legend.set) !== null && _visualization$legend2 !== void 0 && _visualization$legend2.id) {\n        legendSetIds.push(visualization.legend.set.id);\n      } else if (((_visualization$legend3 = visualization.legend) === null || _visualization$legend3 === void 0 ? void 0 : _visualization$legend3.strategy) === LEGEND_DISPLAY_STRATEGY_BY_DATA_ITEM) {\n        Object.values(headerLegendSetMap).filter(legendSet => legendSet).forEach(legendSet => legendSetIds.push(legendSet));\n      }\n      const legendSets = await fetchLegendSets({\n        legendSetIds,\n        dataEngine\n      });\n      if (legendSets.length) {\n        headers.filter(header => valueTypeIsNumeric(header.valueType)).forEach(header => {\n          switch (visualization.legend.strategy) {\n            case LEGEND_DISPLAY_STRATEGY_FIXED:\n              header.legendSet = legendSets[0];\n              break;\n            case LEGEND_DISPLAY_STRATEGY_BY_DATA_ITEM:\n              {\n                header.legendSet = legendSets.find(legendSet => legendSet.id === headerLegendSetMap[header.name]);\n                break;\n              }\n          }\n        });\n      }\n      mounted.current && setError(undefined);\n      mounted.current && setData({\n        headers,\n        rows,\n        pager,\n        rowContext\n      });\n      onResponsesReceived(analyticsResponse);\n    } catch (error) {\n      mounted.current && setError(error);\n    } finally {\n      mounted.current && setLoading(false);\n      mounted.current && setFetching(false);\n    }\n  }, [analyticsEngine, page, pageSize, relativePeriodDate, sortDirection, sortField, visualization]);\n  useEffect(() => {\n    /*\n     * Hack to prevent state updates on unmounted components\n     * needed because the analytics engine cannot cancel requests\n     */\n    mounted.current = true;\n    return () => {\n      mounted.current = false;\n    };\n  }, []);\n  useEffect(() => {\n    setFetching(true);\n    doFetch();\n  }, [visualization, page, pageSize, sortField, sortDirection, relativePeriodDate, doFetch]);\n  useEffect(() => {\n    // Do a full reset when loading a new visualization\n    if (isGlobalLoading) {\n      setFetching(false);\n      setLoading(false);\n      setError(undefined);\n      setData(null);\n    }\n  }, [isGlobalLoading]);\n  return {\n    loading,\n    fetching,\n    error,\n    data,\n    isGlobalLoading\n  };\n};\nexport { useAnalyticsData };","function _extends() { return _extends = Object.assign ? Object.assign.bind() : function (n) { for (var e = 1; e < arguments.length; e++) { var t = arguments[e]; for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]); } return n; }, _extends.apply(null, arguments); }\nimport { getColorByValueFromLegendSet, LegendKey, LEGEND_DISPLAY_STYLE_FILL, LEGEND_DISPLAY_STYLE_TEXT, VALUE_TYPE_NUMBER, VALUE_TYPE_INTEGER, VALUE_TYPE_INTEGER_POSITIVE, VALUE_TYPE_INTEGER_NEGATIVE, VALUE_TYPE_INTEGER_ZERO_OR_POSITIVE, VALUE_TYPE_PERCENTAGE, VALUE_TYPE_UNIT_INTERVAL, VALUE_TYPE_TIME, VALUE_TYPE_DATE, VALUE_TYPE_DATETIME, VALUE_TYPE_PHONE_NUMBER, VALUE_TYPE_URL } from '@dhis2/analytics';\nimport { useDhis2ConnectionStatus } from '@dhis2/app-runtime';\nimport i18n from '@dhis2/d2-i18n';\nimport { DataTable, DataTableRow, DataTableCell, DataTableColumnHeader, DataTableHead, DataTableBody, DataTableFoot, Pagination, Tooltip, Button, IconLegend24, NoticeBox } from '@dhis2/ui';\nimport cx from 'classnames';\nimport PropTypes from 'prop-types';\nimport React, { useState, useEffect, useMemo, useRef, useCallback, useReducer } from 'react';\nimport { DISPLAY_DENSITY_COMFORTABLE, DISPLAY_DENSITY_COMPACT, FONT_SIZE_LARGE, FONT_SIZE_NORMAL, FONT_SIZE_SMALL } from '../../modules/options.js';\nimport { getFormattedCellValue, getHeaderText } from '../../modules/tableValues.js';\nimport { isAoWithTimeDimension } from '../../modules/timeDimensions.js';\nimport { getDefaultSorting, getSortingFromVisualization } from '../../modules/ui.js';\nimport { getDimensionIdFromHeaderName, transformVisualization } from '../../modules/visualization.js';\nimport styles from './styles/Visualization.module.css';\nimport { cellIsUndefined, useAnalyticsData } from './useAnalyticsData.js';\nexport const FIRST_PAGE = 1;\nexport const PAGE_SIZE = 100;\nconst getFontSizeClass = fontSize => {\n  switch (fontSize) {\n    case FONT_SIZE_LARGE:\n      return styles.fontSizeLarge;\n    case FONT_SIZE_SMALL:\n      return styles.fontSizeSmall;\n    case FONT_SIZE_NORMAL:\n    default:\n      return styles.fontSizeNormal;\n  }\n};\nconst getSizeClass = displayDensity => {\n  switch (displayDensity) {\n    case DISPLAY_DENSITY_COMFORTABLE:\n      return styles.sizeComfortable;\n    case DISPLAY_DENSITY_COMPACT:\n      return styles.sizeCompact;\n    default:\n      return styles.sizeNormal;\n  }\n};\nconst getDataTableScrollHeight = (isInModal, noTimeDimensionWarningRef) => {\n  if (isInModal) {\n    var _noTimeDimensionWarni, _noTimeDimensionWarni2;\n    const reservedHeight = 285 + ((_noTimeDimensionWarni = noTimeDimensionWarningRef === null || noTimeDimensionWarningRef === void 0 ? void 0 : (_noTimeDimensionWarni2 = noTimeDimensionWarningRef.current) === null || _noTimeDimensionWarni2 === void 0 ? void 0 : _noTimeDimensionWarni2.clientHeight) !== null && _noTimeDimensionWarni !== void 0 ? _noTimeDimensionWarni : 0);\n    return `calc(100vh - ${reservedHeight}px)`;\n  } else {\n    return '100%';\n  }\n};\nconst PaginationComponent = _ref => {\n  let {\n    offline,\n    ...props\n  } = _ref;\n  return offline ? /*#__PURE__*/React.createElement(Tooltip, {\n    content: i18n.t('Not available offline')\n  }, /*#__PURE__*/React.createElement(Pagination, props)) : /*#__PURE__*/React.createElement(Pagination, props);\n};\nPaginationComponent.propTypes = {\n  offline: PropTypes.bool\n};\nexport const Visualization = _ref2 => {\n  let {\n    filters,\n    visualization: AO,\n    isVisualizationLoading,\n    displayProperty,\n    onResponsesReceived,\n    onColumnHeaderClick,\n    onDataSorted,\n    onError,\n    forDashboard\n  } = _ref2;\n  const containerRef = useRef(null);\n  const noTimeDimensionWarningRef = useRef(null);\n  const dataTableRef = useRef(null);\n  const fetchContainerRef = useRef(null);\n  const dataTableHeadRef = useRef(null);\n  const dataTableFootRef = useRef(null);\n  const legendKeyRef = useRef(null);\n  const [uniqueLegendSets, setUniqueLegendSets] = useState([]);\n  const [showLegendKey, setShowLegendKey] = useState(false);\n  const [measuredDimensions, setMeasuredDimensions] = useState({\n    containerMaxWidth: 0,\n    paginationMaxWidth: 0,\n    noticeBoxMaxWidth: 0\n  });\n  const visualization = useMemo(() => AO && transformVisualization(AO), [AO]);\n  const isInModal = !!(filters !== null && filters !== void 0 && filters.relativePeriodDate);\n  const hasTimeDimension = useMemo(() => isAoWithTimeDimension(visualization), [visualization]);\n  const shouldShowTimeDimensionWarning = isInModal && !hasTimeDimension;\n  const visualizationRef = useRef(visualization);\n  const onResize = useCallback(() => requestAnimationFrame(() => {\n    var _legendKeyRef$current;\n    if (!(containerRef !== null && containerRef !== void 0 && containerRef.current) || containerRef.current.clientWidth === 0) {\n      return;\n    }\n    const containerInnerWidth = containerRef.current.clientWidth;\n    const scrollBox = containerRef.current.querySelector('.tablescrollbox');\n    const scrollbarWidth = scrollBox.offsetWidth - scrollBox.clientWidth;\n    const legendKeyWidth = ((_legendKeyRef$current = legendKeyRef.current) === null || _legendKeyRef$current === void 0 ? void 0 : _legendKeyRef$current.offsetWidth) > 0 ? legendKeyRef.current.offsetWidth + 4 : 0;\n    const containerMaxWidth = containerInnerWidth - scrollbarWidth - legendKeyWidth;\n    setMeasuredDimensions({\n      containerMaxWidth,\n      paginationMaxWidth: containerMaxWidth - scrollbarWidth,\n      noticeBoxMaxWidth: scrollBox.offsetWidth\n    });\n  }), []);\n  const sizeObserver = useMemo(() => new window.ResizeObserver(onResize), [onResize]);\n  const mountAndObserveContainerRef = useCallback(node => {\n    if (node === null) {\n      return;\n    }\n    containerRef.current = node;\n    sizeObserver.observe(node);\n    return () => sizeObserver.unobserve(node);\n  }, [sizeObserver]);\n  const observeVisualizationContainerRef = useCallback(node => {\n    if (node === null) {\n      return;\n    }\n    sizeObserver.observe(node);\n    return () => sizeObserver.unobserve(node);\n  }, [sizeObserver]);\n  const defaultSorting = useMemo(() => getDefaultSorting(), []);\n  const getSorting = useCallback(visualization => {\n    const sorting = getSortingFromVisualization(visualization) || defaultSorting;\n    return {\n      sortField: sorting.dimension,\n      sortDirection: sorting.direction\n    };\n  }, [defaultSorting]);\n  const {\n    sortField,\n    sortDirection\n  } = getSorting(visualization);\n  const [{\n    pageSize,\n    page\n  }, setPaging] = useReducer((paging, newPaging) => ({\n    ...paging,\n    ...newPaging\n  }), {\n    page: FIRST_PAGE,\n    pageSize: PAGE_SIZE\n  });\n  const setPage = useCallback(pageNum => setPaging({\n    page: pageNum\n  }), []);\n  const setPageSize = useCallback(pageSizeNum => setPaging({\n    pageSize: pageSizeNum,\n    page: FIRST_PAGE\n  }), []);\n  const {\n    isDisconnected: offline\n  } = useDhis2ConnectionStatus();\n  const {\n    fetching,\n    error,\n    data\n  } = useAnalyticsData({\n    filters,\n    visualization,\n    isVisualizationLoading,\n    displayProperty,\n    onResponsesReceived,\n    pageSize,\n    // Set first page directly for new visualization to avoid extra analytics requests\n    page: visualization !== visualizationRef.current ? FIRST_PAGE : page,\n    sortField,\n    sortDirection\n  });\n  const fetchIndicatorTop = useMemo(() => {\n    if (!fetching || !(fetchContainerRef !== null && fetchContainerRef !== void 0 && fetchContainerRef.current) || !(dataTableHeadRef !== null && dataTableHeadRef !== void 0 && dataTableHeadRef.current) || !(dataTableFootRef !== null && dataTableFootRef !== void 0 && dataTableFootRef.current)) {\n      return 'calc(50% - 12px)';\n    }\n    const containerHeight = fetchContainerRef.current.clientHeight;\n    const headHeight = dataTableHeadRef.current.offsetHeight;\n    const footHeight = dataTableFootRef.current.offsetHeight;\n    // tbody height excluding the parts hidden by scrolling\n    const visibleBodyHeight = containerHeight - headHeight - footHeight;\n    // 12 px is half the loader height\n    const top = Math.round(headHeight + visibleBodyHeight / 2 - 12);\n    return `${top}px`;\n  }, [fetching]);\n\n  // Reset page when a different visualization is loaded\n  useEffect(() => {\n    visualizationRef.current = visualization;\n    setPage(FIRST_PAGE);\n  }, [visualization, setPage]);\n  useEffect(() => {\n    if (data && visualization) {\n      var _visualization$legend;\n      const allLegendSets = data.headers.filter(header => header.legendSet).map(header => header.legendSet);\n      const relevantLegendSets = allLegendSets.filter((e, index) => {\n        var _e$legends;\n        return allLegendSets.findIndex(a => a.id === e.id) === index && ((_e$legends = e.legends) === null || _e$legends === void 0 ? void 0 : _e$legends.length);\n      });\n      if (relevantLegendSets.length) {\n        setUniqueLegendSets(relevantLegendSets);\n      } else {\n        setUniqueLegendSets([]);\n      }\n      setShowLegendKey((_visualization$legend = visualization.legend) === null || _visualization$legend === void 0 ? void 0 : _visualization$legend.showKey);\n    } else {\n      setUniqueLegendSets([]);\n      setShowLegendKey(false);\n    }\n  }, [data, visualization]);\n  useEffect(() => {\n    if (error && onError) {\n      onError(error);\n    }\n  }, [error, onError]);\n  if (!data || error) {\n    return null;\n  }\n  const sizeClass = getSizeClass(visualization.displayDensity);\n  const fontSizeClass = getFontSizeClass(visualization.fontSize);\n  const colSpan = String(Math.max(data.headers.length, 1));\n  const sortData = _ref3 => {\n    let {\n      name,\n      direction\n    } = _ref3;\n    // this causes a re-render of the whole component\n    // which resets also the pagination as there is no previous internal state\n    onDataSorted({\n      dimension: name,\n      direction\n    });\n  };\n  const formatCellValue = (value, header) => {\n    if ((header === null || header === void 0 ? void 0 : header.valueType) === VALUE_TYPE_URL) {\n      return /*#__PURE__*/React.createElement(\"a\", {\n        href: value,\n        target: \"_blank\",\n        rel: \"noreferrer\"\n      }, value);\n    } else {\n      return getFormattedCellValue({\n        value,\n        header,\n        visualization\n      });\n    }\n  };\n  const cellValueShouldNotWrap = header => [VALUE_TYPE_NUMBER, VALUE_TYPE_INTEGER, VALUE_TYPE_INTEGER_POSITIVE, VALUE_TYPE_INTEGER_NEGATIVE, VALUE_TYPE_INTEGER_ZERO_OR_POSITIVE, VALUE_TYPE_PERCENTAGE, VALUE_TYPE_UNIT_INTERVAL, VALUE_TYPE_TIME, VALUE_TYPE_DATE, VALUE_TYPE_DATETIME, VALUE_TYPE_PHONE_NUMBER].includes(header.valueType) && !header.optionSet;\n  const formatCellHeader = header => {\n    const headerText = getHeaderText(header);\n    const headerName = Number.isInteger(header.stageOffset) ? header.name.replace(/\\[-?\\d+\\]/, '') : header.name;\n    return /*#__PURE__*/React.createElement(\"span\", {\n      className: cx(styles.headerCell, styles.dimensionModalHandler),\n      onClick: onColumnHeaderClick ? () => onColumnHeaderClick(getDimensionIdFromHeaderName(headerName, visualization) || headerName) : undefined\n    }, headerText);\n  };\n  const getLegendKey = () => forDashboard ? /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.legendKeyContainer,\n    ref: legendKeyRef\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.legendKeyToggle\n  }, /*#__PURE__*/React.createElement(Button, {\n    small: true,\n    secondary: true,\n    onClick: () => {\n      setShowLegendKey(!showLegendKey);\n      window.requestAnimationFrame(onResize);\n    },\n    icon: /*#__PURE__*/React.createElement(IconLegend24, null),\n    toggled: showLegendKey\n  })), showLegendKey && /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.legendKeyWrapper,\n    \"data-test\": \"visualization-legend-key\"\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.wrapper\n  }, /*#__PURE__*/React.createElement(LegendKey, {\n    legendSets: uniqueLegendSets\n  })))) : showLegendKey && /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.legendKeyScrollbox,\n    \"data-test\": \"visualization-legend-key\",\n    ref: legendKeyRef\n  }, /*#__PURE__*/React.createElement(LegendKey, {\n    legendSets: uniqueLegendSets\n  }));\n  const renderCellContent = _ref4 => {\n    var _visualization$legend2, _visualization$legend3;\n    let {\n      columnIndex,\n      value,\n      isUndefined,\n      props\n    } = _ref4;\n    return /*#__PURE__*/React.createElement(DataTableCell, _extends({}, props, {\n      key: columnIndex,\n      className: cx(styles.cell, fontSizeClass, sizeClass, {\n        [styles.emptyCell]: !value,\n        [styles.nowrap]: cellValueShouldNotWrap(data.headers[columnIndex]),\n        [styles.undefinedCell]: isUndefined\n      }, 'bordered'),\n      backgroundColor: ((_visualization$legend2 = visualization.legend) === null || _visualization$legend2 === void 0 ? void 0 : _visualization$legend2.style) === LEGEND_DISPLAY_STYLE_FILL ? getColorByValueFromLegendSet(data.headers[columnIndex].legendSet, value) : undefined,\n      dataTest: \"table-cell\"\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      style: ((_visualization$legend3 = visualization.legend) === null || _visualization$legend3 === void 0 ? void 0 : _visualization$legend3.style) === LEGEND_DISPLAY_STYLE_TEXT ? {\n        color: getColorByValueFromLegendSet(data.headers[columnIndex].legendSet, value)\n      } : {}\n    }, formatCellValue(value, data.headers[columnIndex])));\n  };\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.pluginContainer,\n    ref: mountAndObserveContainerRef\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    \"data-test\": \"line-list-fetch-container\",\n    className: cx(styles.fetchContainer, {\n      [styles.fetching]: fetching\n    }),\n    ref: fetchContainerRef\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.fetchIndicator,\n    style: {\n      top: fetchIndicatorTop\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.visualizationContainer,\n    ref: observeVisualizationContainerRef,\n    style: {\n      maxWidth: measuredDimensions.containerMaxWidth\n    }\n  }, shouldShowTimeDimensionWarning && /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.noTimeDimensionWarning,\n    ref: noTimeDimensionWarningRef,\n    style: {\n      maxWidth: measuredDimensions.noticeBoxMaxWidth\n    }\n  }, /*#__PURE__*/React.createElement(NoticeBox, {\n    warning: true\n  }, i18n.t('This line list may show data that was not available when the interpretation was written.'))), /*#__PURE__*/React.createElement(DataTable, {\n    scrollHeight: getDataTableScrollHeight(isInModal, noTimeDimensionWarningRef),\n    scrollWidth: \"100%\",\n    width: \"auto\",\n    className: cx(styles.dataTable, 'push-analytics-linelist-table'),\n    dataTest: \"line-list-table\",\n    ref: dataTableRef\n  }, /*#__PURE__*/React.createElement(DataTableHead, {\n    ref: dataTableHeadRef\n  }, /*#__PURE__*/React.createElement(DataTableRow, null, data.headers.map((header, index) => header ? /*#__PURE__*/React.createElement(DataTableColumnHeader, {\n    fixed: true,\n    top: \"0\",\n    key: header.name,\n    name: header.name,\n    onSortIconClick: sortData,\n    sortDirection: offline ? undefined : header.name === sortField ? sortDirection : defaultSorting.direction,\n    sortIconTitle: i18n.t('Sort by \"{{column}}\" and update', {\n      column: getHeaderText(header)\n    }),\n    className: cx(styles.headerCell, fontSizeClass, sizeClass, 'bordered'),\n    dataTest: \"table-header\"\n  }, formatCellHeader(header)) : /*#__PURE__*/React.createElement(DataTableColumnHeader, {\n    fixed: true,\n    top: \"0\",\n    key: `undefined_${index}` // FIXME this is due to pe not being present in headers, needs special handling\n    ,\n    className: cx(styles.headerCell, fontSizeClass, sizeClass),\n    dataTest: \"table-header\"\n  })))), /*#__PURE__*/React.createElement(DataTableBody, {\n    dataTest: \"table-body\"\n  }, data.rows.map((row, rowIndex) => /*#__PURE__*/React.createElement(DataTableRow, {\n    key: rowIndex,\n    dataTest: \"table-row\"\n  }, row.map((value, columnIndex) => cellIsUndefined(data.rowContext, rowIndex, columnIndex) ? /*#__PURE__*/React.createElement(Tooltip, {\n    content: i18n.t('No event'),\n    key: `${rowIndex}_${columnIndex}-tooltip`\n  }, props => renderCellContent({\n    columnIndex,\n    value,\n    isUndefined: true,\n    props\n  })) : renderCellContent({\n    columnIndex,\n    value\n  }))))), /*#__PURE__*/React.createElement(DataTableFoot, {\n    className: styles.stickyFooter,\n    ref: dataTableFootRef\n  }, /*#__PURE__*/React.createElement(DataTableRow, null, /*#__PURE__*/React.createElement(DataTableCell, {\n    colSpan: colSpan,\n    staticStyle: true,\n    className: styles.footerCell\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: cx(styles.stickyNavigation, sizeClass),\n    style: {\n      maxWidth: measuredDimensions.paginationMaxWidth\n    }\n  }, /*#__PURE__*/React.createElement(PaginationComponent, {\n    offline: offline,\n    disabled: offline || fetching,\n    page: data.pager.page\n    // DHIS2-13493: avoid a crash when the pager object in the analytics response is malformed.\n    // When that happens pageSize is 0 which causes the crash because the Rows per page select does not have 0 listed as possible option.\n    // The backend should always return the value passed in the request, even if there are no rows for the query.\n    // The workaround here makes sure that if the pageSize returned is 0 we use a value which can be selected in the Rows per page select.\n    ,\n    pageSize: data.pager.pageSize || PAGE_SIZE,\n    isLastPage: data.pager.isLastPage,\n    onPageChange: setPage,\n    onPageSizeChange: setPageSize,\n    pageSizeSelectText: i18n.t('Rows per page'),\n    pageLength: data.rows.length,\n    pageSummaryText: _ref5 => {\n      let {\n        firstItem,\n        lastItem,\n        page\n      } = _ref5;\n      return i18n.t('Page {{page}}, row {{firstItem}}-{{lastItem}}', {\n        firstItem,\n        lastItem,\n        page\n      });\n    }\n  })))))))), Boolean(uniqueLegendSets.length) && getLegendKey());\n};\nVisualization.defaultProps = {\n  displayProperty: 'name',\n  isVisualizationLoading: false,\n  onDataSorted: Function.prototype,\n  onResponsesReceived: Function.prototype\n};\nVisualization.propTypes = {\n  displayProperty: PropTypes.string.isRequired,\n  isVisualizationLoading: PropTypes.bool.isRequired,\n  visualization: PropTypes.object.isRequired,\n  onResponsesReceived: PropTypes.func.isRequired,\n  filters: PropTypes.object,\n  forDashboard: PropTypes.bool,\n  onColumnHeaderClick: PropTypes.func,\n  onDataSorted: PropTypes.func,\n  onError: PropTypes.func\n};","import { parse, stringify } from 'query-string';\nimport { useState, useEffect } from 'react';\nimport history from '../../modules/history.js';\nconst options = {\n  parseBooleans: true\n};\nconst useInterpretationQueryParams = () => {\n  const [params, setParams] = useState(parse(history.location.search, options));\n  useEffect(() => {\n    const unlisten = history.listen(_ref => {\n      var _location$state, _location$state2;\n      let {\n        location\n      } = _ref;\n      if ((_location$state = location.state) !== null && _location$state !== void 0 && _location$state.isModalOpening) {\n        setParams(parse(history.location.search, options));\n      }\n      if ((_location$state2 = location.state) !== null && _location$state2 !== void 0 && _location$state2.isModalClosing) {\n        setParams(parse(history.location.search, options));\n      }\n    });\n    return unlisten;\n  }, []);\n  return params;\n};\nconst removeInterpretationQueryParams = () => {\n  const parsed = parse(history.location.search, options);\n  // Keep all other query params in tact\n  const parsedWithoutInterpretationId = Object.entries(parsed).reduce((acc, _ref2) => {\n    let [key, value] = _ref2;\n    if (key !== 'interpretationId' && key !== 'initialFocus') {\n      acc[key] = value;\n    }\n    return acc;\n  }, {});\n  const search = stringify(parsedWithoutInterpretationId);\n  history.push({\n    ...history.location,\n    search\n  }, {\n    isModalClosing: true\n  });\n};\nexport { useInterpretationQueryParams, removeInterpretationQueryParams };","import { useCachedDataQuery, InterpretationModal as AnalyticsInterpretationModal } from '@dhis2/analytics';\nimport PropTypes from 'prop-types';\nimport React, { useState, useEffect } from 'react';\nimport { useSelector } from 'react-redux';\nimport { sGetVisualization } from '../../reducers/visualization.js';\nimport { ModalDownloadDropdown } from '../DownloadMenu/index.js';\nimport { Visualization } from '../Visualization/Visualization.js';\nimport { useInterpretationQueryParams, removeInterpretationQueryParams } from './interpretationIdQueryParam.js';\nconst InterpretationModal = _ref => {\n  let {\n    onInterpretationUpdate\n  } = _ref;\n  const {\n    interpretationId,\n    initialFocus\n  } = useInterpretationQueryParams();\n  const [isVisualizationLoading, setIsVisualizationLoading] = useState(false);\n  const visualization = useSelector(sGetVisualization);\n  const {\n    currentUser\n  } = useCachedDataQuery();\n  useEffect(() => {\n    setIsVisualizationLoading(!!interpretationId);\n  }, [interpretationId]);\n  return interpretationId ? /*#__PURE__*/React.createElement(AnalyticsInterpretationModal, {\n    currentUser: currentUser,\n    onInterpretationUpdate: onInterpretationUpdate,\n    initialFocus: initialFocus,\n    interpretationId: interpretationId,\n    isVisualizationLoading: isVisualizationLoading,\n    onClose: removeInterpretationQueryParams,\n    onResponsesReceived: () => setIsVisualizationLoading(false),\n    visualization: visualization,\n    downloadMenuComponent: ModalDownloadDropdown,\n    pluginComponent: Visualization\n  }) : null;\n};\nInterpretationModal.propTypes = {\n  onInterpretationUpdate: PropTypes.func.isRequired\n};\nexport { InterpretationModal };","import { AXIS_ID_COLUMNS, AXIS_ID_FILTERS, AXIS_ID_ROWS } from '@dhis2/analytics';\nimport i18n from '@dhis2/d2-i18n';\nconst getAxisNames = () => ({\n  [AXIS_ID_COLUMNS]: i18n.t('Columns'),\n  [AXIS_ID_ROWS]: i18n.t('Rows'),\n  [AXIS_ID_FILTERS]: i18n.t('Filter')\n});\nexport const getAxisName = axisId => {\n  const name = getAxisNames()[axisId];\n  if (!name) {\n    throw new Error(`${axisId} is not a valid axis id`);\n  }\n  return name;\n};","// extracted by mini-css-extract-plugin\nexport default {\"iconButton\":\"IconButton_iconButton__CbV20\"};","import PropTypes from 'prop-types';\nimport React from 'react';\nimport styles from './styles/IconButton.module.css';\nconst IconButton = _ref => {\n  let {\n    children,\n    dataTest,\n    disabled,\n    name,\n    onBlur,\n    onClick,\n    onFocus,\n    ariaOwns,\n    ariaHaspopup\n  } = _ref;\n  return /*#__PURE__*/React.createElement(\"button\", {\n    className: styles.iconButton,\n    \"data-test\": dataTest,\n    disabled: disabled,\n    name: name,\n    onBlur: onBlur,\n    onClick: onClick,\n    onFocus: onFocus,\n    \"aria-owns\": ariaOwns,\n    \"aria-haspopup\": ariaHaspopup\n  }, children);\n};\nIconButton.propTypes = {\n  ariaHaspopup: PropTypes.bool,\n  ariaOwns: PropTypes.string,\n  children: PropTypes.node,\n  dataTest: PropTypes.string,\n  disabled: PropTypes.bool,\n  name: PropTypes.string,\n  onBlur: PropTypes.func,\n  onClick: PropTypes.func,\n  onFocus: PropTypes.func\n};\nexport default IconButton;","// extracted by mini-css-extract-plugin\nexport default {\"button\":\"DimensionMenu_button__A1UC2\",\"hidden\":\"DimensionMenu_hidden__oz10c\"};","import { AXIS_ID_COLUMNS, AXIS_ID_FILTERS, AXIS_ID_ROWS, VIS_TYPE_LINE_LIST } from '@dhis2/analytics';\nimport i18n from '@dhis2/d2-i18n';\nimport { MenuDivider, FlyoutMenu, MenuItem } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { getAxisName } from '../../modules/axis.js';\nconst getAxisItemLabel = (axisName, isDimensionInLayout) => isDimensionInLayout ? i18n.t('Move to {{axisName}}', {\n  axisName\n}) : i18n.t('Add to {{axisName}}', {\n  axisName\n});\nconst getDividerItem = key => /*#__PURE__*/React.createElement(MenuDivider, {\n  dense: true,\n  key: key\n});\nconst MenuItems = _ref => {\n  let {\n    dimensionId,\n    currentAxisId,\n    visType,\n    axisItemHandler,\n    removeItemHandler,\n    onClose,\n    dataTest\n  } = _ref;\n  const menuItems = [];\n  const isDimensionInLayout = !!currentAxisId;\n\n  // add/move to axis item\n  const availableAxisIds = visType === VIS_TYPE_LINE_LIST ? [AXIS_ID_COLUMNS, AXIS_ID_FILTERS] : [AXIS_ID_COLUMNS, AXIS_ID_ROWS, AXIS_ID_FILTERS];\n  const applicableAxisIds = availableAxisIds.filter(axisId => axisId !== currentAxisId);\n  const getRemoveMenuItem = onClick => /*#__PURE__*/React.createElement(MenuItem, {\n    key: \"remove-menu-item\",\n    onClick: onClick,\n    label: i18n.t('Remove'),\n    dataTest: `${dataTest}-item-remove-${dimensionId}`\n  });\n  menuItems.push(...applicableAxisIds.map(axisId => /*#__PURE__*/React.createElement(MenuItem, {\n    key: `${dimensionId}-to-${axisId}`,\n    onClick: () => {\n      axisItemHandler({\n        dimensionId,\n        axisId\n      });\n      onClose();\n    },\n    label: getAxisItemLabel(getAxisName(axisId), isDimensionInLayout),\n    dataTest: `${dataTest}-item-action-${dimensionId}-to-${axisId}`\n  })));\n\n  // remove item\n  if (isDimensionInLayout) {\n    // divider\n    if (applicableAxisIds.length) {\n      menuItems.push(getDividerItem('remove-item-divider'));\n    }\n    menuItems.push(getRemoveMenuItem(() => {\n      removeItemHandler(dimensionId);\n      onClose();\n    }));\n  }\n  return /*#__PURE__*/React.createElement(FlyoutMenu, {\n    dense: true,\n    dataTest: dataTest\n  }, menuItems);\n};\nMenuItems.propTypes = {\n  axisItemHandler: PropTypes.func.isRequired,\n  removeItemHandler: PropTypes.func.isRequired,\n  onClose: PropTypes.func.isRequired,\n  currentAxisId: PropTypes.string,\n  dataTest: PropTypes.string,\n  dimensionId: PropTypes.string,\n  visType: PropTypes.string\n};\nexport default MenuItems;","import { Layer, Popper, IconMore16 } from '@dhis2/ui';\nimport cx from 'classnames';\nimport PropTypes from 'prop-types';\nimport React, { useState, useRef } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { acAddUiLayoutDimensions, acRemoveUiLayoutDimensions } from '../../actions/ui.js';\nimport { sGetUiType, sGetUiLayout } from '../../reducers/ui.js';\nimport IconButton from '../IconButton/IconButton.js';\nimport styles from './DimensionMenu.module.css';\nimport MenuItems from './MenuItems.js';\nconst getAxisIdForDimension = (dimensionId, layout) => {\n  const axisLayout = Object.entries(layout).find(_ref => {\n    let [, dimensionIds] = _ref;\n    return dimensionIds.includes(dimensionId);\n  });\n  return axisLayout ? axisLayout[0] : undefined;\n};\nconst DimensionMenu = _ref2 => {\n  let {\n    currentAxisId,\n    dimensionId,\n    dimensionMetadata\n  } = _ref2;\n  const dispatch = useDispatch();\n  const visType = useSelector(sGetUiType);\n  const layout = useSelector(sGetUiLayout);\n  const axisId = currentAxisId || getAxisIdForDimension(dimensionId, layout);\n  const buttonRef = useRef();\n  const [menuIsOpen, setMenuIsOpen] = useState(false);\n  const toggleMenu = e => {\n    setMenuIsOpen(!menuIsOpen);\n    e && e.stopPropagation();\n  };\n  const getMenuId = () => `menu-for-${dimensionId}`;\n  const axisItemHandler = _ref3 => {\n    let {\n      dimensionId,\n      axisId\n    } = _ref3;\n    dispatch(acAddUiLayoutDimensions({\n      [dimensionId]: {\n        axisId\n      }\n    }, dimensionMetadata));\n  };\n  const removeItemHandler = id => dispatch(acRemoveUiLayoutDimensions(id));\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    ref: buttonRef,\n    className: cx(styles.button, {\n      [styles.hidden]: !currentAxisId\n    }),\n    \"data-test\": 'dimension-menu-button'\n  }, /*#__PURE__*/React.createElement(IconButton, {\n    ariaOwns: menuIsOpen ? getMenuId() : null,\n    ariaHaspopup: true,\n    onClick: toggleMenu,\n    dataTest: `dimension-menu-button-${dimensionId}`\n  }, /*#__PURE__*/React.createElement(IconMore16, null))), menuIsOpen && /*#__PURE__*/React.createElement(Layer, {\n    onBackdropClick: (_, e) => toggleMenu(e)\n  }, /*#__PURE__*/React.createElement(Popper, {\n    reference: buttonRef,\n    placement: \"bottom-start\"\n  }, /*#__PURE__*/React.createElement(MenuItems, {\n    dimensionId: dimensionId,\n    currentAxisId: axisId,\n    visType: visType,\n    axisItemHandler: axisItemHandler,\n    removeItemHandler: removeItemHandler,\n    onClose: toggleMenu,\n    dataTest: `dimension-menu-${dimensionId}`\n  }))));\n};\nDimensionMenu.propTypes = {\n  currentAxisId: PropTypes.string,\n  dimensionId: PropTypes.string,\n  dimensionMetadata: PropTypes.object\n};\nexport default DimensionMenu;","// extracted by mini-css-extract-plugin\nexport default {\"tooltip\":\"Tooltip_tooltip__OvoX-\",\"list\":\"Tooltip_list__-ztP7\",\"item\":\"Tooltip_item__xv0z2\",\"iconWrapper\":\"Tooltip_iconWrapper__Tl0Vr\",\"label\":\"Tooltip_label__h9n68\"};","import { DIMENSION_TYPE_CATEGORY, DIMENSION_TYPE_CATEGORY_OPTION_GROUP_SET, DIMENSION_TYPE_DATA_ELEMENT, ouIdHelper, DIMENSION_TYPE_ORGANISATION_UNIT, DIMENSION_TYPE_PERIOD, DIMENSION_TYPE_ORGANISATION_UNIT_GROUP_SET, AXIS_ID_FILTERS } from '@dhis2/analytics';\nimport i18n from '@dhis2/d2-i18n';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { useSelector } from 'react-redux';\nimport { isStartEndDate, useLocalizedStartEndDateFormatter } from '../../modules/dates.js';\nimport { DIMENSION_TYPE_STATUS } from '../../modules/dimensionConstants.js';\nimport { extractDimensionIdParts } from '../../modules/dimensionId.js';\nimport { sGetMetadata } from '../../reducers/metadata.js';\nimport { sGetUiInputType, sGetUiItemsByDimension } from '../../reducers/ui.js';\nimport styles from './styles/Tooltip.module.css';\nconst renderLimit = 5;\nexport const TooltipContent = _ref => {\n  var _metadata$programStag, _metadata$programId;\n  let {\n    dimension,\n    conditionsTexts,\n    axisId\n  } = _ref;\n  const metadata = useSelector(sGetMetadata);\n  const inputType = useSelector(sGetUiInputType);\n  const itemIds = useSelector(state => sGetUiItemsByDimension(state, dimension.id));\n  const formatStartEndDate = useLocalizedStartEndDateFormatter();\n  const {\n    programStageId,\n    programId\n  } = extractDimensionIdParts(dimension.id, inputType);\n  const stageName = dimension.stageName || ((_metadata$programStag = metadata[programStageId]) === null || _metadata$programStag === void 0 ? void 0 : _metadata$programStag.name);\n  const programName = (_metadata$programId = metadata[programId]) === null || _metadata$programId === void 0 ? void 0 : _metadata$programId.name;\n  const getNameList = (idList, label, metadata) => idList.reduce((levelString, levelId, index) => `${levelString}${index > 0 ? `, ` : ``}${metadata[levelId] ? metadata[levelId].name : levelId}`, `${label}: `);\n  const getItemDisplayNames = () => {\n    const levelIds = [];\n    const groupIds = [];\n    const itemDisplayNames = [];\n    itemIds.forEach(id => {\n      if (ouIdHelper.hasLevelPrefix(id)) {\n        levelIds.push(ouIdHelper.removePrefix(id));\n      } else if (ouIdHelper.hasGroupPrefix(id)) {\n        groupIds.push(ouIdHelper.removePrefix(id));\n      } else {\n        var _metadata$dimensionId, _metadata$dimensionId2;\n        const {\n          dimensionId\n        } = extractDimensionIdParts(id, inputType);\n        itemDisplayNames.push(isStartEndDate(dimensionId) ? formatStartEndDate(dimensionId) : (_metadata$dimensionId = (_metadata$dimensionId2 = metadata[dimensionId]) === null || _metadata$dimensionId2 === void 0 ? void 0 : _metadata$dimensionId2.name) !== null && _metadata$dimensionId !== void 0 ? _metadata$dimensionId : id);\n      }\n    });\n    levelIds.length && itemDisplayNames.push(getNameList(levelIds, i18n.t('Levels'), metadata));\n    groupIds.length && itemDisplayNames.push(getNameList(groupIds, i18n.t('Groups'), metadata));\n    return itemDisplayNames;\n  };\n  const renderItems = function () {\n    let itemDisplayNames = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n    if (itemDisplayNames.some(name => !name)) {\n      return null;\n    }\n    const itemsToRender = itemDisplayNames.slice(0, renderLimit).map(name => /*#__PURE__*/React.createElement(\"li\", {\n      key: `${dimension.id}-${name}`,\n      className: styles.item\n    }, name));\n    const numberOverRenderLimit = itemDisplayNames.length - renderLimit;\n    if (numberOverRenderLimit > 0) {\n      itemsToRender.push(/*#__PURE__*/React.createElement(\"li\", {\n        key: `${dimension.id}-render-limit`,\n        className: styles.item\n      }, i18n.t('And {{count}} other...', {\n        count: numberOverRenderLimit,\n        defaultValue: 'And {{count}} other...',\n        defaultValue_plural: 'And {{count}} others...'\n      })));\n    }\n    return itemsToRender;\n  };\n  const renderNoItemsLabel = () => /*#__PURE__*/React.createElement(\"li\", {\n    key: `${dimension.id}-none-selected`,\n    className: styles.item\n  }, i18n.t('None selected'));\n  const renderStageName = () => stageName && /*#__PURE__*/React.createElement(\"li\", {\n    className: styles.item\n  }, i18n.t('Program stage: {{- stageName}}', {\n    stageName,\n    nsSeparator: '^^'\n  }));\n  const renderProgramName = () => programName && /*#__PURE__*/React.createElement(\"li\", {\n    className: styles.item\n  }, i18n.t('Program: {{- programName}}', {\n    programName,\n    nsSeparator: '^^'\n  }));\n  const renderItemsSection = itemsList => {\n    if (itemsList.length) {\n      return renderItems(itemsList);\n    } else {\n      if (axisId === AXIS_ID_FILTERS) {\n        return renderNoItemsLabel();\n      } else {\n        return /*#__PURE__*/React.createElement(\"li\", {\n          key: `${dimension.id}-all-selected`,\n          className: styles.item\n        }, i18n.t('Showing all values for this dimension'));\n      }\n    }\n  };\n  const itemDisplayNames = Boolean(itemIds.length) && getItemDisplayNames();\n  switch (dimension.dimensionType) {\n    case DIMENSION_TYPE_CATEGORY:\n    case DIMENSION_TYPE_CATEGORY_OPTION_GROUP_SET:\n    case DIMENSION_TYPE_ORGANISATION_UNIT_GROUP_SET:\n    case DIMENSION_TYPE_STATUS:\n      return /*#__PURE__*/React.createElement(\"ul\", {\n        className: styles.list,\n        \"data-test\": \"tooltip-content\"\n      }, renderProgramName(), renderItemsSection(itemDisplayNames));\n    case DIMENSION_TYPE_PERIOD:\n    case DIMENSION_TYPE_ORGANISATION_UNIT:\n      return /*#__PURE__*/React.createElement(\"ul\", {\n        className: styles.list,\n        \"data-test\": \"tooltip-content\"\n      }, renderProgramName(), itemDisplayNames ? renderItems(itemDisplayNames) : renderNoItemsLabel());\n    case DIMENSION_TYPE_DATA_ELEMENT:\n      {\n        return /*#__PURE__*/React.createElement(\"ul\", {\n          className: styles.list,\n          \"data-test\": \"tooltip-content\"\n        }, renderProgramName(), renderStageName(), renderItemsSection(conditionsTexts));\n      }\n    default:\n      {\n        return /*#__PURE__*/React.createElement(\"ul\", {\n          className: styles.list,\n          \"data-test\": \"tooltip-content\"\n        }, renderProgramName(), renderItemsSection(conditionsTexts));\n      }\n  }\n};\nTooltipContent.propTypes = {\n  conditionsTexts: PropTypes.array.isRequired,\n  dimension: PropTypes.object.isRequired,\n  axisId: PropTypes.string\n};\nexport default TooltipContent;","function _extends() { return _extends = Object.assign ? Object.assign.bind() : function (n) { for (var e = 1; e < arguments.length; e++) { var t = arguments[e]; for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]); } return n; }, _extends.apply(null, arguments); }\nimport { AXIS_ID_FILTERS } from '@dhis2/analytics';\nimport { Tooltip } from '@dhis2/ui';\nimport { useSortable } from '@dnd-kit/sortable';\nimport { CSS } from '@dnd-kit/utilities';\nimport cx from 'classnames';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { useSelector } from 'react-redux';\nimport { getConditionsTexts } from '../../modules/conditions.js';\nimport { sGetLoadError } from '../../reducers/loader.js';\nimport { sGetMetadata } from '../../reducers/metadata.js';\nimport { sGetUiItemsByDimension, sGetUiConditionsByDimension, sGetUiOptions, sGetUiInputType } from '../../reducers/ui.js';\nimport DimensionMenu from '../DimensionMenu/DimensionMenu.js';\nimport { ChipBase } from './ChipBase.js';\nimport styles from './styles/Chip.module.css';\nimport { default as TooltipContent } from './TooltipContent.js';\nconst BEFORE = 'BEFORE';\nconst AFTER = 'AFTER';\nconst Chip = _ref => {\n  var _conditions$condition;\n  let {\n    dimension,\n    axisId,\n    isLast,\n    overLastDropZone,\n    onClick,\n    activeIndex\n  } = _ref;\n  const {\n    id,\n    name,\n    dimensionType,\n    valueType,\n    optionSet\n  } = dimension;\n  const {\n    attributes,\n    listeners,\n    index,\n    isDragging,\n    isSorting,\n    over,\n    setNodeRef,\n    transform,\n    transition\n  } = useSortable({\n    id,\n    data: {\n      name,\n      dimensionType,\n      valueType,\n      optionSet\n    }\n  });\n  const metadata = useSelector(sGetMetadata);\n  const inputType = useSelector(sGetUiInputType);\n  const {\n    digitGroupSeparator\n  } = useSelector(sGetUiOptions);\n  const conditions = useSelector(state => sGetUiConditionsByDimension(state, dimension.id));\n  const items = useSelector(state => sGetUiItemsByDimension(state, dimension.id));\n  const globalLoadError = useSelector(sGetLoadError);\n  if (globalLoadError && !name) {\n    return null;\n  }\n  let insertPosition = undefined;\n  if ((over === null || over === void 0 ? void 0 : over.id) === id) {\n    // This chip is being hovered over by a dragged item\n    if (activeIndex === -1) {\n      //This item came from the dimensions panel\n      insertPosition = AFTER;\n    } else {\n      insertPosition = index > activeIndex ? AFTER : BEFORE;\n    }\n  }\n  if (isLast && overLastDropZone) {\n    insertPosition = AFTER;\n  }\n  const style = transform ? {\n    transform: isSorting ? undefined : CSS.Translate.toString({\n      x: transform.x,\n      y: transform.y,\n      scaleX: 1,\n      scaleY: 1\n    }),\n    transition\n  } : undefined;\n  const conditionsTexts = getConditionsTexts({\n    conditions,\n    metadata,\n    dimension,\n    formatValueOptions: {\n      digitGroupSeparator,\n      skipRounding: false\n    }\n  });\n  const renderTooltipContent = () => /*#__PURE__*/React.createElement(TooltipContent, {\n    dimension: dimension,\n    conditionsTexts: conditionsTexts,\n    axisId: axisId\n  });\n  return /*#__PURE__*/React.createElement(\"div\", _extends({\n    ref: setNodeRef\n  }, listeners, attributes, {\n    className: isLast ? styles.isLast : null,\n    style: style\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: cx(styles.chip, {\n      [styles.chipEmpty]: axisId === AXIS_ID_FILTERS && !items.length && !((_conditions$condition = conditions.condition) !== null && _conditions$condition !== void 0 && _conditions$condition.length) && !conditions.legendSet,\n      [styles.active]: isDragging,\n      [styles.insertBefore]: insertPosition === BEFORE,\n      [styles.insertAfter]: insertPosition === AFTER,\n      [styles.showBlank]: !name\n    })\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.content,\n    \"data-test\": `layout-chip-${id}`\n  }, /*#__PURE__*/React.createElement(Tooltip, {\n    content: renderTooltipContent(),\n    placement: \"bottom\",\n    dataTest: \"layout-chip-tooltip\",\n    closeDelay: 0\n  }, _ref2 => {\n    let {\n      ref,\n      onMouseOver,\n      onMouseOut\n    } = _ref2;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      id: Math.random().toString(36),\n      onClick: onClick,\n      ref: ref,\n      onMouseOver: onMouseOver,\n      onMouseOut: onMouseOut\n    }, /*#__PURE__*/React.createElement(ChipBase, {\n      dimension: dimension,\n      conditionsLength: conditionsTexts.length,\n      itemsLength: items.length,\n      inputType: inputType,\n      axisId: axisId\n    }));\n  }), /*#__PURE__*/React.createElement(DimensionMenu, {\n    dimensionId: id,\n    currentAxisId: axisId\n  }))));\n};\nChip.propTypes = {\n  dimension: PropTypes.object.isRequired,\n  onClick: PropTypes.func.isRequired,\n  activeIndex: PropTypes.number,\n  axisId: PropTypes.string,\n  isLast: PropTypes.bool,\n  overLastDropZone: PropTypes.bool\n};\nexport default Chip;","// extracted by mini-css-extract-plugin\nexport default {\"dropZone\":\"DropZone_dropZone__pNa7R\",\"isOver\":\"DropZone_isOver__oay1N\",\"isEmpty\":\"DropZone_isEmpty__pXlkY\"};","import { useDroppable } from '@dnd-kit/core';\nimport cx from 'classnames';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { getDropzoneId, FIRST } from '../../DndContext.js';\nimport styles from './styles/DropZone.module.css';\nconst DropZone = _ref => {\n  let {\n    axisId,\n    firstElementId,\n    overLastDropZone\n  } = _ref;\n  const {\n    isOver,\n    setNodeRef,\n    active\n  } = useDroppable({\n    id: getDropzoneId(axisId, FIRST)\n  });\n  let draggingOver = false;\n  if (overLastDropZone && !firstElementId) {\n    draggingOver = true;\n  } else {\n    draggingOver = firstElementId === (active === null || active === void 0 ? void 0 : active.id) ? false : isOver;\n  }\n  return /*#__PURE__*/React.createElement(\"div\", {\n    ref: setNodeRef,\n    className: cx(styles.dropZone, {\n      [styles.isOver]: draggingOver,\n      [styles.isEmpty]: !firstElementId\n    })\n  });\n};\nDropZone.propTypes = {\n  axisId: PropTypes.string,\n  firstElementId: PropTypes.string,\n  overLastDropZone: PropTypes.bool\n};\nexport { DropZone };","// extracted by mini-css-extract-plugin\nexport default {\"content\":\"DefaultAxis_content__25jnc\",\"lastDropzone\":\"DefaultAxis_lastDropzone__GMy5s\",\"axisContainer\":\"DefaultAxis_axisContainer__ER55A\",\"axisContainerLeft\":\"DefaultAxis_axisContainerLeft__TDyl+\",\"label\":\"DefaultAxis_label__XgzPs\"};","import { useDroppable } from '@dnd-kit/core';\nimport { SortableContext } from '@dnd-kit/sortable';\nimport cx from 'classnames';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { acSetUiOpenDimensionModal } from '../../../actions/ui.js';\nimport { getAxisName } from '../../../modules/axis.js';\nimport { getDimensionsWithSuffix } from '../../../modules/getDimensionsWithSuffix.js';\nimport { sGetMetadata } from '../../../reducers/metadata.js';\nimport { sGetUiDraggingId, sGetUiDimensionIdsByAxisId, sGetUiInputType, renderChipsSelector } from '../../../reducers/ui.js';\nimport { LAST, getDropzoneId } from '../../DndContext.js';\nimport Chip from '../Chip.js';\nimport { DropZone } from './DropZone.js';\nimport styles from './styles/DefaultAxis.module.css';\nconst DefaultAxis = _ref => {\n  let {\n    axisId,\n    className\n  } = _ref;\n  const lastDropZoneId = getDropzoneId(axisId, LAST);\n  const {\n    over,\n    setNodeRef\n  } = useDroppable({\n    id: lastDropZoneId\n  });\n  const dispatch = useDispatch();\n  const dimensionIds = useSelector(state => sGetUiDimensionIdsByAxisId(state, axisId));\n  const renderChips = useSelector(renderChipsSelector);\n  const draggingId = useSelector(sGetUiDraggingId);\n  const metadata = useSelector(sGetMetadata);\n  const inputType = useSelector(sGetUiInputType);\n  const activeIndex = draggingId ? dimensionIds.indexOf(draggingId) : -1;\n  const overLastDropZone = (over === null || over === void 0 ? void 0 : over.id) === lastDropZoneId;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    ref: setNodeRef,\n    className: styles.lastDropzone\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    id: axisId,\n    className: cx(styles.axisContainer, className)\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.label\n  }, getAxisName(axisId)), /*#__PURE__*/React.createElement(SortableContext, {\n    id: axisId,\n    items: dimensionIds\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.content,\n    \"data-test\": `${axisId}-axis`\n  }, /*#__PURE__*/React.createElement(DropZone, {\n    axisId: axisId,\n    firstElementId: dimensionIds[0],\n    overLastDropZone: overLastDropZone\n  }), renderChips && getDimensionsWithSuffix({\n    dimensionIds,\n    metadata,\n    inputType\n  }).map((dimension, i) => /*#__PURE__*/React.createElement(Chip, {\n    key: `${axisId}-${dimension.id}`,\n    onClick: () => dispatch(acSetUiOpenDimensionModal(dimension.id)),\n    dimension: dimension,\n    axisId: axisId,\n    isLast: i === dimensionIds.length - 1,\n    overLastDropZone: overLastDropZone,\n    activeIndex: activeIndex\n  }))))));\n};\nDefaultAxis.propTypes = {\n  axisId: PropTypes.string,\n  className: PropTypes.string\n};\nexport default DefaultAxis;","// extracted by mini-css-extract-plugin\nexport default {\"ct\":\"DefaultLayout_ct__+OU2V\",\"axisGroup\":\"DefaultLayout_axisGroup__mqgYH\",\"axisGroupLeft\":\"DefaultLayout_axisGroupLeft__ZR2Vy\",\"axisGroupRight\":\"DefaultLayout_axisGroupRight__oxsoH\",\"columns\":\"DefaultLayout_columns__GrqV9\",\"rows\":\"DefaultLayout_rows__snUzF\"};","// extracted by mini-css-extract-plugin\nexport default {\"axisGroupLeft\":\"LineListLayout_axisGroupLeft__Av9cS\",\"axisGroupRight\":\"LineListLayout_axisGroupRight__gngAu\"};","import { AXIS_ID_COLUMNS, AXIS_ID_FILTERS } from '@dhis2/analytics';\nimport cx from 'classnames';\nimport React from 'react';\nimport DefaultAxis from '../DefaultLayout/DefaultAxis.js';\nimport defaultAxisStyles from '../DefaultLayout/styles/DefaultAxis.module.css';\nimport defaultLayoutStyles from '../DefaultLayout/styles/DefaultLayout.module.css';\nimport lineListLayoutStyles from './styles/LineListLayout.module.css';\nconst Layout = () => /*#__PURE__*/React.createElement(\"div\", {\n  id: \"layout-ct\",\n  className: defaultLayoutStyles.ct\n}, /*#__PURE__*/React.createElement(\"div\", {\n  id: \"axis-group-1\",\n  className: cx(defaultLayoutStyles.axisGroup, lineListLayoutStyles.axisGroupLeft)\n}, /*#__PURE__*/React.createElement(DefaultAxis, {\n  axisId: AXIS_ID_COLUMNS,\n  className: cx(defaultLayoutStyles.filters, defaultAxisStyles.axisContainerLeft)\n})), /*#__PURE__*/React.createElement(\"div\", {\n  id: \"axis-group-2\",\n  className: cx(defaultLayoutStyles.axisGroup, lineListLayoutStyles.axisGroupRight)\n}, /*#__PURE__*/React.createElement(DefaultAxis, {\n  axisId: AXIS_ID_FILTERS,\n  className: defaultLayoutStyles.filters\n})));\nexport default Layout;","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"Layout_container__dA9Gf\",\"hidden\":\"Layout_hidden__HGdMV\",\"overflowContainer\":\"Layout_overflowContainer__S5zO6\",\"expanded\":\"Layout_expanded__3KBw3\",\"button\":\"Layout_button__SRSwr\"};","import { IconChevronUp16, IconChevronDown16, colors } from '@dhis2/ui';\nimport cx from 'classnames';\nimport React from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { acSetShowExpandedLayoutPanel } from '../../actions/ui.js';\nimport { LAYOUT_TYPE_LINE_LIST } from '../../modules/layout.js';\nimport { sGetUiLayoutPanelHidden, sGetUiShowExpandedLayoutPanel } from '../../reducers/ui.js';\nimport LineListLayout from './LineListLayout/LineListLayout.js';\nimport classes from './styles/Layout.module.css';\nconst componentMap = {\n  [LAYOUT_TYPE_LINE_LIST]: LineListLayout\n};\nconst Layout = () => {\n  const isExpanded = useSelector(state => sGetUiShowExpandedLayoutPanel(state));\n  const isHidden = useSelector(sGetUiLayoutPanelHidden);\n  const dispatch = useDispatch();\n  const toggleExpanded = () => dispatch(acSetShowExpandedLayoutPanel(!isExpanded));\n  const layoutType = LAYOUT_TYPE_LINE_LIST;\n  const LayoutComponent = componentMap[layoutType];\n  const ButtonIcon = isExpanded ? IconChevronUp16 : IconChevronDown16;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: cx(classes.container, {\n      [classes.hidden]: isHidden\n    }),\n    \"data-test\": \"layout-container\"\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: cx(classes.overflowContainer, {\n      [classes.expanded]: isExpanded\n    })\n  }, /*#__PURE__*/React.createElement(LayoutComponent, null)), /*#__PURE__*/React.createElement(\"button\", {\n    className: classes.button,\n    onClick: toggleExpanded,\n    \"data-test\": \"layout-height-toggle\"\n  }, /*#__PURE__*/React.createElement(ButtonIcon, {\n    color: colors.grey700\n  })));\n};\nexport default Layout;","// extracted by mini-css-extract-plugin\nexport default {\"progress\":\"LoadingMask_progress__JfRR7\",\"outer\":\"LoadingMask_outer__qfvQ9\"};","import { CircularLoader } from '@dhis2/ui';\nimport React from 'react';\nimport styles from './styles/LoadingMask.module.css';\nfunction LoadingMask() {\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.outer\n  }, /*#__PURE__*/React.createElement(CircularLoader, {\n    className: styles.progress\n  }));\n}\nexport default LoadingMask;","// extracted by mini-css-extract-plugin\nexport default {\"rows\":\"ProgramSelect_rows__nIrrK\",\"columns\":\"ProgramSelect_columns__5Enoa\",\"stretch\":\"ProgramSelect_stretch__f7v2T\",\"stage\":\"ProgramSelect_stage__BvuPf\",\"label\":\"ProgramSelect_label__ZPc6v\"};","// extracted by mini-css-extract-plugin\nexport default {\"option\":\"SingleSelectOptionWithSuffix_option__Z4e3r\",\"active\":\"SingleSelectOptionWithSuffix_active__MkTXf\",\"disabled\":\"SingleSelectOptionWithSuffix_disabled__rwZQg\",\"tag\":\"SingleSelectOptionWithSuffix_tag__Ss5Oc\"};","import { Tag } from '@dhis2/ui';\nimport cx from 'classnames';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport styles from './SingleSelectOptionWithSuffix.module.css';\nexport const SingleSelectOptionWithSuffix = _ref => {\n  let {\n    label,\n    active,\n    disabled,\n    onClick,\n    value,\n    dataTest,\n    suffix\n  } = _ref;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: cx(styles.option, {\n      [styles.disabled]: disabled,\n      [styles.active]: active\n    }),\n    onClick: e => onClick({}, e),\n    \"data-value\": value,\n    \"data-label\": label,\n    \"data-test\": dataTest\n  }, label, suffix && /*#__PURE__*/React.createElement(Tag, {\n    className: styles.tag\n  }, suffix.toString()));\n};\nSingleSelectOptionWithSuffix.propTypes = {\n  label: PropTypes.string.isRequired,\n  value: PropTypes.string.isRequired,\n  active: PropTypes.bool,\n  dataTest: PropTypes.string,\n  disabled: PropTypes.bool,\n  suffix: PropTypes.number,\n  onClick: PropTypes.func\n};","import i18n from '@dhis2/d2-i18n';\nimport { SingleSelect, SingleSelectOption } from '@dhis2/ui';\nimport cx from 'classnames';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { tSetUiStage, tClearUiProgramStageDimensions } from '../../../actions/ui.js';\nimport { sGetUiProgramStageId } from '../../../reducers/ui.js';\nimport styles from './ProgramSelect.module.css';\nconst StageSelect = _ref => {\n  let {\n    stages\n  } = _ref;\n  const dispatch = useDispatch();\n  const selectedStageId = useSelector(sGetUiProgramStageId);\n  const onChange = _ref2 => {\n    let {\n      selected: stageId\n    } = _ref2;\n    const stage = stages.find(_ref3 => {\n      let {\n        id\n      } = _ref3;\n      return id === stageId;\n    });\n    dispatch(tSetUiStage(stage));\n    if (selectedStageId) {\n      dispatch(tClearUiProgramStageDimensions(selectedStageId));\n    }\n  };\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: cx(styles.rows, styles.stage)\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: styles.label\n  }, i18n.t('Stage')), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.columns\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.stretch\n  }, /*#__PURE__*/React.createElement(SingleSelect, {\n    dense: true,\n    selected: selectedStageId,\n    onChange: onChange,\n    dataTest: \"stage-select\",\n    filterable: true,\n    noMatchText: i18n.t('No stages found')\n  }, stages.map(_ref4 => {\n    let {\n      id,\n      name\n    } = _ref4;\n    return /*#__PURE__*/React.createElement(SingleSelectOption, {\n      label: name,\n      key: id,\n      value: id\n    });\n  })))));\n};\nStageSelect.propTypes = {\n  stages: PropTypes.arrayOf(PropTypes.object).isRequired\n};\nexport { StageSelect };","import { useCachedDataQuery } from '@dhis2/analytics';\nimport { useDataQuery } from '@dhis2/app-runtime';\nimport i18n from '@dhis2/d2-i18n';\nimport { NoticeBox, SingleSelect } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React, { useEffect, useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { tSetUiProgram } from '../../../actions/ui.js';\nimport { extractDimensionIdParts } from '../../../modules/dimensionId.js';\nimport { PROGRAM_TYPE_WITH_REGISTRATION } from '../../../modules/programTypes.js';\nimport { DERIVED_USER_SETTINGS_DISPLAY_NAME_PROPERTY } from '../../../modules/userSettings.js';\nimport { OUTPUT_TYPE_ENROLLMENT, OUTPUT_TYPE_EVENT, OUTPUT_TYPE_TRACKED_ENTITY } from '../../../modules/visualization.js';\nimport { sGetMetadataById } from '../../../reducers/metadata.js';\nimport { sGetDimensionIdsFromLayout, sGetUiEntityTypeId, sGetUiInputType, sGetUiProgramId } from '../../../reducers/ui.js';\nimport styles from './ProgramSelect.module.css';\nimport { SingleSelectOptionWithSuffix } from './SingleSelectOptionWithSuffix.js';\nimport { StageSelect } from './StageSelect.js';\nconst query = {\n  programs: {\n    resource: 'programs',\n    params: _ref => {\n      let {\n        nameProp,\n        selectedEntityTypeId,\n        inputType\n      } = _ref;\n      return {\n        fields: ['id', `${nameProp}~rename(name)`, 'enrollmentDateLabel', 'incidentDateLabel', 'programType', 'programStages[id,displayName~rename(name),displayExecutionDateLabel,hideDueDate,displayDueDateLabel,repeatable]', 'displayIncidentDate', 'displayIncidentDateLabel', 'displayEnrollmentDateLabel'],\n        paging: false,\n        filter: ['access.data.read:eq:true', ...(selectedEntityTypeId ? [`trackedEntityType.id:eq:${selectedEntityTypeId}`] : []), ...(inputType === OUTPUT_TYPE_ENROLLMENT ? [`programType:eq:${PROGRAM_TYPE_WITH_REGISTRATION}`] : [])]\n      };\n    }\n  }\n};\nconst ProgramSelect = _ref2 => {\n  let {\n    prefix\n  } = _ref2;\n  const {\n    currentUser\n  } = useCachedDataQuery();\n  const dispatch = useDispatch();\n  const selectedEntityTypeId = useSelector(sGetUiEntityTypeId);\n  const selectedProgramId = useSelector(sGetUiProgramId);\n  const selectedProgram = useSelector(state => sGetMetadataById(state, selectedProgramId));\n  const allDimensionIds = useSelector(sGetDimensionIdsFromLayout);\n  const inputType = useSelector(sGetUiInputType);\n  const {\n    fetching,\n    error,\n    data,\n    refetch\n  } = useDataQuery(query, {\n    lazy: true\n  });\n  const [programDimensionsMap, setProgramDimensionsMap] = useState({});\n  const programs = data === null || data === void 0 ? void 0 : data.programs.programs;\n  const programType = selectedProgram === null || selectedProgram === void 0 ? void 0 : selectedProgram.programType;\n  const requiredStageSelection = inputType === OUTPUT_TYPE_EVENT && programType === PROGRAM_TYPE_WITH_REGISTRATION;\n  const showStageSelect = selectedProgram && requiredStageSelection;\n  const setSelectedProgramId = programId => {\n    if (programId !== selectedProgramId) {\n      const program = programs === null || programs === void 0 ? void 0 : programs.find(_ref3 => {\n        let {\n          id\n        } = _ref3;\n        return id === programId;\n      });\n      const stage =\n      // auto-select first stage if input type is Event\n      inputType === OUTPUT_TYPE_EVENT && program !== null && program !== void 0 && program.programStages.length ? program.programStages[0] : undefined;\n      dispatch(tSetUiProgram({\n        program,\n        stage\n      }));\n    }\n  };\n  useEffect(() => {\n    if (inputType === OUTPUT_TYPE_TRACKED_ENTITY && selectedEntityTypeId) {\n      const map = {};\n      allDimensionIds.forEach(id => {\n        const {\n          programId\n        } = extractDimensionIdParts(id, inputType);\n        if (programId) {\n          map[programId] = map[programId] ? map[programId] + 1 : 1;\n        }\n      });\n      setProgramDimensionsMap(map);\n    }\n  }, [selectedEntityTypeId, allDimensionIds, inputType]);\n  useEffect(() => {\n    refetch({\n      nameProp: currentUser.settings[DERIVED_USER_SETTINGS_DISPLAY_NAME_PROPERTY],\n      selectedEntityTypeId,\n      inputType\n    });\n  }, [refetch, selectedEntityTypeId, currentUser, inputType]);\n  if (error && !fetching) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.section\n    }, /*#__PURE__*/React.createElement(NoticeBox, {\n      error: true,\n      title: i18n.t('Could not load programs')\n    }, (error === null || error === void 0 ? void 0 : error.message) || i18n.t(\"The programs couldn't be retrieved. Try again or contact your system administrator.\")));\n  }\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.rows\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.columns\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.stretch\n  }, /*#__PURE__*/React.createElement(SingleSelect, {\n    dense: true,\n    selected: (selectedProgram === null || selectedProgram === void 0 ? void 0 : selectedProgram.id) || '',\n    onChange: _ref4 => {\n      let {\n        selected\n      } = _ref4;\n      return setSelectedProgramId(selected);\n    },\n    placeholder: i18n.t('Choose a program'),\n    maxHeight: \"max(60vh, 460px)\",\n    dataTest: \"program-dimensions-program-select\",\n    filterable: true,\n    noMatchText: i18n.t('No programs found'),\n    prefix: selectedProgram !== null && selectedProgram !== void 0 && selectedProgram.id ? prefix : '',\n    empty: i18n.t('No programs found'),\n    loading: fetching\n  }, (fetching || !programs) && (selectedProgram === null || selectedProgram === void 0 ? void 0 : selectedProgram.id) && /*#__PURE__*/React.createElement(SingleSelectOptionWithSuffix, {\n    key: selectedProgram === null || selectedProgram === void 0 ? void 0 : selectedProgram.id,\n    label: selectedProgram === null || selectedProgram === void 0 ? void 0 : selectedProgram.name,\n    suffix: selectedEntityTypeId && (selectedProgram === null || selectedProgram === void 0 ? void 0 : selectedProgram.id) && programDimensionsMap[selectedProgram.id] || null,\n    value: selectedProgram === null || selectedProgram === void 0 ? void 0 : selectedProgram.id\n  }), !fetching && (programs === null || programs === void 0 ? void 0 : programs.map(_ref5 => {\n    let {\n      id,\n      name\n    } = _ref5;\n    return /*#__PURE__*/React.createElement(SingleSelectOptionWithSuffix, {\n      key: id,\n      label: name,\n      value: id,\n      suffix: selectedEntityTypeId && programDimensionsMap[id] || null\n    });\n  }))))), showStageSelect && /*#__PURE__*/React.createElement(StageSelect, {\n    stages: selectedProgram.programStages\n  }));\n};\nProgramSelect.propTypes = {\n  prefix: PropTypes.string\n};\nexport { ProgramSelect };","import { useDataQuery } from '@dhis2/app-runtime';\nimport i18n from '@dhis2/d2-i18n';\nimport { NoticeBox, SingleSelect, SingleSelectOption } from '@dhis2/ui';\nimport React, { useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { tSetUiEntityType } from '../../../actions/ui.js';\nimport { sGetMetadataById } from '../../../reducers/metadata.js';\nimport { sGetUiEntityTypeId } from '../../../reducers/ui.js';\nimport styles from './ProgramSelect.module.css';\nconst query = {\n  programs: {\n    resource: 'trackedEntityTypes',\n    params: () => ({\n      fields: ['id', 'displayName~rename(name)'],\n      paging: false,\n      filter: 'access.data.read:eq:true'\n    })\n  }\n};\nconst TypeSelect = () => {\n  const dispatch = useDispatch();\n  const selectedTypeId = useSelector(sGetUiEntityTypeId);\n  const {\n    fetching,\n    error,\n    data,\n    refetch,\n    called\n  } = useDataQuery(query, {\n    lazy: true\n  });\n  const types = data === null || data === void 0 ? void 0 : data.programs.trackedEntityTypes;\n  const selectedType = useSelector(state => sGetMetadataById(state, selectedTypeId));\n  const setSelectedTypeId = typeId => {\n    if (typeId !== selectedTypeId) {\n      const type = types === null || types === void 0 ? void 0 : types.find(_ref => {\n        let {\n          id\n        } = _ref;\n        return id === typeId;\n      });\n      dispatch(tSetUiEntityType({\n        type\n      }));\n    }\n  };\n  useEffect(() => {\n    if (!called) {\n      refetch();\n    }\n  }, [called, refetch]);\n  if (error && !fetching) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.section\n    }, /*#__PURE__*/React.createElement(NoticeBox, {\n      error: true,\n      title: i18n.t('Could not load types')\n    }, (error === null || error === void 0 ? void 0 : error.message) || i18n.t(\"The types couldn't be retrieved. Try again or contact your system administrator.\")));\n  }\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.rows\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.columns\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.stretch\n  }, /*#__PURE__*/React.createElement(SingleSelect, {\n    dense: true,\n    selected: (selectedType === null || selectedType === void 0 ? void 0 : selectedType.id) || '',\n    onChange: _ref2 => {\n      let {\n        selected\n      } = _ref2;\n      return setSelectedTypeId(selected);\n    },\n    placeholder: i18n.t('Choose a type'),\n    maxHeight: \"max(60vh, 460px)\",\n    dataTest: \"type-select\",\n    filterable: true,\n    noMatchText: i18n.t('No types found'),\n    loading: fetching\n  }, (fetching || !types) && (selectedType === null || selectedType === void 0 ? void 0 : selectedType.id) && /*#__PURE__*/React.createElement(SingleSelectOption, {\n    key: selectedType === null || selectedType === void 0 ? void 0 : selectedType.id,\n    label: selectedType === null || selectedType === void 0 ? void 0 : selectedType.name,\n    value: selectedType === null || selectedType === void 0 ? void 0 : selectedType.id\n  }), !fetching && (types === null || types === void 0 ? void 0 : types.map(_ref3 => {\n    let {\n      id,\n      name\n    } = _ref3;\n    return /*#__PURE__*/React.createElement(SingleSelectOption, {\n      key: id,\n      label: name,\n      value: id\n    });\n  }))))));\n};\nTypeSelect.propTypes = {};\nexport { TypeSelect };","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"InputOption_container__Vc6Y5\",\"selected\":\"InputOption_selected__9-xzC\",\"label\":\"InputOption_label__fwmsw\",\"header\":\"InputOption_header__Fu3Hd\",\"description\":\"InputOption_description__O4mja\"};","import { Radio } from '@dhis2/ui';\nimport cx from 'classnames';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport styles from './InputOption.module.css';\nconst InputOption = _ref => {\n  let {\n    header,\n    description,\n    onClick,\n    selected,\n    dataTest,\n    children\n  } = _ref;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: cx(styles.container, {\n      [styles.selected]: selected\n    }),\n    onClick: onClick,\n    \"data-test\": dataTest\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.label\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.header\n  }, /*#__PURE__*/React.createElement(Radio, {\n    dense: true,\n    checked: selected\n  }), /*#__PURE__*/React.createElement(\"span\", null, header)), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.description\n  }, description), children));\n};\nInputOption.propTypes = {\n  description: PropTypes.string.isRequired,\n  header: PropTypes.string.isRequired,\n  selected: PropTypes.bool.isRequired,\n  onClick: PropTypes.func.isRequired,\n  children: PropTypes.node,\n  dataTest: PropTypes.string\n};\nexport { InputOption };","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"InputPanel_container__c08tP\"};","import { useConfig } from '@dhis2/app-runtime';\nimport i18n from '@dhis2/d2-i18n';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { tSetUiInput } from '../../../actions/ui.js';\nimport { OUTPUT_TYPE_EVENT, OUTPUT_TYPE_ENROLLMENT, OUTPUT_TYPE_TRACKED_ENTITY } from '../../../modules/visualization.js';\nimport { sGetUiInput } from '../../../reducers/ui.js';\nimport { ProgramSelect } from '../ProgramDimensionsPanel/ProgramSelect.js';\nimport { TypeSelect } from '../ProgramDimensionsPanel/TypeSelect.js';\nimport { InputOption } from './InputOption.js';\nimport styles from './InputPanel.module.css';\nexport const getLabelForInputType = type => {\n  switch (type) {\n    case OUTPUT_TYPE_EVENT:\n      return i18n.t('Event');\n    case OUTPUT_TYPE_ENROLLMENT:\n      return i18n.t('Enrollment');\n    case OUTPUT_TYPE_TRACKED_ENTITY:\n      return i18n.t('Tracked entity');\n    default:\n      throw new Error('No input type specified');\n  }\n};\nexport const InputPanel = _ref => {\n  var _useSelector;\n  let {\n    visible\n  } = _ref;\n  const dispatch = useDispatch();\n  const {\n    serverVersion\n  } = useConfig();\n  const selectedInput = (_useSelector = useSelector(sGetUiInput)) === null || _useSelector === void 0 ? void 0 : _useSelector.type;\n  if (!visible) {\n    return null;\n  }\n  const setSelectedInput = input => {\n    if (selectedInput !== input) {\n      dispatch(tSetUiInput({\n        type: input\n      }));\n    }\n  };\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.container,\n    \"data-test\": \"input-panel\"\n  }, /*#__PURE__*/React.createElement(InputOption, {\n    dataTest: \"input-event\",\n    header: getLabelForInputType(OUTPUT_TYPE_EVENT),\n    description: i18n.t('See individual event data from a Tracker program stage or event program.'),\n    onClick: () => setSelectedInput(OUTPUT_TYPE_EVENT),\n    selected: selectedInput === OUTPUT_TYPE_EVENT\n  }, selectedInput === OUTPUT_TYPE_EVENT && /*#__PURE__*/React.createElement(ProgramSelect, null)), /*#__PURE__*/React.createElement(InputOption, {\n    dataTest: \"input-enrollment\",\n    header: getLabelForInputType(OUTPUT_TYPE_ENROLLMENT),\n    description: i18n.t('See data from multiple program stages in a Tracker program.'),\n    onClick: () => setSelectedInput(OUTPUT_TYPE_ENROLLMENT),\n    selected: selectedInput === OUTPUT_TYPE_ENROLLMENT\n  }, selectedInput === OUTPUT_TYPE_ENROLLMENT && /*#__PURE__*/React.createElement(ProgramSelect, null)), `${serverVersion.major}.${serverVersion.minor}.${serverVersion.patch || 0}` >= '2.41.0' && /*#__PURE__*/React.createElement(InputOption, {\n    dataTest: \"input-tracked-entity\",\n    header: getLabelForInputType(OUTPUT_TYPE_TRACKED_ENTITY),\n    description: i18n.t('See individual tracked entities from one or more Tracker programs.'),\n    onClick: () => setSelectedInput(OUTPUT_TYPE_TRACKED_ENTITY),\n    selected: selectedInput === OUTPUT_TYPE_TRACKED_ENTITY\n  }, selectedInput === OUTPUT_TYPE_TRACKED_ENTITY && /*#__PURE__*/React.createElement(TypeSelect, null)));\n};\nInputPanel.propTypes = {\n  visible: PropTypes.bool.isRequired\n};","// extracted by mini-css-extract-plugin\nexport default {\"span\":\"common_span__Xw88K\",\"notAllowed\":\"common_notAllowed__58Lkt\"};","// extracted by mini-css-extract-plugin\nexport default {\"wrapper\":\"DimensionItemButton_wrapper__OWApC\",\"hidden\":\"DimensionItemButton_hidden__wm9Xq\"};","import cx from 'classnames';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport IconButton from '../../IconButton/IconButton.js';\nimport styles from './DimensionItemButton.module.css';\nconst DimensionItemButton = _ref => {\n  let {\n    onClick,\n    icon,\n    dataTest\n  } = _ref;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: cx(styles.hidden, styles.wrapper),\n    \"data-test\": dataTest\n  }, /*#__PURE__*/React.createElement(IconButton, {\n    onClick: onClick\n  }, icon));\n};\nDimensionItemButton.propTypes = {\n  onClick: PropTypes.func.isRequired,\n  dataTest: PropTypes.string,\n  icon: PropTypes.object\n};\nexport { DimensionItemButton };","function _extends() { return _extends = Object.assign ? Object.assign.bind() : function (n) { for (var e = 1; e < arguments.length; e++) { var t = arguments[e]; for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]); } return n; }, _extends.apply(null, arguments); }\nimport { IconAdd16 } from '@dhis2/ui';\nimport { useSortable } from '@dnd-kit/sortable';\nimport { CSS } from '@dnd-kit/utilities';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { useDispatch } from 'react-redux';\nimport { acAddUiLayoutDimensions, acRemoveUiLayoutDimensions, acSetUiOpenDimensionModal } from '../../../actions/ui.js';\nimport { DimensionItemBase } from './DimensionItemBase.js';\nimport { DimensionItemButton } from './DimensionItemButton.js';\n\n// TODO: import from `ui` when available\nconst IconSubtract16 = () => /*#__PURE__*/React.createElement(\"svg\", {\n  width: \"16\",\n  height: \"16\",\n  viewBox: \"0 0 16 16\",\n  xmlns: \"http://www.w3.org/2000/svg\"\n}, /*#__PURE__*/React.createElement(\"path\", {\n  fill: \"var(--colors-grey600)\",\n  d: \"M2 8C2 7.44772 2.44772 7 3 7H13C13.5523 7 14 7.44772 14 8V8C14 8.55228 13.5523 9 13 9H3C2.44772 9 2 8.55228 2 8V8Z\"\n}));\nexport const DimensionItem = _ref => {\n  let {\n    id,\n    draggableId,\n    name,\n    dimensionType,\n    valueType,\n    optionSet,\n    stageName,\n    disabled,\n    selected\n  } = _ref;\n  const dispatch = useDispatch();\n  const dimensionMetadata = {\n    [id]: {\n      id,\n      name,\n      dimensionType,\n      valueType,\n      optionSet\n    }\n  };\n  const onClick = disabled ? undefined : () => dispatch(acSetUiOpenDimensionModal(id, dimensionMetadata));\n  const {\n    attributes,\n    listeners,\n    isSorting,\n    setNodeRef,\n    transform,\n    transition\n  } = useSortable({\n    id: draggableId || id,\n    disabled: disabled || selected,\n    data: dimensionMetadata[id]\n  });\n  const style = transform ? {\n    transform: isSorting ? undefined : CSS.Translate.toString({\n      x: transform.x,\n      y: transform.y,\n      scaleX: 1,\n      scaleY: 1\n    }),\n    transition\n  } : undefined;\n  return /*#__PURE__*/React.createElement(\"div\", _extends({}, attributes, listeners, {\n    ref: setNodeRef,\n    style: style\n  }), /*#__PURE__*/React.createElement(DimensionItemBase, {\n    name: name,\n    dimensionType: dimensionType,\n    disabled: disabled,\n    selected: selected,\n    stageName: stageName,\n    onClick: onClick,\n    dataTest: `dimension-item-${id}`,\n    contextMenu: !disabled && /*#__PURE__*/React.createElement(DimensionItemButton, {\n      dataTest: `item-button-${id}`,\n      icon: selected ? /*#__PURE__*/React.createElement(IconSubtract16, null) : /*#__PURE__*/React.createElement(IconAdd16, {\n        color: \"var(--colors-grey600)\"\n      }),\n      onClick: e => {\n        e && e.stopPropagation();\n        if (!selected) {\n          dispatch(acAddUiLayoutDimensions({\n            [id]: {\n              axisId: 'columns'\n            }\n          }, dimensionMetadata));\n        } else {\n          dispatch(acRemoveUiLayoutDimensions(id));\n        }\n      }\n    })\n  }));\n};\nDimensionItem.propTypes = {\n  dimensionType: PropTypes.string.isRequired,\n  draggableId: PropTypes.string.isRequired,\n  id: PropTypes.string.isRequired,\n  name: PropTypes.string.isRequired,\n  disabled: PropTypes.bool,\n  optionSet: PropTypes.string,\n  selected: PropTypes.bool,\n  stageName: PropTypes.string,\n  valueType: PropTypes.string\n};","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"MainSidebarSection_container__HzXDZ\",\"header\":\"MainSidebarSection_header__m7PWp\",\"list\":\"MainSidebarSection_list__Zsc3Q\"};","import PropTypes from 'prop-types';\nimport React from 'react';\nimport styles from './MainSidebarSection.module.css';\nexport const MainSidebarSection = _ref => {\n  let {\n    children,\n    header,\n    dataTest\n  } = _ref;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.container,\n    \"data-test\": dataTest\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.header\n  }, header), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.list\n  }, children));\n};\nMainSidebarSection.propTypes = {\n  children: PropTypes.node,\n  dataTest: PropTypes.string,\n  header: PropTypes.string\n};","import { DIMENSION_ID_ORGUNIT, DIMENSION_TYPE_PROGRAM_ATTRIBUTE } from '@dhis2/analytics';\nimport PropTypes from 'prop-types';\nimport React, { createContext, useMemo, useContext } from 'react';\nimport { useSelector, useStore } from 'react-redux';\nimport { DIMENSION_ID_EVENT_STATUS, DIMENSION_ID_PROGRAM_STATUS, DIMENSION_TYPES_PROGRAM, DIMENSION_TYPES_YOURS } from '../../modules/dimensionConstants.js';\nimport { extractDimensionIdParts } from '../../modules/dimensionId.js';\nimport { getTimeDimensions } from '../../modules/timeDimensions.js';\nimport { OUTPUT_TYPE_TRACKED_ENTITY } from '../../modules/visualization.js';\nimport { sGetUiInputType, sGetUiLayout } from '../../reducers/ui.js';\nconst SelectedDimensionsContext = /*#__PURE__*/createContext({\n  counts: {\n    your: 0,\n    program: 0,\n    trackedEntity: 0\n  },\n  getIsDimensionSelected: () => {\n    throw new Error('Context not initialized correctly');\n  }\n});\nexport const SelectedDimensionsProvider = _ref => {\n  let {\n    children\n  } = _ref;\n  const layout = useSelector(sGetUiLayout);\n  const selectedInputType = useSelector(sGetUiInputType);\n  const store = useStore();\n  const providerValue = useMemo(() => {\n    const allSelectedIds = [...layout.columns, ...layout.filters\n    // Rows not used now, but will be later\n    //   ...layout.rows,\n    ];\n\n    /*\n     * Access metadata this way to prevent this component\n     * and its hook consumers to re-render every time\n     * something changes in the metadata store\n     */\n    const {\n      metadata\n    } = store.getState();\n    const allSelectedIdsSet = new Set(allSelectedIds);\n    const counts = allSelectedIds.reduce((acc, id) => {\n      var _metadata$id;\n      const {\n        dimensionType\n      } = (_metadata$id = metadata[id]) !== null && _metadata$id !== void 0 ? _metadata$id : {};\n      const {\n        dimensionId\n      } = extractDimensionIdParts(id, selectedInputType);\n      if (dimensionType === DIMENSION_TYPE_PROGRAM_ATTRIBUTE && selectedInputType === OUTPUT_TYPE_TRACKED_ENTITY) {\n        acc.trackedEntity += 1;\n      } else if (DIMENSION_TYPES_PROGRAM.has(dimensionType) || [DIMENSION_ID_EVENT_STATUS, DIMENSION_ID_PROGRAM_STATUS, ...Object.keys(getTimeDimensions())].includes(dimensionId)) {\n        acc.program += 1;\n      } else if (dimensionId === DIMENSION_ID_ORGUNIT) {\n        if (selectedInputType !== OUTPUT_TYPE_TRACKED_ENTITY) {\n          acc.program += 1;\n        } else if (id !== DIMENSION_ID_ORGUNIT) {\n          // exclude \"ou\" which is a global dimension, but add count for program org units\n          acc.program += 1;\n        }\n      } else if (DIMENSION_TYPES_YOURS.has(dimensionType)) {\n        acc.your += 1;\n      }\n      return acc;\n    }, {\n      program: 0,\n      your: 0,\n      trackedEntity: 0\n    });\n    return {\n      counts,\n      getIsDimensionSelected: id => allSelectedIdsSet.has(id)\n    };\n  }, [layout]);\n  return /*#__PURE__*/React.createElement(SelectedDimensionsContext.Provider, {\n    value: providerValue\n  }, children);\n};\nSelectedDimensionsProvider.propTypes = {\n  children: PropTypes.node\n};\nexport const useSelectedDimensions = () => useContext(SelectedDimensionsContext);","function _extends() { return _extends = Object.assign ? Object.assign.bind() : function (n) { for (var e = 1; e < arguments.length; e++) { var t = arguments[e]; for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]); } return n; }, _extends.apply(null, arguments); }\nimport i18n from '@dhis2/d2-i18n';\nimport React from 'react';\nimport { useMainDimensions } from '../../reducers/ui.js';\nimport styles from './common.module.css';\nimport { DimensionItem } from './DimensionItem/index.js';\nimport { MainSidebarSection } from './MainSidebarSection.js';\nimport { useSelectedDimensions } from './SelectedDimensionsContext.js';\nexport const MainDimensions = () => {\n  const mainDimensions = useMainDimensions();\n  const {\n    getIsDimensionSelected\n  } = useSelectedDimensions();\n  const draggableDimensions = mainDimensions.map(dimension => ({\n    draggableId: `main-${dimension.id}`,\n    ...dimension\n  }));\n  return /*#__PURE__*/React.createElement(MainSidebarSection, {\n    header: i18n.t('Global dimensions'),\n    dataTest: \"main-dimensions-sidebar\"\n  }, draggableDimensions.map(dimension => /*#__PURE__*/React.createElement(\"span\", {\n    className: styles.span,\n    key: dimension.id\n  }, /*#__PURE__*/React.createElement(DimensionItem, _extends({}, dimension, {\n    selected: getIsDimensionSelected(dimension.id)\n  })))));\n};","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"MainSidebar_container__7zCzj\",\"hidden\":\"MainSidebar_hidden__PbK9A\",\"main\":\"MainSidebar_main__N9DsF\",\"accessory\":\"MainSidebar_accessory__ttQq3\",\"transitioning\":\"MainSidebar_transitioning__hhBHt\",\"accessoryInner\":\"MainSidebar_accessoryInner__7SM-v\",\"padded\":\"MainSidebar_padded__ohwd2\",\"resizeHandle\":\"MainSidebar_resizeHandle__Ey5vG\",\"resizing\":\"MainSidebar_resizing__lzYG5\"};","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"MenuItem_container__oiDdH\",\"selected\":\"MenuItem_selected__POoF7\",\"disabled\":\"MenuItem_disabled__2Stfb\",\"icon\":\"MenuItem_icon__aG7ui\",\"labelWrapper\":\"MenuItem_labelWrapper__ccyRZ\",\"label\":\"MenuItem_label__i5vVe\",\"count\":\"MenuItem_count__C3p3k\",\"dashed\":\"MenuItem_dashed__OoxkL\",\"chevron\":\"MenuItem_chevron__-2i06\",\"subtitle\":\"MenuItem_subtitle__xhb+G\"};","import { IconChevronRight16 } from '@dhis2/ui';\nimport cx from 'classnames';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport styles from './MenuItem.module.css';\nconst MenuItem = _ref => {\n  let {\n    icon,\n    label,\n    count,\n    onClick,\n    disabled,\n    selected,\n    dataTest,\n    subtitle\n  } = _ref;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: cx(styles.container, {\n      [styles.selected]: selected,\n      [styles.disabled]: disabled\n    }),\n    onClick: !disabled ? onClick : null,\n    tabIndex: \"0\",\n    \"data-test\": dataTest\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.icon\n  }, icon), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.labelWrapper\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: styles.label\n  }, label), subtitle && /*#__PURE__*/React.createElement(\"span\", {\n    className: styles.subtitle,\n    \"data-test\": `${dataTest}-subtitle`\n  }, subtitle)), typeof count === 'number' && /*#__PURE__*/React.createElement(\"div\", {\n    className: cx(styles.count, {\n      [styles.dashed]: disabled\n    })\n  }, count), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.chevron\n  }, /*#__PURE__*/React.createElement(IconChevronRight16, null)));\n};\nMenuItem.propTypes = {\n  icon: PropTypes.node.isRequired,\n  label: PropTypes.string.isRequired,\n  onClick: PropTypes.func.isRequired,\n  count: PropTypes.number,\n  dataTest: PropTypes.string,\n  disabled: PropTypes.bool,\n  selected: PropTypes.bool,\n  subtitle: PropTypes.string\n};\nexport { MenuItem };","export const DIMENSION_LIST_FIELDS = ['id', 'dimensionType', 'valueType', 'optionSet'];","// extracted by mini-css-extract-plugin\nexport default {\"scrollbox\":\"DimensionsList_scrollbox__NkTGf\",\"list\":\"DimensionsList_list__tUJD9\",\"errorWrap\":\"DimensionsList_errorWrap__FZg0C\",\"noResults\":\"DimensionsList_noResults__Ms3AL\",\"loaderWrap\":\"DimensionsList_loaderWrap__r9hfB\",\"loadMoreWrap\":\"DimensionsList_loadMoreWrap__lm5do\"};","function _extends() { return _extends = Object.assign ? Object.assign.bind() : function (n) { for (var e = 1; e < arguments.length; e++) { var t = arguments[e]; for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]); } return n; }, _extends.apply(null, arguments); }\nimport i18n from '@dhis2/d2-i18n';\nimport { CircularLoader, NoticeBox } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React, { useRef, useEffect } from 'react';\nimport { DimensionItem } from '../DimensionItem/index.js';\nimport { useSelectedDimensions } from '../SelectedDimensionsContext.js';\nimport styles from './DimensionsList.module.css';\nconst getNoResultsMessage = _ref => {\n  let {\n    searchTerm,\n    programName,\n    trackedEntityType\n  } = _ref;\n  if (searchTerm) {\n    return i18n.t(\"No dimensions found for '{{- searchTerm}}'\", {\n      searchTerm\n    });\n  } else if (programName) {\n    return i18n.t('No dimensions found in the {{- programName}} program', {\n      programName\n    });\n  } else if (trackedEntityType) {\n    return i18n.t(' {{- trackedEntityType}} has no dimensions', {\n      trackedEntityType\n    });\n  }\n  return i18n.t('No dimensions found');\n};\nconst isEndReached = el => el.scrollHeight - el.scrollTop - el.clientHeight < 5;\nconst DimensionsList = _ref2 => {\n  let {\n    loading,\n    fetching,\n    error,\n    dimensions,\n    programName,\n    searchTerm,\n    setIsListEndVisible,\n    dataTest,\n    trackedEntityType\n  } = _ref2;\n  const scrollBoxRef = useRef();\n  const {\n    getIsDimensionSelected\n  } = useSelectedDimensions();\n  useEffect(() => {\n    if (dimensions && scrollBoxRef.current && !loading && !fetching) {\n      setIsListEndVisible(isEndReached(scrollBoxRef.current));\n    }\n  }, [dimensions, scrollBoxRef.current]);\n  if (loading) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.loaderWrap\n    }, /*#__PURE__*/React.createElement(CircularLoader, {\n      small: true\n    }));\n  }\n  if (error) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.errorWrap\n    }, /*#__PURE__*/React.createElement(NoticeBox, {\n      error: true,\n      title: i18n.t(\"Couldn't load dimensions\")\n    }, (error === null || error === void 0 ? void 0 : error.message) || i18n.t('There was a problem loading the dimensions. Try again, or contact your system administrator.')));\n  }\n  if (!loading && !fetching && !(dimensions !== null && dimensions !== void 0 && dimensions.length)) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.noResults\n    }, getNoResultsMessage({\n      searchTerm,\n      programName,\n      trackedEntityType\n    }));\n  }\n  return /*#__PURE__*/React.createElement(\"div\", {\n    \"data-test\": dataTest,\n    className: styles.scrollbox,\n    onScroll: event => {\n      return setIsListEndVisible(isEndReached(event.target));\n    },\n    onMouseDown: event => event.preventDefault(),\n    ref: scrollBoxRef\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.list,\n    \"data-test\": `${dataTest}-list`\n  }, dimensions.map(dimension => /*#__PURE__*/React.createElement(DimensionItem, _extends({\n    key: dimension.id\n  }, dimension, {\n    selected: getIsDimensionSelected(dimension.id)\n  }))), fetching && /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.loadMoreWrap,\n    \"data-test\": \"dimensions-list-load-more\"\n  }, /*#__PURE__*/React.createElement(CircularLoader, {\n    small: true\n  }))));\n};\nDimensionsList.propTypes = {\n  setIsListEndVisible: PropTypes.func.isRequired,\n  dataTest: PropTypes.string,\n  dimensions: PropTypes.array,\n  error: PropTypes.object,\n  fetching: PropTypes.bool,\n  loading: PropTypes.bool,\n  programName: PropTypes.string,\n  searchTerm: PropTypes.string,\n  trackedEntityType: PropTypes.string\n};\nexport { DimensionsList };","import { useCachedDataQuery, DIMENSION_TYPE_ALL, DIMENSION_TYPE_DATA_ELEMENT } from '@dhis2/analytics';\nimport { useDataEngine } from '@dhis2/app-runtime';\nimport { useEffect, useReducer, useCallback, useRef, useMemo } from 'react';\nimport { extractDimensionIdParts } from '../../../modules/dimensionId.js';\nimport { DERIVED_USER_SETTINGS_DISPLAY_NAME_PROPERTY } from '../../../modules/userSettings.js';\nimport { OUTPUT_TYPE_EVENT, OUTPUT_TYPE_ENROLLMENT, OUTPUT_TYPE_TRACKED_ENTITY } from '../../../modules/visualization.js';\nimport { DIMENSION_LIST_FIELDS } from '../DimensionsList/index.js';\nconst ACTIONS_RESET = 'RESET';\nconst ACTIONS_INIT = 'INIT';\nconst ACTIONS_SUCCESS = 'SUCCESS';\nconst ACTIONS_ERROR = 'ERROR';\nconst ACTIONS_SET_LIST_END_VISIBLE = 'SET_LIST_END_VISIBLE';\nconst initialState = {\n  loading: true,\n  fetching: true,\n  error: null,\n  dimensions: [],\n  nextPage: 1,\n  isLastPage: false,\n  isListEndVisible: false\n};\nconst reducer = (state, action) => {\n  switch (action.type) {\n    case ACTIONS_RESET:\n      return {\n        ...initialState\n      };\n    case ACTIONS_INIT:\n      return {\n        ...state,\n        loading: !state.dimensions,\n        fetching: true,\n        error: null\n      };\n    case ACTIONS_SUCCESS:\n      return {\n        ...state,\n        loading: false,\n        fetching: false,\n        error: null,\n        ...action.payload\n      };\n    case ACTIONS_ERROR:\n      return {\n        ...state,\n        loading: false,\n        fetching: false,\n        error: action.payload,\n        dimensions: []\n      };\n    case ACTIONS_SET_LIST_END_VISIBLE:\n      return {\n        ...state,\n        isListEndVisible: action.payload\n      };\n    default:\n      throw new Error('Invalid action passed to useProgramDataDimensions reducer function');\n  }\n};\nconst resourceMap = {\n  [OUTPUT_TYPE_TRACKED_ENTITY]: 'analytics/trackedEntities/query/dimensions',\n  [OUTPUT_TYPE_ENROLLMENT]: 'analytics/enrollments/query/dimensions',\n  [OUTPUT_TYPE_EVENT]: 'analytics/events/query/dimensions'\n};\nconst createDimensionsQuery = _ref => {\n  let {\n    inputType,\n    page,\n    trackedEntityTypeId,\n    programId,\n    stageId,\n    searchTerm,\n    dimensionType,\n    nameProp\n  } = _ref;\n  const params = {\n    pageSize: 50,\n    page,\n    fields: [...DIMENSION_LIST_FIELDS, `${nameProp}~rename(name)`],\n    filter: [],\n    order: `${nameProp}:asc`\n  };\n  if (trackedEntityTypeId && inputType === OUTPUT_TYPE_TRACKED_ENTITY) {\n    params.trackedEntityType = trackedEntityTypeId;\n  }\n  if (programId) {\n    if (inputType === OUTPUT_TYPE_ENROLLMENT) {\n      params.programId = programId;\n    } else if (inputType === OUTPUT_TYPE_TRACKED_ENTITY) {\n      params.program = programId;\n    }\n  }\n  if (stageId && inputType === OUTPUT_TYPE_EVENT) {\n    params.programStageId = stageId;\n  }\n  if (stageId && inputType === OUTPUT_TYPE_ENROLLMENT && dimensionType === DIMENSION_TYPE_DATA_ELEMENT) {\n    // This works because data element IDs have the following notation:\n    // `${programStageId}.${dataElementId}`\n    params.filter.push(`id:startsWith:${stageId}`);\n  }\n  if (programId && stageId && inputType === OUTPUT_TYPE_TRACKED_ENTITY && dimensionType === DIMENSION_TYPE_DATA_ELEMENT) {\n    // This works because data element IDs have the following notation:\n    // `${programId}.${programStageId}.${dataElementId}`\n    params.filter.push(`id:startsWith:${programId}.${stageId}`);\n  }\n  if (inputType === OUTPUT_TYPE_TRACKED_ENTITY) {\n    params.filter.push('dimensionType:ne:PROGRAM_ATTRIBUTE');\n    params.filter.push('dimensionType:ne:PROGRAM_INDICATOR');\n  }\n\n  /*\n   * TODO: currently no matches on shortname are captured\n   * if this is required we would need the backend add support for this, because\n   * we can't have a request with a mixed `rootJunction` (use both AND and OR)\n   * so we need to keep using the AND rootJunction and if we want to match a\n   * searchTerm against several fields, we need a specific query param for that,\n   * i.e. `filter=identifiable:token:${searchTerm}` or `query=${searchTerm}`\n   */\n  if (searchTerm) {\n    params.filter.push(`${nameProp}:ilike:${searchTerm}`);\n  }\n  if (dimensionType && dimensionType !== DIMENSION_TYPE_ALL) {\n    params.filter.push(`dimensionType:eq:${dimensionType}`);\n  }\n  return {\n    resource: resourceMap[inputType],\n    params\n  };\n};\nconst transformResponseData = _ref2 => {\n  let {\n    data,\n    dimensions,\n    deDimensionsMapRef,\n    programStageNames,\n    shouldReset,\n    inputType\n  } = _ref2;\n  const pager = data.dimensions.pager;\n  let newDuplicateFound = false;\n  if ([OUTPUT_TYPE_ENROLLMENT, OUTPUT_TYPE_TRACKED_ENTITY].includes(inputType)) {\n    data.dimensions.dimensions.forEach(dimension => {\n      const {\n        dimensionId\n      } = extractDimensionIdParts(dimension.id);\n      if (dimension.dimensionType === DIMENSION_TYPE_DATA_ELEMENT && dimensionId) {\n        const dataElementCount = deDimensionsMapRef.current.get(dimensionId);\n        if (dataElementCount) {\n          deDimensionsMapRef.current.set(dimensionId, dataElementCount + 1);\n          newDuplicateFound = true;\n        } else {\n          deDimensionsMapRef.current.set(dimensionId, 1);\n        }\n      }\n    });\n  }\n  const allDimensions = shouldReset ? data.dimensions.dimensions : [...dimensions, ...data.dimensions.dimensions];\n  const allDimensionsWithStageLabel = newDuplicateFound ? allDimensions.map(dimension => {\n    const {\n      dimensionId,\n      programStageId\n    } = extractDimensionIdParts(dimension.id);\n    if (dimensionId && deDimensionsMapRef.current.get(dimensionId) > 1) {\n      dimension.stageName = programStageNames === null || programStageNames === void 0 ? void 0 : programStageNames.get(programStageId);\n    }\n    return dimension;\n  }) : allDimensions;\n  return {\n    dimensions: allDimensionsWithStageLabel,\n    nextPage: pager.page + 1,\n    isLastPage: pager.pageSize * pager.page >= pager.total\n  };\n};\nconst useProgramDataDimensions = _ref3 => {\n  let {\n    inputType,\n    trackedEntityTypeId,\n    program,\n    stageId,\n    searchTerm,\n    dimensionType\n  } = _ref3;\n  const {\n    currentUser\n  } = useCachedDataQuery();\n  const deDimensionsMapRef = useRef(new Map());\n  const engine = useDataEngine();\n  const [{\n    loading,\n    fetching,\n    error,\n    dimensions,\n    nextPage,\n    isLastPage,\n    isListEndVisible\n  }, dispatch] = useReducer(reducer, initialState);\n  const programId = useMemo(() => program.id, [program]);\n  const programStageNames = useMemo(() => {\n    var _program$programStage;\n    return (_program$programStage = program.programStages) === null || _program$programStage === void 0 ? void 0 : _program$programStage.reduce((acc, stage) => {\n      acc.set(stage.id, stage.name);\n      return acc;\n    }, new Map());\n  }, [program]);\n  const nameProp = currentUser.settings[DERIVED_USER_SETTINGS_DISPLAY_NAME_PROPERTY];\n  const setIsListEndVisible = useCallback(isVisible => {\n    if (isVisible !== isListEndVisible) {\n      dispatch({\n        type: ACTIONS_SET_LIST_END_VISIBLE,\n        payload: isVisible\n      });\n    }\n  }, [isListEndVisible]);\n  const fetchDimensions = useCallback(async shouldReset => {\n    if (shouldReset) {\n      deDimensionsMapRef.current.clear();\n      dispatch({\n        type: ACTIONS_RESET\n      });\n    } else {\n      dispatch({\n        type: ACTIONS_INIT\n      });\n    }\n    try {\n      const page = shouldReset ? 1 : nextPage;\n      const data = await engine.query({\n        dimensions: createDimensionsQuery({\n          inputType,\n          page,\n          trackedEntityTypeId,\n          programId,\n          stageId,\n          searchTerm,\n          dimensionType,\n          nameProp\n        })\n      });\n      dispatch({\n        type: ACTIONS_SUCCESS,\n        payload: transformResponseData({\n          data,\n          dimensions,\n          deDimensionsMapRef,\n          programStageNames,\n          shouldReset,\n          inputType\n        })\n      });\n    } catch (error) {\n      dispatch({\n        type: ACTIONS_ERROR,\n        payload: error\n      });\n    }\n  }, [dimensions, engine, programStageNames, inputType, nextPage, trackedEntityTypeId, programId, stageId, searchTerm, dimensionType, nameProp]);\n  useEffect(() => {\n    fetchDimensions(true);\n  }, [inputType, trackedEntityTypeId, programId, stageId, searchTerm, dimensionType, nameProp]);\n  useEffect(() => {\n    if (isListEndVisible && !isLastPage && !fetching) {\n      fetchDimensions(false);\n    }\n  }, [isListEndVisible, isLastPage]);\n  return {\n    loading,\n    fetching,\n    error,\n    dimensions,\n    setIsListEndVisible\n  };\n};\nexport { useProgramDataDimensions, createDimensionsQuery };","import PropTypes from 'prop-types';\nimport React from 'react';\nimport { DimensionsList } from '../DimensionsList/index.js';\nimport { useProgramDataDimensions } from './useProgramDataDimensions.js';\nconst ProgramDataDimensionsList = _ref => {\n  let {\n    inputType,\n    trackedEntityTypeId,\n    program,\n    stageId,\n    searchTerm,\n    dimensionType\n  } = _ref;\n  const {\n    dimensions,\n    loading,\n    fetching,\n    error,\n    setIsListEndVisible\n  } = useProgramDataDimensions({\n    inputType,\n    trackedEntityTypeId,\n    program,\n    stageId,\n    searchTerm,\n    dimensionType\n  });\n  const draggableDimensions = dimensions.map(dimension => ({\n    draggableId: `program-${dimension.id}`,\n    ...dimension\n  }));\n  return /*#__PURE__*/React.createElement(DimensionsList, {\n    setIsListEndVisible: setIsListEndVisible,\n    dimensions: draggableDimensions,\n    error: error,\n    fetching: fetching,\n    loading: loading,\n    programName: program.name,\n    searchTerm: searchTerm,\n    dataTest: \"program-dimensions-list\"\n  });\n};\nProgramDataDimensionsList.propTypes = {\n  inputType: PropTypes.string.isRequired,\n  program: PropTypes.object.isRequired,\n  dimensionType: PropTypes.string,\n  searchTerm: PropTypes.string,\n  stageId: PropTypes.string,\n  trackedEntityTypeId: PropTypes.string\n};\nexport { ProgramDataDimensionsList };","function _extends() { return _extends = Object.assign ? Object.assign.bind() : function (n) { for (var e = 1; e < arguments.length; e++) { var t = arguments[e]; for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]); } return n; }, _extends.apply(null, arguments); }\nimport i18n from '@dhis2/d2-i18n';\nimport React from 'react';\nimport { useProgramDimensions } from '../../../reducers/ui.js';\nimport styles from '../common.module.css';\nimport { DimensionItem } from '../DimensionItem/index.js';\nimport { MainSidebarSection } from '../MainSidebarSection.js';\nimport { useSelectedDimensions } from '../SelectedDimensionsContext.js';\nexport const ProgramDimensions = () => {\n  const programDimensions = useProgramDimensions();\n  const {\n    getIsDimensionSelected\n  } = useSelectedDimensions();\n  if (!programDimensions) {\n    return null;\n  }\n  const draggableDimensions = programDimensions.map(dimension => ({\n    draggableId: `program-${dimension.id}`,\n    ...dimension\n  }));\n  return /*#__PURE__*/React.createElement(MainSidebarSection, {\n    header: i18n.t('Program dimensions'),\n    dataTest: \"program-dimensions\"\n  }, draggableDimensions.map(dimension => /*#__PURE__*/React.createElement(\"span\", {\n    key: dimension.id,\n    className: styles.span\n  }, /*#__PURE__*/React.createElement(DimensionItem, _extends({}, dimension, {\n    selected: getIsDimensionSelected(dimension.id)\n  })))));\n};","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"ProgramDimensionsFilter_container__SQTd9\",\"optionIcon\":\"ProgramDimensionsFilter_optionIcon__JDLfu\",\"option\":\"ProgramDimensionsFilter_option__uLPPp\",\"active\":\"ProgramDimensionsFilter_active__g0IOm\",\"disabled\":\"ProgramDimensionsFilter_disabled__PsqCF\",\"header\":\"ProgramDimensionsFilter_header__6gHeo\"};","import i18n from '@dhis2/d2-i18n';\nimport { SingleSelect, SingleSelectOption } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nconst STAGE_ALL = 'STAGE_ALL';\nconst StageFilter = _ref => {\n  let {\n    stages,\n    selected,\n    setSelected\n  } = _ref;\n  const onChange = _ref2 => {\n    let {\n      selected: stageId\n    } = _ref2;\n    if (stageId === STAGE_ALL) {\n      setSelected();\n    } else {\n      setSelected(stageId);\n    }\n  };\n  return /*#__PURE__*/React.createElement(SingleSelect, {\n    prefix: i18n.t('Stage'),\n    dense: true,\n    selected: selected || STAGE_ALL,\n    onChange: onChange,\n    dataTest: \"stage-select\"\n  }, /*#__PURE__*/React.createElement(SingleSelectOption, {\n    label: i18n.t('All'),\n    value: STAGE_ALL\n  }), stages.map(_ref3 => {\n    let {\n      id,\n      name\n    } = _ref3;\n    return /*#__PURE__*/React.createElement(SingleSelectOption, {\n      label: name,\n      key: id,\n      value: id\n    });\n  }));\n};\nStageFilter.propTypes = {\n  stages: PropTypes.arrayOf(PropTypes.object).isRequired,\n  selected: PropTypes.string,\n  setSelected: PropTypes.func\n};\nexport { StageFilter };","import { DIMENSION_TYPE_DATA_ELEMENT, DIMENSION_TYPE_ALL, DIMENSION_TYPE_PROGRAM_ATTRIBUTE, DIMENSION_TYPE_PROGRAM_INDICATOR, DIMENSION_TYPE_CATEGORY, DIMENSION_TYPE_CATEGORY_OPTION_GROUP_SET } from '@dhis2/analytics';\nimport i18n from '@dhis2/d2-i18n';\nimport { SingleSelect, Input, Divider } from '@dhis2/ui';\nimport cx from 'classnames';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { useSelector } from 'react-redux';\nimport { OUTPUT_TYPE_ENROLLMENT, OUTPUT_TYPE_TRACKED_ENTITY } from '../../../modules/visualization.js';\nimport { sGetUiInputType } from '../../../reducers/ui.js';\nimport { DimensionIcon } from '../DimensionItem/DimensionIcon.js';\nimport styles from './ProgramDimensionsFilter.module.css';\nimport { StageFilter } from './StageFilter.js';\nconst SingleSelectOption = _ref => {\n  let {\n    label,\n    active,\n    value,\n    icon,\n    onClick\n  } = _ref;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: cx(styles.option, {\n      [styles.active]: active\n    }),\n    \"data-value\": value,\n    onClick: e => onClick({}, e)\n  }, icon && /*#__PURE__*/React.createElement(\"span\", {\n    className: styles.optionIcon\n  }, icon), label);\n};\nSingleSelectOption.propTypes = {\n  active: PropTypes.bool,\n  icon: PropTypes.node,\n  label: PropTypes.string,\n  value: PropTypes.string,\n  onClick: PropTypes.func\n};\nconst ProgramDimensionsFilter = _ref2 => {\n  let {\n    program,\n    searchTerm,\n    setSearchTerm,\n    dimensionType,\n    setDimensionType,\n    stageFilter,\n    setStageFilter,\n    showProgramAttribute\n  } = _ref2;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.container\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.header\n  }, i18n.t('Program data dimensions')), /*#__PURE__*/React.createElement(Input, {\n    value: searchTerm,\n    onChange: _ref3 => {\n      let {\n        value\n      } = _ref3;\n      return setSearchTerm(value);\n    },\n    dense: true,\n    type: \"search\",\n    placeholder: i18n.t('Search data dimensions')\n  }), /*#__PURE__*/React.createElement(SingleSelect, {\n    prefix: i18n.t('Type'),\n    selected: dimensionType,\n    onChange: _ref4 => {\n      let {\n        selected\n      } = _ref4;\n      return setDimensionType(selected);\n    },\n    dense: true\n  }, /*#__PURE__*/React.createElement(SingleSelectOption, {\n    label: i18n.t('All types'),\n    value: DIMENSION_TYPE_ALL\n  }), /*#__PURE__*/React.createElement(Divider, null), /*#__PURE__*/React.createElement(SingleSelectOption, {\n    label: i18n.t('Data element'),\n    value: DIMENSION_TYPE_DATA_ELEMENT,\n    icon: /*#__PURE__*/React.createElement(DimensionIcon, {\n      dimensionType: DIMENSION_TYPE_DATA_ELEMENT\n    })\n  }), showProgramAttribute && /*#__PURE__*/React.createElement(SingleSelectOption, {\n    label: i18n.t('Program attribute'),\n    value: DIMENSION_TYPE_PROGRAM_ATTRIBUTE,\n    icon: /*#__PURE__*/React.createElement(DimensionIcon, {\n      dimensionType: DIMENSION_TYPE_PROGRAM_ATTRIBUTE\n    })\n  }), useSelector(sGetUiInputType) !== OUTPUT_TYPE_TRACKED_ENTITY && /*#__PURE__*/React.createElement(SingleSelectOption, {\n    label: i18n.t('Program indicator'),\n    value: DIMENSION_TYPE_PROGRAM_INDICATOR,\n    icon: /*#__PURE__*/React.createElement(DimensionIcon, {\n      dimensionType: DIMENSION_TYPE_PROGRAM_INDICATOR\n    })\n  }), /*#__PURE__*/React.createElement(SingleSelectOption, {\n    label: i18n.t('Category'),\n    value: DIMENSION_TYPE_CATEGORY,\n    icon: /*#__PURE__*/React.createElement(DimensionIcon, {\n      dimensionType: DIMENSION_TYPE_CATEGORY\n    })\n  }), /*#__PURE__*/React.createElement(SingleSelectOption, {\n    label: i18n.t('Category option group set'),\n    value: DIMENSION_TYPE_CATEGORY_OPTION_GROUP_SET,\n    icon: /*#__PURE__*/React.createElement(DimensionIcon, {\n      dimensionType: DIMENSION_TYPE_CATEGORY_OPTION_GROUP_SET\n    })\n  })), [OUTPUT_TYPE_ENROLLMENT, OUTPUT_TYPE_TRACKED_ENTITY].includes(useSelector(sGetUiInputType)) && dimensionType === DIMENSION_TYPE_DATA_ELEMENT && (!stageFilter || (program === null || program === void 0 ? void 0 : program.programStages.some(stage => stage.id === stageFilter))) && /*#__PURE__*/React.createElement(StageFilter, {\n    stages: program === null || program === void 0 ? void 0 : program.programStages,\n    selected: stageFilter,\n    setSelected: setStageFilter\n  }));\n};\nProgramDimensionsFilter.propTypes = {\n  program: PropTypes.object.isRequired,\n  dimensionType: PropTypes.string,\n  searchTerm: PropTypes.string,\n  setDimensionType: PropTypes.func,\n  setSearchTerm: PropTypes.func,\n  setStageFilter: PropTypes.func,\n  showProgramAttribute: PropTypes.bool,\n  stageFilter: PropTypes.string\n};\nexport { ProgramDimensionsFilter };","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"ProgramDimensionsPanel_container__wqCd1\",\"section\":\"ProgramDimensionsPanel_section__dlLZX\",\"helptext\":\"ProgramDimensionsPanel_helptext__APFRZ\"};","import { DIMENSION_TYPE_ALL, DIMENSION_TYPE_DATA_ELEMENT } from '@dhis2/analytics';\nimport i18n from '@dhis2/d2-i18n';\nimport cx from 'classnames';\nimport PropTypes from 'prop-types';\nimport React, { useEffect, useState } from 'react';\nimport { useSelector } from 'react-redux';\nimport { PROGRAM_TYPE_WITH_REGISTRATION } from '../../../modules/programTypes.js';\nimport { useDebounce } from '../../../modules/utils.js';\nimport { OUTPUT_TYPE_EVENT, OUTPUT_TYPE_ENROLLMENT, OUTPUT_TYPE_TRACKED_ENTITY } from '../../../modules/visualization.js';\nimport { sGetMetadataById } from '../../../reducers/metadata.js';\nimport { sGetUiEntityTypeId, sGetUiInputType, sGetUiProgramId, sGetUiProgramStageId } from '../../../reducers/ui.js';\nimport { ProgramDataDimensionsList } from './ProgramDataDimensionsList.js';\nimport { ProgramDimensions } from './ProgramDimensions.js';\nimport { ProgramDimensionsFilter } from './ProgramDimensionsFilter.js';\nimport styles from './ProgramDimensionsPanel.module.css';\nimport { ProgramSelect } from './ProgramSelect.js';\nconst ProgramDimensionsPanel = _ref => {\n  let {\n    visible\n  } = _ref;\n  const inputType = useSelector(sGetUiInputType);\n  const selectedProgramId = useSelector(sGetUiProgramId);\n  const selectedTrackedEntityTypeId = useSelector(sGetUiEntityTypeId);\n  const selectedProgram = useSelector(state => sGetMetadataById(state, selectedProgramId));\n  const selectedStageId = useSelector(sGetUiProgramStageId);\n  const [searchTerm, setSearchTerm] = useState('');\n  const [stageFilter, setStageFilter] = useState();\n  const [dimensionType, setDimensionType] = useState(DIMENSION_TYPE_ALL);\n  const debouncedSearchTerm = useDebounce(searchTerm);\n  const isProgramSelectionComplete = () => {\n    if (inputType === OUTPUT_TYPE_EVENT) {\n      return selectedProgram && selectedStageId;\n    } else if (inputType === OUTPUT_TYPE_ENROLLMENT) {\n      return !!selectedProgram;\n    } else if (inputType === OUTPUT_TYPE_TRACKED_ENTITY) {\n      return !!selectedTrackedEntityTypeId;\n    }\n  };\n  useEffect(() => {\n    setSearchTerm('');\n    setDimensionType(DIMENSION_TYPE_ALL);\n    setStageFilter();\n  }, [inputType, selectedProgramId, selectedStageId]);\n  if (!visible) {\n    return null;\n  }\n  if ([OUTPUT_TYPE_EVENT, OUTPUT_TYPE_ENROLLMENT].includes(inputType)) {\n    let stageId;\n    if (inputType === OUTPUT_TYPE_ENROLLMENT && dimensionType === DIMENSION_TYPE_DATA_ELEMENT) {\n      stageId = stageFilter;\n    } else if (inputType === OUTPUT_TYPE_EVENT) {\n      stageId = selectedStageId;\n    }\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.container\n    }, isProgramSelectionComplete() ? /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(ProgramDimensions, null)), /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.section\n    }, /*#__PURE__*/React.createElement(ProgramDimensionsFilter, {\n      program: selectedProgram,\n      searchTerm: searchTerm,\n      setSearchTerm: setSearchTerm,\n      dimensionType: dimensionType,\n      setDimensionType: setDimensionType,\n      stageFilter: stageFilter,\n      setStageFilter: setStageFilter,\n      showProgramAttribute: selectedProgram.programType === PROGRAM_TYPE_WITH_REGISTRATION\n    })), /*#__PURE__*/React.createElement(ProgramDataDimensionsList, {\n      inputType: inputType,\n      program: selectedProgram,\n      dimensionType: dimensionType,\n      searchTerm: debouncedSearchTerm,\n      stageId: stageId\n    })) : /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.helptext\n    }, i18n.t('Choose an input to get started adding program dimensions.')));\n  } else if (inputType === OUTPUT_TYPE_TRACKED_ENTITY) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.container\n    }, isProgramSelectionComplete() ? /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n      className: cx(styles.section, styles.bordered)\n    }, /*#__PURE__*/React.createElement(ProgramSelect, {\n      prefix: i18n.t('Program')\n    })), selectedProgram && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(ProgramDimensions, null)), /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.section\n    }, /*#__PURE__*/React.createElement(ProgramDimensionsFilter, {\n      program: selectedProgram,\n      searchTerm: searchTerm,\n      setSearchTerm: setSearchTerm,\n      dimensionType: dimensionType,\n      setDimensionType: setDimensionType,\n      stageFilter: stageFilter,\n      setStageFilter: setStageFilter\n    })), /*#__PURE__*/React.createElement(ProgramDataDimensionsList, {\n      inputType: inputType,\n      program: selectedProgram,\n      dimensionType: dimensionType,\n      searchTerm: debouncedSearchTerm,\n      stageId: dimensionType === DIMENSION_TYPE_DATA_ELEMENT ? stageFilter : undefined,\n      trackedEntityTypeId: selectedTrackedEntityTypeId\n    }))) : /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.helptext\n    }, i18n.t('Choose an input to get started adding program dimensions.')));\n  }\n};\nProgramDimensionsPanel.propTypes = {\n  visible: PropTypes.bool.isRequired\n};\nexport { ProgramDimensionsPanel };","import i18n from '@dhis2/d2-i18n';\nimport { IconFolder16 } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { MenuItem } from './MenuItem/index.js';\nexport const TrackedEntityDimensionsMenuItem = _ref => {\n  let {\n    selected,\n    count,\n    onClick,\n    name\n  } = _ref;\n  return /*#__PURE__*/React.createElement(MenuItem, {\n    icon: /*#__PURE__*/React.createElement(IconFolder16, null),\n    label: i18n.t(`{{- itemName}} dimensions`, {\n      itemName: name\n    }),\n    onClick: onClick,\n    selected: selected,\n    count: count,\n    dataTest: \"tracked-entity-button\"\n  });\n};\nTrackedEntityDimensionsMenuItem.propTypes = {\n  name: PropTypes.string.isRequired,\n  onClick: PropTypes.func.isRequired,\n  count: PropTypes.number,\n  selected: PropTypes.bool\n};","import { useCachedDataQuery } from '@dhis2/analytics';\nimport { useDataQuery } from '@dhis2/app-runtime';\nimport i18n from '@dhis2/d2-i18n';\nimport { NoticeBox, SingleSelect, SingleSelectOption } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React, { useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { acAddMetadata } from '../../../actions/metadata.js';\nimport { DERIVED_USER_SETTINGS_DISPLAY_NAME_PROPERTY } from '../../../modules/userSettings.js';\nimport { sGetMetadataById } from '../../../reducers/metadata.js';\nimport { sGetUiEntityTypeId } from '../../../reducers/ui.js';\nimport styles from '../ProgramDimensionsPanel/ProgramSelect.module.css';\nconst query = {\n  programs: {\n    resource: 'programs',\n    params: _ref => {\n      let {\n        nameProp,\n        selectedEntityTypeId\n      } = _ref;\n      return {\n        fields: ['id', `${nameProp}~rename(name)`],\n        paging: false,\n        filter: ['access.data.read:eq:true', `trackedEntityType.id:eq:${selectedEntityTypeId}`]\n      };\n    }\n  }\n};\nconst ProgramFilter = _ref2 => {\n  var _data$programs;\n  let {\n    setSelectedProgramId,\n    selectedProgramId\n  } = _ref2;\n  const {\n    currentUser\n  } = useCachedDataQuery();\n  const selectedEntityTypeId = useSelector(sGetUiEntityTypeId);\n  const {\n    fetching,\n    error,\n    data,\n    refetch,\n    called\n  } = useDataQuery(query, {\n    lazy: true\n  });\n  const programs = data === null || data === void 0 ? void 0 : (_data$programs = data.programs) === null || _data$programs === void 0 ? void 0 : _data$programs.programs;\n  const selectedProgram = useSelector(state => sGetMetadataById(state, selectedProgramId));\n  const dispatch = useDispatch();\n  useEffect(() => {\n    if (!called) {\n      refetch({\n        nameProp: currentUser.settings[DERIVED_USER_SETTINGS_DISPLAY_NAME_PROPERTY],\n        selectedEntityTypeId\n      });\n    }\n  }, [called, currentUser, refetch, selectedEntityTypeId]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.rows\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.columns\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.stretch\n  }, error && !fetching ? /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.section\n  }, /*#__PURE__*/React.createElement(NoticeBox, {\n    error: true,\n    title: i18n.t('Could not load programs')\n  }, (error === null || error === void 0 ? void 0 : error.message) || i18n.t(\"The programs couldn't be retrieved. Try again or contact your system administrator.\"))) : /*#__PURE__*/React.createElement(SingleSelect, {\n    dense: true,\n    selected: selectedProgramId || '',\n    onChange: _ref3 => {\n      let {\n        selected\n      } = _ref3;\n      setSelectedProgramId(selected);\n      dispatch(acAddMetadata({\n        [selected]: programs.find(p => p.id === selected)\n      }));\n    },\n    placeholder: i18n.t('Filter by program usage'),\n    maxHeight: \"max(60vh, 460px)\",\n    dataTest: \"tet-dimensions-program-select\",\n    filterable: true,\n    noMatchText: i18n.t('No programs found'),\n    prefix: selectedProgramId && i18n.t('Program'),\n    clearable: true,\n    clearText: i18n.t('Clear'),\n    loading: fetching\n  }, (fetching || !programs) && (selectedProgram === null || selectedProgram === void 0 ? void 0 : selectedProgram.id) && /*#__PURE__*/React.createElement(SingleSelectOption, {\n    key: selectedProgram === null || selectedProgram === void 0 ? void 0 : selectedProgram.id,\n    label: selectedProgram === null || selectedProgram === void 0 ? void 0 : selectedProgram.name,\n    value: selectedProgram === null || selectedProgram === void 0 ? void 0 : selectedProgram.id\n  }), !fetching && (programs === null || programs === void 0 ? void 0 : programs.map(_ref4 => {\n    let {\n      id,\n      name\n    } = _ref4;\n    return /*#__PURE__*/React.createElement(SingleSelectOption, {\n      key: id,\n      label: name,\n      value: id\n    });\n  }))))));\n};\nProgramFilter.propTypes = {\n  setSelectedProgramId: PropTypes.func.isRequired,\n  selectedProgramId: PropTypes.string\n};\nexport { ProgramFilter };","// extracted by mini-css-extract-plugin\nexport default {\"filters\":\"TrackedEntityDimensionsPanel_filters__DWZAu\",\"programSelect\":\"TrackedEntityDimensionsPanel_programSelect__b2SJq\"};","import { useDataQuery } from '@dhis2/app-runtime';\nimport { useEffect, useState } from 'react';\nimport { DIMENSION_LIST_FIELDS } from '../DimensionsList/index.js';\nconst TRACKED_ENTITY_DIMENSIONS_RESOURCE = 'analytics/trackedEntities/query/dimensions';\nconst TRACKED_ENTITY_DIMENSIONS_FILTER = 'dimensionType:eq:PROGRAM_ATTRIBUTE';\nconst query = {\n  dimensions: {\n    resource: TRACKED_ENTITY_DIMENSIONS_RESOURCE,\n    params: _ref => {\n      let {\n        page,\n        searchTerm,\n        nameProp,\n        id,\n        programId\n      } = _ref;\n      const filters = [TRACKED_ENTITY_DIMENSIONS_FILTER];\n      if (searchTerm) {\n        filters.push(`${nameProp}:ilike:${searchTerm}`);\n      }\n      return {\n        pageSize: 50,\n        page,\n        fields: [...DIMENSION_LIST_FIELDS, `${nameProp}~rename(name)`],\n        filter: filters,\n        order: `${nameProp}:asc`,\n        trackedEntityType: id,\n        ...(programId ? {\n          program: programId\n        } : {})\n      };\n    }\n  }\n};\nconst useTrackedEntityDimensions = _ref2 => {\n  let {\n    visible,\n    searchTerm,\n    nameProp,\n    id,\n    programId\n  } = _ref2;\n  const [isListEndVisible, setIsListEndVisible] = useState(false);\n  const [dimensions, setDimensions] = useState(null);\n  const {\n    data,\n    error,\n    loading,\n    fetching,\n    refetch\n  } = useDataQuery(query, {\n    lazy: true\n  });\n  useEffect(() => {\n    // Delay initial fetch until component comes into view\n    if (visible && !dimensions) {\n      refetch({\n        page: 1,\n        nameProp,\n        id,\n        programId\n      });\n    }\n  }, [visible]);\n  useEffect(() => {\n    // Reset when filter changes\n    setDimensions(null);\n    if (visible) {\n      refetch({\n        page: 1,\n        searchTerm,\n        nameProp,\n        id,\n        programId\n      });\n    }\n  }, [searchTerm, id, programId]);\n  useEffect(() => {\n    if (data) {\n      const {\n        pager\n      } = data.dimensions;\n      const isLastPage = pager.pageSize * pager.page >= pager.total;\n      if (isListEndVisible && !isLastPage && !fetching) {\n        refetch({\n          page: pager.page + 1,\n          searchTerm,\n          nameProp,\n          id,\n          programId\n        });\n      }\n    }\n  }, [isListEndVisible, nameProp]);\n  useEffect(() => {\n    if (!fetching && data) {\n      setDimensions(currDimensions => [...(currDimensions !== null && currDimensions !== void 0 ? currDimensions : []), ...data.dimensions.dimensions]);\n    }\n  }, [data, fetching]);\n  return {\n    loading: dimensions ? false : loading,\n    fetching,\n    error,\n    dimensions: dimensions !== null && dimensions !== void 0 ? dimensions : [],\n    setIsListEndVisible\n  };\n};\nexport { useTrackedEntityDimensions };","import { useCachedDataQuery } from '@dhis2/analytics';\nimport i18n from '@dhis2/d2-i18n';\nimport { Input } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React, { useState } from 'react';\nimport { useSelector } from 'react-redux';\nimport { DERIVED_USER_SETTINGS_DISPLAY_NAME_PROPERTY } from '../../../modules/userSettings.js';\nimport { useDebounce } from '../../../modules/utils.js';\nimport { sGetMetadataById } from '../../../reducers/metadata.js';\nimport { sGetUiEntityTypeId } from '../../../reducers/ui.js';\nimport { DimensionsList } from '../DimensionsList/index.js';\nimport { ProgramFilter } from './ProgramFilter.js';\nimport styles from './TrackedEntityDimensionsPanel.module.css';\nimport { useTrackedEntityDimensions } from './useTrackedEntityDimensions.js';\nconst TrackedEntityDimensionsPanel = _ref => {\n  let {\n    visible\n  } = _ref;\n  const [searchTerm, setSearchTerm] = useState('');\n  const [selectedProgramId, setSelectedProgramId] = useState(null);\n  const selectedEntityTypeId = useSelector(sGetUiEntityTypeId);\n  const entityType = useSelector(state => sGetMetadataById(state, selectedEntityTypeId));\n  const debouncedSearchTerm = useDebounce(searchTerm);\n  const {\n    currentUser\n  } = useCachedDataQuery();\n  const {\n    loading,\n    fetching,\n    error,\n    dimensions,\n    setIsListEndVisible\n  } = useTrackedEntityDimensions({\n    visible,\n    searchTerm: debouncedSearchTerm,\n    nameProp: currentUser.settings[DERIVED_USER_SETTINGS_DISPLAY_NAME_PROPERTY],\n    id: selectedEntityTypeId,\n    programId: selectedProgramId\n  });\n  if (!visible) {\n    return null;\n  }\n  const draggableDimensions = dimensions.map(dimension => ({\n    draggableId: `tracked-entity-${dimension.id}`,\n    ...dimension\n  }));\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.filters\n  }, /*#__PURE__*/React.createElement(Input, {\n    value: searchTerm,\n    onChange: _ref2 => {\n      let {\n        value\n      } = _ref2;\n      return setSearchTerm(value);\n    },\n    dense: true,\n    placeholder: i18n.t('Search dimensions'),\n    type: \"search\",\n    dataTest: \"search-te-dimension-input\"\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.programSelect\n  }, /*#__PURE__*/React.createElement(ProgramFilter, {\n    setSelectedProgramId: setSelectedProgramId,\n    selectedProgramId: selectedProgramId\n  }))), /*#__PURE__*/React.createElement(DimensionsList, {\n    setIsListEndVisible: setIsListEndVisible,\n    dimensions: draggableDimensions,\n    error: error,\n    fetching: fetching,\n    loading: loading,\n    searchTerm: debouncedSearchTerm,\n    dataTest: \"tracked-entity-dimensions\",\n    trackedEntityType: entityType === null || entityType === void 0 ? void 0 : entityType.name\n  }));\n};\nTrackedEntityDimensionsPanel.propTypes = {\n  visible: PropTypes.bool\n};\nexport { TrackedEntityDimensionsPanel };","import { useCallback, useEffect, useMemo, useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { acSetUiAccessoryPanelWidth } from '../../actions/ui.js';\nimport { ARROW_LEFT_KEY, ARROW_RIGHT_KEY, ACCESSORY_PANEL_MIN_WIDTH, ACCESSORY_PANEL_MIN_PX_AT_END, ACCESSORY_PANEL_DEFAULT_WIDTH } from '../../modules/accessoryPanelConstants.js';\nimport { setUserSidebarWidthToLocalStorage } from '../../modules/localStorage.js';\nimport { getUserSidebarWidth } from '../../modules/ui.js';\nimport { debounceEventHandler } from '../../modules/utils.js';\nimport { sGetUiAccessoryPanelWidth } from '../../reducers/ui.js';\nconst createWidthWithinBoundsCalculator = (event, startWidth) => {\n  const element = event.currentTarget;\n  const isKeyboardMode = event.type === 'focus';\n  const rect = element.getBoundingClientRect();\n  const minWidth = ACCESSORY_PANEL_MIN_WIDTH;\n  /* This needs to correspond with right edge of the accessory sidebar\n   * which is 2px right of the left edge of the resize handle */\n  const startPageX = Math.ceil(rect.left + 2);\n  const maxPageX = window.innerWidth - ACCESSORY_PANEL_MIN_PX_AT_END;\n  const maxDeltaX = maxPageX - startPageX;\n  const maxWidth = startWidth + maxDeltaX;\n  let virtualWidth = startWidth;\n  let actualWidth = startWidth;\n  return deltaX => {\n    virtualWidth = isKeyboardMode ? actualWidth + deltaX : virtualWidth + deltaX;\n    if (virtualWidth < minWidth) {\n      actualWidth = minWidth;\n    } else if (virtualWidth > maxWidth) {\n      actualWidth = maxWidth;\n    } else {\n      actualWidth = virtualWidth;\n    }\n    return actualWidth;\n  };\n};\nexport const useResizableAccessorySidebar = isHidden => {\n  const dispatch = useDispatch();\n  const userSettingWidth = useSelector(sGetUiAccessoryPanelWidth);\n  const [isResizing, setIsResizing] = useState(false);\n  const [width, setWidth] = useState(userSettingWidth);\n  const styles = useMemo(() => isHidden ? {\n    accessoryStyle: {\n      width: 0\n    },\n    accessoryInnerStyle: {\n      width: `${width}px`,\n      transform: `translate3d(-${width}px, 0, 0)`\n    }\n  } : {\n    accessoryStyle: {\n      width: `${width}px`\n    },\n    accessoryInnerStyle: {\n      width: `${width}px`\n    }\n  }, [isHidden, width]);\n  const onResizeHandleMouseDown = useCallback(event => {\n    event.preventDefault();\n    event.stopPropagation();\n    const resizeHandleElement = event.currentTarget;\n    /* If the user focusses the draghandle by tabbing/ keyboard navigation,\n     * but never blurs it, and then starts resizing using the mouse, it causes\n     * problems we need to deal with. These situations can be identified by\n     * the fact that the draghandle is already the active element when the\n     * mousedown event fires */\n    const isActive = document.activeElement === resizeHandleElement;\n    if (isActive) {\n      // Manually call blur to ensure event handlers are removed\n      resizeHandleElement.blur();\n    }\n    setIsResizing(true);\n\n    /* Because the user never blurred the draghandle, the\n     * width preference is not yet updated when this callback\n     * is executed. Since the userSettingWidth is stale, the width\n     * needs to be assessed some other way. The solution below\n     * works but will break when make any changes to the relevant\n     * DOM structure. */\n    const startWidth = isActive ? resizeHandleElement.previousSibling.offsetWidth : userSettingWidth;\n    const computeWidth = createWidthWithinBoundsCalculator(event, startWidth);\n    let width = startWidth;\n    const onMouseMove = event => {\n      event.preventDefault();\n      event.stopPropagation();\n\n      // if\n      width = computeWidth(event.movementX);\n      setWidth(width);\n    };\n    /* Use the window as event target to avoid issues when the browser\n     * lags behind and the draghandle temporarily loses its hover state */\n    window.addEventListener('mousemove', onMouseMove);\n    window.addEventListener('mouseup', event => {\n      event.preventDefault();\n      event.stopPropagation();\n      setIsResizing(false);\n      window.removeEventListener('mousemove', onMouseMove);\n      setUserSidebarWidthToLocalStorage(width);\n      dispatch(acSetUiAccessoryPanelWidth(width));\n    }, {\n      once: true\n    });\n  }, [dispatch, userSettingWidth]);\n  const onResizeHandleFocus = useCallback(event => {\n    setIsResizing(true);\n    const resizeHandleElement = event.currentTarget;\n    const startWidth = userSettingWidth;\n    const computeWidth = createWidthWithinBoundsCalculator(event, startWidth);\n    let width = startWidth;\n    const onKeyDown = event => {\n      // Ignore all keys apart from left and right arrow\n      if (event.key !== ARROW_LEFT_KEY && event.key !== ARROW_RIGHT_KEY) {\n        return;\n      }\n      const deltaX = event.key === ARROW_LEFT_KEY ? -10 : 10;\n      width = computeWidth(deltaX);\n      setWidth(width);\n    };\n    resizeHandleElement.addEventListener('keydown', onKeyDown);\n    resizeHandleElement.addEventListener('blur', event => {\n      event.preventDefault();\n      event.stopPropagation();\n      setIsResizing(false);\n      window.removeEventListener('keydown', onKeyDown);\n      setUserSidebarWidthToLocalStorage(width);\n      dispatch(acSetUiAccessoryPanelWidth(width));\n    }, {\n      once: true\n    });\n  }, [dispatch, userSettingWidth]);\n  const onResizeHandleDblClick = event => {\n    event.stopPropagation();\n    event.preventDefault();\n    setWidth(ACCESSORY_PANEL_DEFAULT_WIDTH);\n    setUserSidebarWidthToLocalStorage(ACCESSORY_PANEL_DEFAULT_WIDTH);\n    dispatch(acSetUiAccessoryPanelWidth(ACCESSORY_PANEL_DEFAULT_WIDTH));\n  };\n  useEffect(() => {\n    // Respond to reset via view menu\n    if (userSettingWidth === ACCESSORY_PANEL_DEFAULT_WIDTH) {\n      setWidth(ACCESSORY_PANEL_DEFAULT_WIDTH);\n    }\n  }, [userSettingWidth]);\n  useEffect(() => {\n    const debouncedOnResize = debounceEventHandler(() => {\n      /*`getUserSidebarWidth` takes window width into\n       * account so the returned value is save to use */\n      const width = getUserSidebarWidth();\n      setWidth(width);\n      setUserSidebarWidthToLocalStorage(width);\n      dispatch(acSetUiAccessoryPanelWidth(width));\n    });\n    window.addEventListener('resize', debouncedOnResize);\n    return () => window.removeEventListener('resize', debouncedOnResize);\n  }, [dispatch]);\n  return {\n    ...styles,\n    isResizing,\n    onResizeHandleMouseDown,\n    onResizeHandleFocus,\n    onResizeHandleDblClick\n  };\n};","import { useDataQuery } from '@dhis2/app-runtime';\nimport { useEffect, useState } from 'react';\nimport { DIMENSION_LIST_FIELDS } from '../DimensionsList/index.js';\nconst YOUR_DIMENSIONS_RESOURCE = 'dimensions';\nconst YOUR_DIMENSIONS_FILTER = 'dimensionType:eq:ORGANISATION_UNIT_GROUP_SET';\nconst query = {\n  dimensions: {\n    resource: YOUR_DIMENSIONS_RESOURCE,\n    params: _ref => {\n      let {\n        page,\n        searchTerm,\n        nameProp\n      } = _ref;\n      const filters = [YOUR_DIMENSIONS_FILTER];\n      if (searchTerm) {\n        filters.push(`${nameProp}:ilike:${searchTerm}`);\n      }\n      return {\n        pageSize: 50,\n        page,\n        fields: [...DIMENSION_LIST_FIELDS, `${nameProp}~rename(name)`],\n        filter: filters,\n        order: `${nameProp}:asc`\n      };\n    }\n  }\n};\nconst useYourDimensions = _ref2 => {\n  let {\n    visible,\n    searchTerm,\n    nameProp\n  } = _ref2;\n  const [isListEndVisible, setIsListEndVisible] = useState(false);\n  const [dimensions, setDimensions] = useState(null);\n  const {\n    data,\n    error,\n    loading,\n    fetching,\n    called,\n    refetch\n  } = useDataQuery(query, {\n    lazy: true\n  });\n  useEffect(() => {\n    // Delay initial fetch until component comes into view\n    if (visible && !called) {\n      refetch({\n        page: 1,\n        nameProp\n      });\n    }\n  }, [visible, called]);\n  useEffect(() => {\n    if (visible) {\n      refetch({\n        page: 1,\n        searchTerm,\n        nameProp\n      });\n    }\n    // Reset when filter changes\n    setDimensions(null);\n  }, [searchTerm, nameProp]);\n  useEffect(() => {\n    if (data) {\n      const {\n        pager\n      } = data.dimensions;\n      const isLastPage = pager.pageSize * pager.page >= pager.total;\n      if (isListEndVisible && !isLastPage && !fetching) {\n        refetch({\n          page: pager.page + 1,\n          searchTerm,\n          nameProp\n        });\n      }\n    }\n  }, [isListEndVisible, nameProp]);\n  useEffect(() => {\n    if (data) {\n      setDimensions(currDimensions => [...(currDimensions !== null && currDimensions !== void 0 ? currDimensions : []), ...data.dimensions.dimensions]);\n    }\n  }, [data]);\n  return {\n    loading: dimensions ? false : loading,\n    fetching,\n    error,\n    dimensions: dimensions !== null && dimensions !== void 0 ? dimensions : [],\n    setIsListEndVisible\n  };\n};\nexport { useYourDimensions, YOUR_DIMENSIONS_FILTER, YOUR_DIMENSIONS_RESOURCE };","import { useDataQuery } from '@dhis2/app-runtime';\nimport i18n from '@dhis2/d2-i18n';\nimport { IconFolder16 } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { MenuItem } from './MenuItem/index.js';\nimport { YOUR_DIMENSIONS_RESOURCE, YOUR_DIMENSIONS_FILTER } from './YourDimensionsPanel/useYourDimensions.js';\nconst query = {\n  dimensions: {\n    resource: YOUR_DIMENSIONS_RESOURCE,\n    params: {\n      page: 1,\n      pageSize: 1,\n      fields: 'id',\n      filter: YOUR_DIMENSIONS_FILTER\n    }\n  }\n};\nexport const YourDimensionsMenuItem = _ref => {\n  var _data$dimensions$dime;\n  let {\n    selected,\n    count,\n    onClick\n  } = _ref;\n  const {\n    data\n  } = useDataQuery(query);\n  return data !== null && data !== void 0 && (_data$dimensions$dime = data.dimensions.dimensions) !== null && _data$dimensions$dime !== void 0 && _data$dimensions$dime.length ? /*#__PURE__*/React.createElement(MenuItem, {\n    icon: /*#__PURE__*/React.createElement(IconFolder16, null),\n    label: i18n.t('Your dimensions'),\n    onClick: onClick,\n    selected: selected,\n    count: count\n  }) : null;\n};\nYourDimensionsMenuItem.propTypes = {\n  onClick: PropTypes.func.isRequired,\n  count: PropTypes.number,\n  selected: PropTypes.bool\n};","// extracted by mini-css-extract-plugin\nexport default {\"search\":\"YourDimensionsPanel_search__kNNWN\"};","import { useCachedDataQuery } from '@dhis2/analytics';\nimport i18n from '@dhis2/d2-i18n';\nimport { Input } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React, { useState } from 'react';\nimport { DERIVED_USER_SETTINGS_DISPLAY_NAME_PROPERTY } from '../../../modules/userSettings.js';\nimport { useDebounce } from '../../../modules/utils.js';\nimport { DimensionsList } from '../DimensionsList/index.js';\nimport { useYourDimensions } from './useYourDimensions.js';\nimport styles from './YourDimensionsPanel.module.css';\nconst YourDimensionsPanel = _ref => {\n  let {\n    visible\n  } = _ref;\n  const [searchTerm, setSearchTerm] = useState('');\n  const debouncedSearchTerm = useDebounce(searchTerm);\n  const {\n    currentUser\n  } = useCachedDataQuery();\n  const {\n    loading,\n    fetching,\n    error,\n    dimensions,\n    setIsListEndVisible\n  } = useYourDimensions({\n    visible,\n    searchTerm: debouncedSearchTerm,\n    nameProp: currentUser.settings[DERIVED_USER_SETTINGS_DISPLAY_NAME_PROPERTY]\n  });\n  if (!visible) {\n    return null;\n  }\n  const draggableDimensions = dimensions.map(dimension => ({\n    draggableId: `your-${dimension.id}`,\n    ...dimension\n  }));\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.search\n  }, /*#__PURE__*/React.createElement(Input, {\n    value: searchTerm,\n    onChange: _ref2 => {\n      let {\n        value\n      } = _ref2;\n      return setSearchTerm(value);\n    },\n    dense: true,\n    placeholder: i18n.t('Search your dimensions'),\n    type: \"search\",\n    dataTest: \"search-dimension-input\"\n  })), /*#__PURE__*/React.createElement(DimensionsList, {\n    setIsListEndVisible: setIsListEndVisible,\n    dimensions: draggableDimensions,\n    error: error,\n    fetching: fetching,\n    loading: loading,\n    searchTerm: debouncedSearchTerm,\n    dataTest: \"your-dimensions-list\"\n  }));\n};\nYourDimensionsPanel.propTypes = {\n  visible: PropTypes.bool\n};\nexport { YourDimensionsPanel };","import i18n from '@dhis2/d2-i18n';\nimport { IconArrowRight16, IconFolder16, Tooltip } from '@dhis2/ui';\nimport cx from 'classnames';\nimport React, { useCallback, useEffect, useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { acSetUiAccessoryPanelActiveTab, acSetUiAccessoryPanelOpen, acSetUiDetailsPanelOpen } from '../../actions/ui.js';\nimport { ACCESSORY_PANEL_TAB_INPUT, ACCESSORY_PANEL_TAB_PROGRAM, ACCESSORY_PANEL_TAB_TRACKED_ENTITY, ACCESSORY_PANEL_TAB_YOUR } from '../../modules/accessoryPanelConstants.js';\nimport { PROGRAM_TYPE_WITH_REGISTRATION } from '../../modules/programTypes.js';\nimport { OUTPUT_TYPE_EVENT, OUTPUT_TYPE_TRACKED_ENTITY } from '../../modules/visualization.js';\nimport { sGetMetadataById } from '../../reducers/metadata.js';\nimport { sGetUiInputType, sGetUiShowAccessoryPanel, sGetUiProgramId, sGetUiSidebarHidden, sGetUiProgramStageId, sGetUiAccessoryPanelActiveTab, sGetUiEntityTypeId } from '../../reducers/ui.js';\nimport { InputPanel, getLabelForInputType } from './InputPanel/index.js';\nimport { MainDimensions } from './MainDimensions.js';\nimport styles from './MainSidebar.module.css';\nimport { MenuItem } from './MenuItem/index.js';\nimport { ProgramDimensionsPanel } from './ProgramDimensionsPanel/index.js';\nimport { SelectedDimensionsProvider, useSelectedDimensions } from './SelectedDimensionsContext.js';\nimport { TrackedEntityDimensionsMenuItem } from './TrackedEntityDimensionsMenuItem.js';\nimport { TrackedEntityDimensionsPanel } from './TrackedEntityDimensionsPanel/index.js';\nimport { useResizableAccessorySidebar } from './useResizableAccessorySidebar.js';\nimport { YourDimensionsMenuItem } from './YourDimensionsMenuItem.js';\nimport { YourDimensionsPanel } from './YourDimensionsPanel/index.js';\nconst MainSidebar = () => {\n  const dispatch = useDispatch();\n  const selectedTabId = useSelector(sGetUiAccessoryPanelActiveTab);\n  const open = useSelector(sGetUiShowAccessoryPanel) && Boolean(selectedTabId);\n  const [isTransitioning, setIsTransitioning] = useState(false);\n  const selectedInputType = useSelector(sGetUiInputType);\n  const selectedProgramId = useSelector(sGetUiProgramId);\n  const selectedStageId = useSelector(sGetUiProgramStageId);\n  const selectedEntityTypeId = useSelector(sGetUiEntityTypeId);\n  const {\n    isResizing,\n    accessoryStyle,\n    accessoryInnerStyle,\n    onResizeHandleMouseDown,\n    onResizeHandleFocus,\n    onResizeHandleDblClick\n  } = useResizableAccessorySidebar(!open);\n  const program = useSelector(state => sGetMetadataById(state, selectedProgramId));\n  const stage = useSelector(state => sGetMetadataById(state, selectedStageId));\n  const entityType = useSelector(state => sGetMetadataById(state, selectedEntityTypeId));\n  const getSubtitle = () => {\n    if (selectedInputType === OUTPUT_TYPE_EVENT && (program === null || program === void 0 ? void 0 : program.programType) === PROGRAM_TYPE_WITH_REGISTRATION && program !== null && program !== void 0 && program.name && stage !== null && stage !== void 0 && stage.name) {\n      return `${program.name} - ${stage.name}`;\n    } else if (selectedInputType === OUTPUT_TYPE_TRACKED_ENTITY) {\n      return entityType === null || entityType === void 0 ? void 0 : entityType.name;\n    } else {\n      return program === null || program === void 0 ? void 0 : program.name;\n    }\n  };\n  const isHidden = useSelector(sGetUiSidebarHidden);\n  const setOpen = newOpen => dispatch(acSetUiAccessoryPanelOpen(newOpen));\n  const setSelectedTabId = useCallback(id => {\n    dispatch(acSetUiAccessoryPanelActiveTab(id));\n  }, [dispatch]);\n  const closeDetailsPanel = () => dispatch(acSetUiDetailsPanelOpen(false));\n  const onClick = id => {\n    if (open && id === selectedTabId) {\n      // set selectedTabId to null after the transition has completed\n      setIsTransitioning(true);\n      setOpen(false);\n    } else {\n      setSelectedTabId(id);\n      closeDetailsPanel();\n      if (!open) {\n        setOpen(true);\n        setIsTransitioning(true);\n      }\n    }\n  };\n  const {\n    counts\n  } = useSelectedDimensions();\n  useEffect(() => {\n    if (!open && !isTransitioning) {\n      setSelectedTabId(null);\n    }\n  }, [open, isTransitioning, setSelectedTabId]);\n  const programDimensionsItem = /*#__PURE__*/React.createElement(MenuItem, {\n    icon: /*#__PURE__*/React.createElement(IconFolder16, null),\n    label: i18n.t('Program dimensions'),\n    onClick: () => onClick(ACCESSORY_PANEL_TAB_PROGRAM),\n    selected: open && selectedTabId === ACCESSORY_PANEL_TAB_PROGRAM,\n    count: counts.program,\n    disabled: !(selectedProgramId || selectedEntityTypeId),\n    dataTest: \"program-dimensions-button\"\n  });\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: cx(styles.container, {\n      [styles.hidden]: isHidden,\n      [styles.resizing]: isResizing\n    })\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.main,\n    \"data-test\": \"main-sidebar\"\n  }, /*#__PURE__*/React.createElement(MenuItem, {\n    icon: /*#__PURE__*/React.createElement(IconArrowRight16, null),\n    label: i18n.t('Input: {{type}}', {\n      type: getLabelForInputType(selectedInputType),\n      nsSeparator: '^^'\n    }),\n    onClick: () => onClick(ACCESSORY_PANEL_TAB_INPUT),\n    selected: open && selectedTabId === ACCESSORY_PANEL_TAB_INPUT,\n    subtitle: getSubtitle(),\n    dataTest: \"input-panel-button\"\n  }), (entityType === null || entityType === void 0 ? void 0 : entityType.name) && /*#__PURE__*/React.createElement(TrackedEntityDimensionsMenuItem, {\n    selected: open && selectedTabId === ACCESSORY_PANEL_TAB_TRACKED_ENTITY,\n    count: counts.trackedEntity,\n    onClick: () => onClick(ACCESSORY_PANEL_TAB_TRACKED_ENTITY),\n    name: entityType.name\n  }), !(selectedProgramId || selectedEntityTypeId) ? /*#__PURE__*/React.createElement(Tooltip, {\n    dataTest: \"no-input-tooltip\",\n    content: i18n.t('Choose an input first'),\n    closeDelay: 0,\n    placement: \"bottom\"\n  }, _ref => {\n    let {\n      onMouseOver,\n      onMouseOut,\n      ref\n    } = _ref;\n    return /*#__PURE__*/React.createElement(\"span\", {\n      onMouseOver: onMouseOver,\n      onMouseOut: onMouseOut,\n      ref: ref\n    }, programDimensionsItem);\n  }) : programDimensionsItem, /*#__PURE__*/React.createElement(YourDimensionsMenuItem, {\n    selected: open && selectedTabId === ACCESSORY_PANEL_TAB_YOUR,\n    count: counts.your,\n    onClick: () => onClick(ACCESSORY_PANEL_TAB_YOUR)\n  }), /*#__PURE__*/React.createElement(MainDimensions, null)), /*#__PURE__*/React.createElement(\"div\", {\n    className: cx(styles.accessory, {\n      [styles.hidden]: !open,\n      [styles.padded]: selectedTabId === ACCESSORY_PANEL_TAB_INPUT,\n      [styles.transitioning]: isTransitioning\n    }),\n    style: accessoryStyle,\n    \"data-test\": \"accessory-sidebar\"\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.accessoryInner,\n    style: accessoryInnerStyle,\n    onTransitionEnd: () => setIsTransitioning(false)\n  }, /*#__PURE__*/React.createElement(InputPanel, {\n    visible: selectedTabId === ACCESSORY_PANEL_TAB_INPUT\n  }), /*#__PURE__*/React.createElement(ProgramDimensionsPanel, {\n    visible: selectedTabId === ACCESSORY_PANEL_TAB_PROGRAM\n  }), /*#__PURE__*/React.createElement(TrackedEntityDimensionsPanel, {\n    visible: selectedTabId === ACCESSORY_PANEL_TAB_TRACKED_ENTITY\n  }), /*#__PURE__*/React.createElement(YourDimensionsPanel, {\n    visible: selectedTabId === ACCESSORY_PANEL_TAB_YOUR\n  })), open && /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.resizeHandle,\n    onMouseDown: onResizeHandleMouseDown,\n    onFocus: onResizeHandleFocus,\n    onDoubleClick: onResizeHandleDblClick,\n    tabIndex: 0,\n    \"data-test\": \"accessory-panel-resize-handle\"\n  })));\n};\nconst MainSidebarWithSelectedDimensionsProvider = () => /*#__PURE__*/React.createElement(SelectedDimensionsProvider, null, /*#__PURE__*/React.createElement(MainSidebar, null));\nexport { MainSidebarWithSelectedDimensionsProvider as MainSidebar };","// extracted by mini-css-extract-plugin\nexport default {\"tooltipAnchor\":\"ExpandedVisualizationCanvasToggle_tooltipAnchor__AfHmk\"};","import i18n from '@dhis2/d2-i18n';\nimport { Button, IconFullscreen16, IconFullscreenExit16, Tooltip } from '@dhis2/ui';\nimport React, { useCallback } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { acToggleUiExpandedVisualizationCanvas } from '../../actions/ui.js';\nimport { sGetUiShowExpandedVisualizationCanvas } from '../../reducers/ui.js';\nimport classes from './styles/ExpandedVisualizationCanvasToggle.module.css';\nexport const ExpandedVisualizationCanvasToggle = () => {\n  const dispatch = useDispatch();\n  const isExpanded = useSelector(sGetUiShowExpandedVisualizationCanvas);\n  const tooltipText = isExpanded ? i18n.t('Show panels') : i18n.t('Expand visualization and hide panels');\n  const icon = isExpanded ? /*#__PURE__*/React.createElement(IconFullscreenExit16, null) : /*#__PURE__*/React.createElement(IconFullscreen16, null);\n  const onClick = useCallback(() => dispatch(acToggleUiExpandedVisualizationCanvas()), [dispatch]);\n  return /*#__PURE__*/React.createElement(Tooltip, {\n    dataTest: \"fullscreen-toggle-tooltip\",\n    content: tooltipText,\n    closeDelay: 0\n  }, _ref => {\n    let {\n      onMouseOver,\n      onMouseOut,\n      ref\n    } = _ref;\n    return /*#__PURE__*/React.createElement(\"span\", {\n      onMouseOver: onMouseOver,\n      onMouseOut: onMouseOut,\n      ref: ref,\n      className: classes.tooltipAnchor\n    }, /*#__PURE__*/React.createElement(Button, {\n      icon: icon,\n      small: true,\n      onClick: onClick,\n      dataTest: \"fullscreen-toggler\"\n    }));\n  });\n};","// extracted by mini-css-extract-plugin\nexport default {\"titleBar\":\"TitleBar_titleBar__eRQPM\",\"buttonContainer\":\"TitleBar_buttonContainer__ZD0E6\",\"titleContainer\":\"TitleBar_titleContainer__mm4ED\",\"cell\":\"TitleBar_cell__p8LNm\",\"title\":\"TitleBar_title__S8jT+\",\"suffix\":\"TitleBar_suffix__96TVg\",\"titleUnsaved\":\"TitleBar_titleUnsaved__-uDNG\",\"titleDirty\":\"TitleBar_titleDirty__mUBOx\"};","import i18n from '@dhis2/d2-i18n';\nimport cx from 'classnames';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { STATE_UNSAVED, STATE_SAVED, STATE_DIRTY, getVisualizationState } from '../../modules/visualization.js';\nimport { sGetCurrent } from '../../reducers/current.js';\nimport { sGetVisualization } from '../../reducers/visualization.js';\nimport { ExpandedVisualizationCanvasToggle } from './ExpandedVisualizationCanvasToggle.js';\nimport classes from './styles/TitleBar.module.css';\nexport const getTitleUnsaved = () => i18n.t('Unsaved visualization');\nexport const getTitleDirty = () => i18n.t('Edited');\nconst defaultTitleClasses = `${classes.cell} ${classes.title}`;\nconst getTitleText = (titleState, visualization) => {\n  switch (titleState) {\n    case STATE_UNSAVED:\n      return getTitleUnsaved();\n    case STATE_SAVED:\n    case STATE_DIRTY:\n      return visualization.displayName;\n    default:\n      return '';\n  }\n};\nconst getCustomTitleClasses = titleState => titleState === STATE_UNSAVED ? classes.titleUnsaved : '';\nconst getSuffix = titleState => titleState === STATE_DIRTY ? /*#__PURE__*/React.createElement(\"div\", {\n  className: cx(classes.titleDirty, classes.suffix)\n}, `- ${getTitleDirty()}`) : '';\nexport const TitleBar = _ref => {\n  let {\n    titleState,\n    titleText\n  } = _ref;\n  const titleClasses = `${defaultTitleClasses} ${getCustomTitleClasses(titleState)}`;\n  return titleText ? /*#__PURE__*/React.createElement(\"div\", {\n    \"data-test\": \"titlebar\",\n    className: classes.titleBar\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.buttonContainer\n  }, /*#__PURE__*/React.createElement(ExpandedVisualizationCanvasToggle, null)), /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.titleContainer\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: titleClasses\n  }, titleText, getSuffix(titleState)))) : null;\n};\nTitleBar.propTypes = {\n  titleState: PropTypes.string,\n  titleText: PropTypes.string\n};\nconst mapStateToProps = state => ({\n  current: sGetCurrent(state),\n  visualization: sGetVisualization(state)\n});\nconst mergeProps = (stateProps, dispatchProps, ownProps) => {\n  const {\n    visualization,\n    current\n  } = stateProps;\n  const titleState = getVisualizationState(visualization, current);\n  return {\n    ...dispatchProps,\n    ...ownProps,\n    titleState: titleState,\n    titleText: getTitleText(titleState, visualization)\n  };\n};\nexport default connect(mapStateToProps, null, mergeProps)(TitleBar);","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"AppLogo_container__dW69T\",\"appName\":\"AppLogo_appName__hkAC6\"};","import { ToolbarSidebar } from '@dhis2/analytics';\nimport i18n from '@dhis2/d2-i18n';\nimport { IconVisualizationLinelist16 } from '@dhis2/ui';\nimport React from 'react';\nimport { useSelector } from 'react-redux';\nimport { sGetUiSidebarHidden } from '../../reducers/ui.js';\nimport classes from './styles/AppLogo.module.css';\nexport const AppLogo = () => {\n  const isHidden = useSelector(sGetUiSidebarHidden);\n  return /*#__PURE__*/React.createElement(ToolbarSidebar, {\n    isHidden: isHidden\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: classes.container\n  }, /*#__PURE__*/React.createElement(IconVisualizationLinelist16, {\n    color: \"#4a5768\"\n  }), /*#__PURE__*/React.createElement(\"span\", {\n    className: classes.appName\n  }, i18n.t('Line list'))));\n};","import { InterpretationsAndDetailsToggler as AnalyticsInterpretationsAndDetailsToggler } from '@dhis2/analytics';\nimport React, { useCallback } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { acSetUiDetailsPanelOpen } from '../../actions/ui.js';\nimport { sGetCurrentId } from '../../reducers/current.js';\nimport { sGetUiShowDetailsPanel } from '../../reducers/ui.js';\nexport const InterpretationsAndDetailsToggler = () => {\n  const showDetailsPanel = useSelector(sGetUiShowDetailsPanel);\n  const id = useSelector(sGetCurrentId);\n  const dispatch = useDispatch();\n  const onClick = useCallback(() => {\n    dispatch(acSetUiDetailsPanelOpen(!showDetailsPanel));\n  }, [dispatch, showDetailsPanel]);\n  return /*#__PURE__*/React.createElement(AnalyticsInterpretationsAndDetailsToggler, {\n    disabled: !id,\n    onClick: onClick,\n    isShowing: showDetailsPanel\n  });\n};","// extracted by mini-css-extract-plugin\nexport default {\"tabBar\":\"VisualizationOptions_tabBar__5Nb2Q\",\"tabContent\":\"VisualizationOptions_tabContent__UdIM7\",\"tabSection\":\"VisualizationOptions_tabSection__SdQ+P\",\"tabSectionContent\":\"VisualizationOptions_tabSectionContent__6t6Od\",\"tabSectionTitle\":\"VisualizationOptions_tabSectionTitle__BNTQy\",\"tabSectionTitleMargin\":\"VisualizationOptions_tabSectionTitleMargin__CynqJ\",\"tabSectionOption\":\"VisualizationOptions_tabSectionOption__Td+GI\",\"inline\":\"VisualizationOptions_inline__CN2wS\",\"tabSectionOptionItem\":\"VisualizationOptions_tabSectionOptionItem__-jk0M\",\"tabSectionOptionText\":\"VisualizationOptions_tabSectionOptionText__xf0-O\",\"tabSectionOptionToggleable\":\"VisualizationOptions_tabSectionOptionToggleable__vmGPi\",\"tabSectionToggleableSubsection\":\"VisualizationOptions_tabSectionToggleableSubsection__Mn4Lu\",\"tabSectionOptionComplexInline\":\"VisualizationOptions_tabSectionOptionComplexInline__d+WN1\",\"tabSectionOptionIcon\":\"VisualizationOptions_tabSectionOptionIcon__iKJHW\"};","import { SingleSelectField, SingleSelectOption } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { acSetUiOptions } from '../../../actions/ui.js';\nimport { sGetUiOptions } from '../../../reducers/ui.js';\nimport styles from '../styles/VisualizationOptions.module.css';\nconst SelectBaseOption = _ref => {\n  var _option$items$find;\n  let {\n    option,\n    label,\n    value,\n    onChange,\n    dataTest\n  } = _ref;\n  const selected = (_option$items$find = option.items.find(item => item.value === value)) === null || _option$items$find === void 0 ? void 0 : _option$items$find.value;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.tabSectionOption\n  }, /*#__PURE__*/React.createElement(SingleSelectField, {\n    name: `${option.name}-select`,\n    label: label,\n    onChange: _ref2 => {\n      let {\n        selected\n      } = _ref2;\n      return onChange(selected);\n    },\n    selected: selected,\n    inputWidth: \"280px\",\n    dense: true,\n    dataTest: `${dataTest}-select`\n  }, option.items.map(_ref3 => {\n    let {\n      value,\n      label\n    } = _ref3;\n    return /*#__PURE__*/React.createElement(SingleSelectOption, {\n      key: value,\n      value: value,\n      label: label,\n      dataTest: `${dataTest}-option`\n    });\n  })));\n};\nSelectBaseOption.propTypes = {\n  option: PropTypes.object.isRequired,\n  value: PropTypes.oneOfType([PropTypes.string, PropTypes.number]).isRequired,\n  onChange: PropTypes.func.isRequired,\n  dataTest: PropTypes.string,\n  label: PropTypes.string\n};\nconst mapStateToProps = (state, ownProps) => ({\n  value: sGetUiOptions(state)[ownProps.option.name]\n});\nconst mapDispatchToProps = (dispatch, ownProps) => ({\n  onChange: value => dispatch(acSetUiOptions({\n    [ownProps.option.name]: value\n  }))\n});\nexport default connect(mapStateToProps, mapDispatchToProps)(SelectBaseOption);","import i18n from '@dhis2/d2-i18n';\nimport React from 'react';\nimport { OPTION_DIGIT_GROUP_SEPARATOR, SEPARATOR_NONE, SEPARATOR_SPACE, SEPARATOR_COMMA } from '../../../modules/options.js';\nimport SelectBaseOption from './SelectBaseOption.js';\nconst DigitGroupSeparator = () => /*#__PURE__*/React.createElement(SelectBaseOption, {\n  label: i18n.t('Digit group separator'),\n  option: {\n    name: OPTION_DIGIT_GROUP_SEPARATOR,\n    items: [{\n      value: SEPARATOR_NONE,\n      label: i18n.t('None')\n    }, {\n      value: SEPARATOR_SPACE,\n      label: i18n.t('Space')\n    }, {\n      value: SEPARATOR_COMMA,\n      label: i18n.t('Comma')\n    }]\n  },\n  dataTest: \"dgs\"\n});\nexport default DigitGroupSeparator;","import i18n from '@dhis2/d2-i18n';\nimport React from 'react';\nimport { DISPLAY_DENSITY_COMFORTABLE, DISPLAY_DENSITY_NORMAL, DISPLAY_DENSITY_COMPACT, OPTION_DISPLAY_DENSITY } from '../../../modules/options.js';\nimport { default as SelectBaseOption } from './SelectBaseOption.js';\nconst DisplayDensity = () => /*#__PURE__*/React.createElement(SelectBaseOption, {\n  label: i18n.t('Display density'),\n  option: {\n    name: OPTION_DISPLAY_DENSITY,\n    items: [{\n      value: DISPLAY_DENSITY_COMFORTABLE,\n      label: i18n.t('Comfortable')\n    }, {\n      value: DISPLAY_DENSITY_NORMAL,\n      label: i18n.t('Normal')\n    }, {\n      value: DISPLAY_DENSITY_COMPACT,\n      label: i18n.t('Compact')\n    }]\n  },\n  dataTest: \"display-density\"\n});\nexport default DisplayDensity;","import i18n from '@dhis2/d2-i18n';\nimport React from 'react';\nimport { OPTION_FONT_SIZE, FONT_SIZE_LARGE, FONT_SIZE_NORMAL, FONT_SIZE_SMALL } from '../../../modules/options.js';\nimport SelectBaseOption from './SelectBaseOption.js';\nconst FontSize = () => /*#__PURE__*/React.createElement(SelectBaseOption, {\n  label: i18n.t('Font size'),\n  option: {\n    name: OPTION_FONT_SIZE,\n    items: [{\n      value: FONT_SIZE_LARGE,\n      label: i18n.t('Large')\n    }, {\n      value: FONT_SIZE_NORMAL,\n      label: i18n.t('Normal')\n    }, {\n      value: FONT_SIZE_SMALL,\n      label: i18n.t('Small')\n    }]\n  },\n  dataTest: \"font-size\"\n});\nexport default FontSize;","import { Checkbox } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { acSetUiOptions } from '../../../actions/ui.js';\nimport { sGetUiOptions } from '../../../reducers/ui.js';\nimport styles from '../styles/VisualizationOptions.module.css';\nconst CheckboxBaseOption = _ref => {\n  let {\n    option,\n    label,\n    value,\n    onChange,\n    inverted,\n    dataTest\n  } = _ref;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.tabSectionOption\n  }, /*#__PURE__*/React.createElement(Checkbox, {\n    checked: inverted ? !value : value,\n    label: label,\n    name: option.name,\n    onChange: _ref2 => {\n      let {\n        checked\n      } = _ref2;\n      return onChange(inverted ? !checked : checked);\n    },\n    dense: true,\n    dataTest: dataTest\n  }));\n};\nCheckboxBaseOption.propTypes = {\n  dataTest: PropTypes.string,\n  inverted: PropTypes.bool,\n  label: PropTypes.string,\n  option: PropTypes.object,\n  value: PropTypes.bool,\n  onChange: PropTypes.func\n};\nconst mapStateToProps = (state, ownProps) => ({\n  value: sGetUiOptions(state)[ownProps.option.name]\n});\nconst mapDispatchToProps = (dispatch, ownProps) => ({\n  onChange: value => dispatch(acSetUiOptions({\n    [ownProps.option.name]: value\n  }))\n});\nexport default connect(mapStateToProps, mapDispatchToProps)(CheckboxBaseOption);","import i18n from '@dhis2/d2-i18n';\nimport React from 'react';\nimport { OPTION_SHOW_HIERARCHY } from '../../../modules/options.js';\nimport CheckboxBaseOption from './CheckboxBaseOption.js';\nconst ShowHierarchy = () => /*#__PURE__*/React.createElement(CheckboxBaseOption, {\n  label: i18n.t('Display organisation unit hierarchy'),\n  option: {\n    name: OPTION_SHOW_HIERARCHY\n  }\n});\nexport default ShowHierarchy;","import i18n from '@dhis2/d2-i18n';\nimport React from 'react';\nimport { OPTION_SKIP_ROUNDING } from '../../../modules/options.js';\nimport CheckboxBaseOption from './CheckboxBaseOption.js';\nconst SkipRounding = () => /*#__PURE__*/React.createElement(CheckboxBaseOption, {\n  label: i18n.t('Skip rounding'),\n  option: {\n    name: OPTION_SKIP_ROUNDING\n  },\n  dataTest: \"skip-rounding\"\n});\nexport default SkipRounding;","import i18n from '@dhis2/d2-i18n';\nexport default _ref => {\n  let {\n    content\n  } = _ref;\n  return {\n    key: 'data-display',\n    label: i18n.t('Display'),\n    content\n  };\n};","import i18n from '@dhis2/d2-i18n';\nexport default content => ({\n  key: 'data-tab',\n  label: i18n.t('Data'),\n  content\n});","import { useDataEngine } from '@dhis2/app-runtime';\nimport i18n from '@dhis2/d2-i18n';\nimport { SingleSelectField, SingleSelectOption } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React, { useState } from 'react';\nimport { connect } from 'react-redux';\nimport { acSetUiOptions } from '../../../actions/ui.js';\nimport { OPTION_LEGEND_SET } from '../../../modules/options.js';\nimport { sGetUiOptions } from '../../../reducers/ui.js';\nconst query = {\n  legendSets: {\n    resource: 'legendSets',\n    params: {\n      fields: ['id', 'displayName~rename(name)', 'legends[id,displayName~rename(name),startValue,endValue,color]'],\n      paging: 'false'\n    }\n  }\n};\nconst LegendSetSelect = _ref => {\n  let {\n    value,\n    loading,\n    options,\n    onFocus,\n    onChange,\n    dataTest\n  } = _ref;\n  return /*#__PURE__*/React.createElement(SingleSelectField, {\n    name: \"legendSetSelect\",\n    label: i18n.t('Legend'),\n    selected: value === null || value === void 0 ? void 0 : value.id,\n    inputWidth: \"280px\",\n    placeholder: i18n.t('Select from legends'),\n    loadingText: i18n.t('Loading legends'),\n    loading: loading,\n    dense: true,\n    onFocus: onFocus,\n    onChange: _ref2 => {\n      let {\n        selected\n      } = _ref2;\n      return onChange({\n        id: selected,\n        displayName: options.find(option => option.value === selected).label\n      });\n    },\n    dataTest: `${dataTest}-select`\n  }, options.map(_ref3 => {\n    let {\n      value,\n      label\n    } = _ref3;\n    return /*#__PURE__*/React.createElement(SingleSelectOption, {\n      key: value,\n      value: value,\n      label: label,\n      dataTest: `${dataTest}-option`\n    });\n  }));\n};\nLegendSetSelect.propTypes = {\n  dataTest: PropTypes.string,\n  loading: PropTypes.bool,\n  options: PropTypes.array,\n  value: PropTypes.object,\n  onChange: PropTypes.func,\n  onFocus: PropTypes.func\n};\nconst LegendSet = _ref4 => {\n  let {\n    value,\n    onChange,\n    dataTest\n  } = _ref4;\n  const engine = useDataEngine();\n  const [options, setOptions] = useState([]);\n  const [isLoaded, setIsLoaded] = useState(false);\n  if (value && value.id) {\n    if (!options.find(option => option.value === value.id)) {\n      setOptions([...options, {\n        value: value.id,\n        label: value.displayName\n      }]);\n    }\n  }\n  const onSelectFocus = async () => {\n    if (!isLoaded) {\n      const {\n        legendSets\n      } = await engine.query(query);\n      if (legendSets) {\n        const options = legendSets.legendSets.map(legendSet => ({\n          value: legendSet.id,\n          label: legendSet.name\n        }));\n        setOptions(options);\n      }\n      setIsLoaded(true);\n    }\n  };\n  return /*#__PURE__*/React.createElement(LegendSetSelect, {\n    loading: !isLoaded,\n    value: value,\n    options: options,\n    onChange: onChange,\n    onFocus: onSelectFocus,\n    dataTest: dataTest\n  });\n};\nLegendSet.propTypes = {\n  onChange: PropTypes.func.isRequired,\n  dataTest: PropTypes.string,\n  value: PropTypes.object\n};\nconst mapStateToProps = state => ({\n  value: sGetUiOptions(state)[OPTION_LEGEND_SET]\n});\nconst mapDispatchToProps = dispatch => ({\n  onChange: _ref5 => {\n    let {\n      id,\n      displayName\n    } = _ref5;\n    return dispatch(acSetUiOptions({\n      [OPTION_LEGEND_SET]: {\n        id,\n        displayName\n      }\n    }));\n  }\n});\nexport default connect(mapStateToProps, mapDispatchToProps)(LegendSet);","import { LEGEND_DISPLAY_STRATEGY_BY_DATA_ITEM, LEGEND_DISPLAY_STRATEGY_FIXED } from '@dhis2/analytics';\nimport i18n from '@dhis2/d2-i18n';\nimport { Radio, Field } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React, { Fragment } from 'react';\nimport { connect } from 'react-redux';\nimport { acSetUiOptions } from '../../../actions/ui.js';\nimport { OPTION_LEGEND_DISPLAY_STRATEGY } from '../../../modules/options.js';\nimport { sGetUiOptions } from '../../../reducers/ui.js';\nimport styles from '../styles/VisualizationOptions.module.css';\nimport LegendSet from './LegendSet.js';\nconst LegendDisplayStrategy = _ref => {\n  let {\n    value,\n    onChange\n  } = _ref;\n  return /*#__PURE__*/React.createElement(Fragment, null, /*#__PURE__*/React.createElement(Field, {\n    name: OPTION_LEGEND_DISPLAY_STRATEGY,\n    dense: true\n  }, /*#__PURE__*/React.createElement(Radio, {\n    key: LEGEND_DISPLAY_STRATEGY_BY_DATA_ITEM,\n    label: i18n.t('Use pre-defined legend per data item'),\n    value: LEGEND_DISPLAY_STRATEGY_BY_DATA_ITEM,\n    checked: value === LEGEND_DISPLAY_STRATEGY_BY_DATA_ITEM,\n    onChange: onChange,\n    dense: true,\n    dataTest: `legend-display-strategy-${LEGEND_DISPLAY_STRATEGY_BY_DATA_ITEM}`\n  }), /*#__PURE__*/React.createElement(Radio, {\n    key: LEGEND_DISPLAY_STRATEGY_FIXED,\n    label: i18n.t('Choose a single legend for the entire visualization'),\n    value: LEGEND_DISPLAY_STRATEGY_FIXED,\n    checked: value === LEGEND_DISPLAY_STRATEGY_FIXED,\n    onChange: onChange,\n    dense: true,\n    dataTest: `legend-display-strategy-${LEGEND_DISPLAY_STRATEGY_FIXED}`\n  })), value === LEGEND_DISPLAY_STRATEGY_FIXED ? /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.tabSectionOptionToggleable\n  }, /*#__PURE__*/React.createElement(LegendSet, {\n    dataTest: \"fixed-legend-set\"\n  })) : null);\n};\nLegendDisplayStrategy.propTypes = {\n  value: PropTypes.string.isRequired,\n  onChange: PropTypes.func.isRequired\n};\nconst mapStateToProps = state => ({\n  value: sGetUiOptions(state)[OPTION_LEGEND_DISPLAY_STRATEGY]\n});\nconst mapDispatchToProps = dispatch => ({\n  onChange: _ref2 => {\n    let {\n      value\n    } = _ref2;\n    return dispatch(acSetUiOptions({\n      [OPTION_LEGEND_DISPLAY_STRATEGY]: value\n    }));\n  }\n});\nexport default connect(mapStateToProps, mapDispatchToProps)(LegendDisplayStrategy);","import { Field, Radio } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { acSetUiOptions } from '../../../actions/ui.js';\nimport { sGetUiOptions } from '../../../reducers/ui.js';\nconst RadioBaseOption = _ref => {\n  let {\n    name,\n    items,\n    value,\n    onChange,\n    dataTest\n  } = _ref;\n  return /*#__PURE__*/React.createElement(Field, {\n    name: name,\n    dense: true\n  }, items.map(_ref2 => {\n    let {\n      id,\n      label\n    } = _ref2;\n    return /*#__PURE__*/React.createElement(Radio, {\n      key: id,\n      label: label,\n      value: id,\n      checked: value === id,\n      onChange: _ref3 => {\n        let {\n          value\n        } = _ref3;\n        return onChange(value);\n      },\n      dense: true,\n      dataTest: `${dataTest}-option-${id}`\n    });\n  }));\n};\nRadioBaseOption.propTypes = {\n  items: PropTypes.arrayOf(PropTypes.shape({\n    id: PropTypes.string,\n    label: PropTypes.string\n  })).isRequired,\n  name: PropTypes.string.isRequired,\n  value: PropTypes.string.isRequired,\n  onChange: PropTypes.func.isRequired,\n  dataTest: PropTypes.string\n};\nconst mapStateToProps = (state, ownProps) => ({\n  value: sGetUiOptions(state)[ownProps.name]\n});\nconst mapDispatchToProps = (dispatch, ownProps) => ({\n  onChange: value => dispatch(acSetUiOptions({\n    [ownProps.name]: value\n  }))\n});\nexport default connect(mapStateToProps, mapDispatchToProps)(RadioBaseOption);","import { LEGEND_DISPLAY_STYLE_FILL, LEGEND_DISPLAY_STYLE_TEXT } from '@dhis2/analytics';\nimport i18n from '@dhis2/d2-i18n';\nimport React from 'react';\nimport { OPTION_LEGEND_DISPLAY_STYLE } from '../../../modules/options.js';\nimport RadioBaseOption from './RadioBaseOption.js';\nconst LegendDisplayStyle = () => /*#__PURE__*/React.createElement(RadioBaseOption, {\n  name: OPTION_LEGEND_DISPLAY_STYLE,\n  items: [{\n    id: LEGEND_DISPLAY_STYLE_FILL,\n    label: i18n.t('Legend changes background color')\n  }, {\n    id: LEGEND_DISPLAY_STYLE_TEXT,\n    label: i18n.t('Legend changes text color')\n  }],\n  dataTest: \"legend-display-style\"\n});\nexport default LegendDisplayStyle;","import i18n from '@dhis2/d2-i18n';\nimport React from 'react';\nimport { OPTION_SHOW_LEGEND_KEY } from '../../../modules/options.js';\nimport CheckboxBaseOption from './CheckboxBaseOption.js';\nconst ShowLegendKey = () => /*#__PURE__*/React.createElement(CheckboxBaseOption, {\n  label: i18n.t('Show legend key'),\n  option: {\n    name: OPTION_SHOW_LEGEND_KEY\n  },\n  dataTest: \"option-legend-key\"\n});\nexport default ShowLegendKey;","import { LEGEND_DISPLAY_STRATEGY_BY_DATA_ITEM, LEGEND_DISPLAY_STRATEGY_FIXED, LEGEND_DISPLAY_STYLE_FILL } from '@dhis2/analytics';\nimport i18n from '@dhis2/d2-i18n';\nimport { Checkbox, FieldSet, Legend as UiCoreLegend } from '@dhis2/ui';\nimport cx from 'classnames';\nimport PropTypes from 'prop-types';\nimport React, { useState } from 'react';\nimport { connect } from 'react-redux';\nimport { acSetUiOptions } from '../../../actions/ui.js';\nimport { OPTION_LEGEND_DISPLAY_STRATEGY, OPTION_LEGEND_DISPLAY_STYLE, OPTION_LEGEND_SET } from '../../../modules/options.js';\nimport { sGetUiOptions } from '../../../reducers/ui.js';\nimport styles from '../styles/VisualizationOptions.module.css';\nimport LegendDisplayStrategy from './LegendDisplayStrategy.js';\nimport LegendDisplayStyle from './LegendDisplayStyle.js';\nimport ShowLegendKey from './ShowLegendKey.js';\nconst Legend = _ref => {\n  let {\n    legendSet,\n    legendDisplayStrategy,\n    onChange,\n    hideStyleOptions\n  } = _ref;\n  const [legendEnabled, setLegendEnabled] = useState(!((!legendDisplayStrategy || legendDisplayStrategy === LEGEND_DISPLAY_STRATEGY_FIXED) && !legendSet));\n  const onCheckboxChange = _ref2 => {\n    let {\n      checked\n    } = _ref2;\n    setLegendEnabled(checked);\n    if (checked) {\n      onChange({\n        [OPTION_LEGEND_DISPLAY_STRATEGY]: LEGEND_DISPLAY_STRATEGY_BY_DATA_ITEM\n      });\n      onChange({\n        [OPTION_LEGEND_DISPLAY_STYLE]: LEGEND_DISPLAY_STYLE_FILL\n      });\n    } else {\n      onChange({\n        [OPTION_LEGEND_DISPLAY_STRATEGY]: undefined\n      });\n      onChange({\n        [OPTION_LEGEND_SET]: undefined\n      });\n      onChange({\n        [OPTION_LEGEND_DISPLAY_STYLE]: undefined\n      });\n    }\n  };\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.tabSectionOption\n  }, /*#__PURE__*/React.createElement(Checkbox, {\n    checked: legendEnabled,\n    label: i18n.t('Use a legend for table cell colors'),\n    onChange: onCheckboxChange,\n    dense: true\n  }), legendEnabled ? /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.tabSectionOptionToggleable\n  }, !hideStyleOptions ? /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.tabSectionOption\n  }, /*#__PURE__*/React.createElement(FieldSet, null, /*#__PURE__*/React.createElement(UiCoreLegend, null, /*#__PURE__*/React.createElement(\"span\", {\n    className: cx(styles.tabSectionTitle, styles.tabSectionTitleMargin)\n  }, i18n.t('Legend style'))), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.tabSectionOption\n  }, /*#__PURE__*/React.createElement(LegendDisplayStyle, null)))) : null, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.tabSectionOption\n  }, /*#__PURE__*/React.createElement(FieldSet, null, /*#__PURE__*/React.createElement(UiCoreLegend, null, /*#__PURE__*/React.createElement(\"span\", {\n    className: cx(styles.tabSectionTitle, {\n      [styles.tabSectionTitleMargin]: hideStyleOptions\n    })\n  }, i18n.t('Legend type'))), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.tabSectionOption\n  }, /*#__PURE__*/React.createElement(LegendDisplayStrategy, null)))), /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(ShowLegendKey, null))) : null);\n};\nLegend.propTypes = {\n  onChange: PropTypes.func.isRequired,\n  hideStyleOptions: PropTypes.bool,\n  legendDisplayStrategy: PropTypes.string,\n  legendSet: PropTypes.object\n};\nconst mapStateToProps = state => ({\n  legendSet: sGetUiOptions(state)[OPTION_LEGEND_SET],\n  legendDisplayStrategy: sGetUiOptions(state)[OPTION_LEGEND_DISPLAY_STRATEGY]\n});\nconst mapDispatchToProps = dispatch => ({\n  onChange: params => dispatch(acSetUiOptions(params))\n});\nexport default connect(mapStateToProps, mapDispatchToProps)(Legend);","import i18n from '@dhis2/d2-i18n';\nimport React from 'react';\nimport Legend from '../../../components/VisualizationOptions/Options/Legend.js';\nexport default () => ({\n  key: 'legend-tab',\n  label: i18n.t('Legend'),\n  content: [{\n    key: 'legend-section-1',\n    content: React.Children.toArray([/*#__PURE__*/React.createElement(Legend, null)])\n  }]\n});","import i18n from '@dhis2/d2-i18n';\nexport default content => ({\n  key: 'style-tab',\n  label: i18n.t('Style'),\n  content\n});","import i18n from '@dhis2/d2-i18n';\nimport React from 'react';\nimport CheckboxBaseOption from './CheckboxBaseOption.js';\nconst ColSubTotals = () => /*#__PURE__*/React.createElement(CheckboxBaseOption, {\n  label: i18n.t('Column sub-totals'),\n  option: {\n    name: 'colSubTotals'\n  }\n});\nexport default ColSubTotals;","import i18n from '@dhis2/d2-i18n';\nimport React from 'react';\nimport CheckboxBaseOption from './CheckboxBaseOption.js';\nconst ColTotals = () => /*#__PURE__*/React.createElement(CheckboxBaseOption, {\n  label: i18n.t('Columns totals'),\n  option: {\n    name: 'colTotals'\n  }\n});\nexport default ColTotals;","import i18n from '@dhis2/d2-i18n';\nimport React from 'react';\nimport CheckboxBaseOption from './CheckboxBaseOption.js';\nconst HideEmptyRows = () => /*#__PURE__*/React.createElement(CheckboxBaseOption, {\n  label: i18n.t('Hide empty rows'),\n  option: {\n    name: 'hideEmptyRows'\n  }\n});\nexport default HideEmptyRows;","import i18n from '@dhis2/d2-i18n';\nimport React from 'react';\nimport CheckboxBaseOption from './CheckboxBaseOption.js';\nconst RowSubTotals = () => /*#__PURE__*/React.createElement(CheckboxBaseOption, {\n  label: i18n.t('Row sub-totals'),\n  option: {\n    name: 'rowSubTotals'\n  }\n});\nexport default RowSubTotals;","import i18n from '@dhis2/d2-i18n';\nimport React from 'react';\nimport CheckboxBaseOption from './CheckboxBaseOption.js';\nconst RowTotals = () => /*#__PURE__*/React.createElement(CheckboxBaseOption, {\n  label: i18n.t('Row totals'),\n  option: {\n    name: 'rowTotals'\n  }\n});\nexport default RowTotals;","import i18n from '@dhis2/d2-i18n';\nimport React from 'react';\nimport CheckboxBaseOption from './CheckboxBaseOption.js';\nconst ShowDimensionLabels = () => /*#__PURE__*/React.createElement(CheckboxBaseOption, {\n  label: i18n.t('Dimension labels'),\n  option: {\n    name: 'showDimensionLabels'\n  }\n});\nexport default ShowDimensionLabels;","import { InputField } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { acSetUiOptions } from '../../../actions/ui.js';\nimport { sGetUiOptions } from '../../../reducers/ui.js';\nimport styles from '../styles/VisualizationOptions.module.css';\nconst TextBaseOption = _ref => {\n  let {\n    type,\n    label,\n    placeholder,\n    width,\n    option,\n    value,\n    onChange,\n    disabled,\n    dataTest\n  } = _ref;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.tabSectionOption\n  }, /*#__PURE__*/React.createElement(InputField, {\n    type: type,\n    label: label,\n    onChange: _ref2 => {\n      let {\n        value\n      } = _ref2;\n      return onChange(value);\n    },\n    name: option.name,\n    value: value,\n    placeholder: placeholder,\n    inputWidth: width,\n    dense: true,\n    disabled: disabled,\n    dataTest: `${dataTest}-input`\n  }));\n};\nTextBaseOption.defaultProps = {\n  option: {}\n};\nTextBaseOption.propTypes = {\n  dataTest: PropTypes.string,\n  disabled: PropTypes.bool,\n  label: PropTypes.string,\n  option: PropTypes.object,\n  placeholder: PropTypes.string,\n  type: PropTypes.string,\n  value: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n  width: PropTypes.string,\n  onChange: PropTypes.func\n};\nconst mapStateToProps = (state, ownProps) => ({\n  value: sGetUiOptions(state)[ownProps.option.name]\n});\nconst mapDispatchToProps = (dispatch, ownProps) => ({\n  onChange: value => dispatch(acSetUiOptions({\n    [ownProps.option.name]: value\n  }))\n});\nexport default connect(mapStateToProps, mapDispatchToProps)(TextBaseOption);","import i18n from '@dhis2/d2-i18n';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport TextBaseOption from './TextBaseOption.js';\nconst Title = _ref => {\n  let {\n    label\n  } = _ref;\n  return /*#__PURE__*/React.createElement(TextBaseOption, {\n    type: \"text\",\n    width: \"280px\",\n    label: label,\n    placeholder: i18n.t('Add a title'),\n    option: {\n      name: 'title'\n    }\n  });\n};\nTitle.propTypes = {\n  label: PropTypes.string\n};\nexport default Title;","import i18n from '@dhis2/d2-i18n';\nexport default _ref => {\n  let {\n    content\n  } = _ref;\n  return {\n    key: 'data-empty-data',\n    label: i18n.t('Empty data'),\n    content\n  };\n};","import i18n from '@dhis2/d2-i18n';\nexport default _ref => {\n  let {\n    content\n  } = _ref;\n  return {\n    key: 'data-totals',\n    label: i18n.t('Totals'),\n    content\n  };\n};","function _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == typeof i ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != typeof t || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != typeof i) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nimport i18n from '@dhis2/d2-i18n';\nimport { Button, Input, Label, SingleSelect, SingleSelectOption } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { acSetUiOptions } from '../../../actions/ui.js';\nimport { OPTION_MEASURE_CRITERIA } from '../../../modules/options.js';\nimport { sGetUiOptions } from '../../../reducers/ui.js';\nimport styles from '../styles/VisualizationOptions.module.css';\nconst OperatorSelect = _ref => {\n  let {\n    name,\n    value,\n    onChange\n  } = _ref;\n  const options = [{\n    id: 'EQ',\n    label: '='\n  }, {\n    id: 'GT',\n    label: '>'\n  }, {\n    id: 'GE',\n    label: '>='\n  }, {\n    id: 'LT',\n    label: '<'\n  }, {\n    id: 'LE',\n    label: '<='\n  }];\n  return /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      width: '112px'\n    }\n  }, /*#__PURE__*/React.createElement(SingleSelect, {\n    name: name,\n    onChange: _ref2 => {\n      let {\n        selected\n      } = _ref2;\n      onChange(selected);\n    },\n    selected: value,\n    tabIndex: \"0\",\n    inputMaxWidth: \"106px\",\n    dense: true\n  }, options.map(_ref3 => {\n    let {\n      id,\n      label\n    } = _ref3;\n    return /*#__PURE__*/React.createElement(SingleSelectOption, {\n      key: id,\n      value: id,\n      label: label\n    });\n  })));\n};\nOperatorSelect.propTypes = {\n  name: PropTypes.string.isRequired,\n  value: PropTypes.string.isRequired,\n  onChange: PropTypes.func.isRequired\n};\nconst ValueInput = _ref4 => {\n  let {\n    name,\n    value,\n    onChange\n  } = _ref4;\n  return /*#__PURE__*/React.createElement(Input, {\n    name: name,\n    value: value,\n    type: \"number\",\n    onChange: _ref5 => {\n      let {\n        value\n      } = _ref5;\n      return onChange(value);\n    },\n    width: \"72px\",\n    dense: true\n  });\n};\nValueInput.propTypes = {\n  name: PropTypes.string.isRequired,\n  value: PropTypes.string.isRequired,\n  onChange: PropTypes.func.isRequired\n};\nclass MeasureCriteria extends Component {\n  constructor(props) {\n    super(props);\n    _defineProperty(this, \"onClear\", () => this.setState(this.defaultState, this.props.onChange('')));\n    _defineProperty(this, \"onChange\", name => value => {\n      this.setState({\n        [name]: value\n      }, () => {\n        const {\n          op1,\n          v1,\n          op2,\n          v2\n        } = this.state;\n        const value = [];\n        if (op1 && v1) {\n          value.push(`${op1}:${v1}`);\n        }\n        if (op2 && v2) {\n          value.push(`${op2}:${v2}`);\n        }\n        this.props.onChange(value.length > 0 ? value.join(';') : '');\n      });\n    });\n    this.defaultState = {\n      op1: '',\n      v1: '',\n      op2: '',\n      v2: ''\n    };\n    const [_op = '', _v = '', _op2 = '', _v2 = ''] = props.value.split(/[;:]/);\n    this.state = {\n      op1: _op,\n      v1: _v,\n      op2: _op2,\n      v2: _v2\n    };\n  }\n  render() {\n    const {\n      op1,\n      v1,\n      op2,\n      v2\n    } = this.state;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.tabSectionOption\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      className: styles.tabSectionOptionText\n    }, i18n.t('You can set a minimum or maximum value. This will apply to the entire visualization, all values outside of the minimum/maximum range will not be displayed')), /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.tabSectionOptionComplexInline\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        width: '250px'\n      }\n    }, /*#__PURE__*/React.createElement(Label, null, i18n.t('Minimum data value')), /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.tabSectionOptionComplexInline\n    }, /*#__PURE__*/React.createElement(OperatorSelect, {\n      name: \"op1\",\n      value: op1,\n      onChange: this.onChange('op1')\n    }), /*#__PURE__*/React.createElement(ValueInput, {\n      name: \"v1\",\n      value: v1,\n      onChange: this.onChange('v1')\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        width: '250px'\n      }\n    }, /*#__PURE__*/React.createElement(Label, null, i18n.t('Maximum data value')), /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.tabSectionOptionComplexInline\n    }, /*#__PURE__*/React.createElement(OperatorSelect, {\n      name: \"op2\",\n      value: op2,\n      onChange: this.onChange('op2')\n    }), /*#__PURE__*/React.createElement(ValueInput, {\n      name: \"v2\",\n      value: v2,\n      onChange: this.onChange('v2')\n    })))), /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        paddingTop: '16px'\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      onClick: this.onClear\n    }, i18n.t('Clear min/max limits'))));\n  }\n}\nMeasureCriteria.propTypes = {\n  value: PropTypes.string,\n  onChange: PropTypes.func\n};\nconst mapStateToProps = state => ({\n  value: sGetUiOptions(state)[OPTION_MEASURE_CRITERIA] || ''\n});\nconst mapDispatchToProps = dispatch => ({\n  onChange: value => dispatch(acSetUiOptions({\n    [OPTION_MEASURE_CRITERIA]: value\n  }))\n});\nexport default connect(mapStateToProps, mapDispatchToProps)(MeasureCriteria);","import { VIS_TYPE_PIVOT_TABLE } from '@dhis2/analytics';\nimport lineListConfig from './lineListConfig.js';\nimport pivotTableConfig from './pivotTableConfig.js';\nexport const getOptionsByType = _ref => {\n  let {\n    type,\n    serverVersion\n  } = _ref;\n  switch (type) {\n    case VIS_TYPE_PIVOT_TABLE:\n      return pivotTableConfig();\n    default:\n      return lineListConfig(serverVersion);\n  }\n};","import i18n from '@dhis2/d2-i18n';\nimport React from 'react';\nimport ColSubTotals from '../../components/VisualizationOptions/Options/ColSubTotals.js';\nimport ColTotals from '../../components/VisualizationOptions/Options/ColTotals.js';\nimport DigitGroupSeparator from '../../components/VisualizationOptions/Options/DigitGroupSeparator.js';\nimport DisplayDensity from '../../components/VisualizationOptions/Options/DisplayDensity.js';\nimport FontSize from '../../components/VisualizationOptions/Options/FontSize.js';\nimport HideEmptyRows from '../../components/VisualizationOptions/Options/HideEmptyRows.js';\nimport RowSubTotals from '../../components/VisualizationOptions/Options/RowSubTotals.js';\nimport RowTotals from '../../components/VisualizationOptions/Options/RowTotals.js';\nimport ShowDimensionLabels from '../../components/VisualizationOptions/Options/ShowDimensionLabels.js';\nimport ShowHierarchy from '../../components/VisualizationOptions/Options/ShowHierarchy.js';\nimport Title from '../../components/VisualizationOptions/Options/Title.js';\nimport getDisplayTemplate from './sections/templates/display.js';\nimport getEmptyDataTemplate from './sections/templates/emptyData.js';\nimport getTotalsTemplate from './sections/templates/totals.js';\nimport getDataTab from './tabs/data.js';\nimport getLegendTab from './tabs/legend.js';\nimport getLimitValuesTab from './tabs/limitValues.js';\nimport getStyleTab from './tabs/style.js';\nexport default () => [getDataTab([getDisplayTemplate({\n  content: React.Children.toArray([/*#__PURE__*/React.createElement(ShowHierarchy, null), /*#__PURE__*/React.createElement(ShowDimensionLabels, null)])\n}), getTotalsTemplate({\n  content: React.Children.toArray([/*#__PURE__*/React.createElement(ColTotals, null), /*#__PURE__*/React.createElement(ColSubTotals, null), /*#__PURE__*/React.createElement(RowTotals, null), /*#__PURE__*/React.createElement(RowSubTotals, null)])\n}), getEmptyDataTemplate({\n  content: React.Children.toArray([/*#__PURE__*/React.createElement(HideEmptyRows, null)\n  //TODO: hide n/a data\n  ])\n})]), getLegendTab(), getStyleTab([{\n  key: 'style-section-1',\n  content: React.Children.toArray([/*#__PURE__*/React.createElement(Title, {\n    label: i18n.t('Table title')\n  }), /*#__PURE__*/React.createElement(DisplayDensity, null), /*#__PURE__*/React.createElement(FontSize, null), /*#__PURE__*/React.createElement(DigitGroupSeparator, null)])\n}]), getLimitValuesTab() // TODO: include these two options instead\n//Limit the number of rows shown in the table\n//Only show the [top/bottom] x rows\n];","import i18n from '@dhis2/d2-i18n';\nimport React from 'react';\nimport MeasureCriteria from '../../../components/VisualizationOptions/Options/MeasureCriteria.js';\nexport default () => ({\n  key: 'limitValues-tab',\n  label: i18n.t('Limit values'),\n  content: [\n  /*\n  {\n      key: 'limitValues-limit-numbers',\n      label: i18n.t('Limit number of values'),\n      content: [<TopLimit />],\n  },*/\n  {\n    key: 'limitValues-limit-min-max',\n    label: i18n.t('Limit minimum/maximum values'),\n    content: React.Children.toArray([/*#__PURE__*/React.createElement(MeasureCriteria, null)])\n  }]\n});","import React from 'react';\nimport DigitGroupSeparator from '../../components/VisualizationOptions/Options/DigitGroupSeparator.js';\nimport DisplayDensity from '../../components/VisualizationOptions/Options/DisplayDensity.js';\nimport FontSize from '../../components/VisualizationOptions/Options/FontSize.js';\nimport ShowHierarchy from '../../components/VisualizationOptions/Options/ShowHierarchy.js';\nimport SkipRounding from '../../components/VisualizationOptions/Options/SkipRounding.js';\nimport getDisplayTemplate from './sections/templates/display.js';\nimport getDataTab from './tabs/data.js';\nimport getLegendTab from './tabs/legend.js';\nimport getStyleTab from './tabs/style.js';\nexport default serverVersion => {\n  const currentVersion = `${serverVersion.major}.${serverVersion.minor}.${serverVersion.patch || 0}`;\n  const optionsConfig = [getDataTab([getDisplayTemplate({\n    content: React.Children.toArray([/*#__PURE__*/React.createElement(SkipRounding, null)])\n  })]), getStyleTab([{\n    key: 'style-section-1',\n    content: React.Children.toArray([/*#__PURE__*/React.createElement(DisplayDensity, null), /*#__PURE__*/React.createElement(FontSize, null), /*#__PURE__*/React.createElement(DigitGroupSeparator, null), currentVersion >= '2.40.0' ? /*#__PURE__*/React.createElement(ShowHierarchy, null) : null])\n  }])];\n  optionsConfig.push(getLegendTab());\n  return optionsConfig;\n};","import { VisualizationOptions, HoverMenuDropdown, HoverMenuList, HoverMenuListItem } from '@dhis2/analytics';\nimport { useConfig } from '@dhis2/app-runtime';\nimport i18n from '@dhis2/d2-i18n';\nimport React, { useState } from 'react';\nimport { getOptionsByType } from '../../modules/options/config.js';\nimport UpdateVisualizationContainer from '../UpdateButton/UpdateVisualizationContainer.js';\nconst VisualizationOptionsManager = () => {\n  const [selectedOptionConfigKey, setSelectedOptionConfigKey] = useState(null);\n  const {\n    serverVersion\n  } = useConfig();\n  const onOptionsUpdate = handler => {\n    handler();\n    setSelectedOptionConfigKey(null);\n  };\n  const optionsConfig = getOptionsByType({\n    serverVersion\n  });\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(HoverMenuDropdown, {\n    label: i18n.t('Options')\n  }, /*#__PURE__*/React.createElement(HoverMenuList, {\n    dataTest: \"options-menu-list\"\n  }, optionsConfig.map(_ref => {\n    let {\n      label,\n      key\n    } = _ref;\n    return /*#__PURE__*/React.createElement(HoverMenuListItem, {\n      key: key,\n      label: label,\n      onClick: () => {\n        setSelectedOptionConfigKey(key);\n      }\n    });\n  }))), selectedOptionConfigKey && /*#__PURE__*/React.createElement(UpdateVisualizationContainer, {\n    renderComponent: handler => /*#__PURE__*/React.createElement(VisualizationOptions, {\n      optionsConfig: optionsConfig,\n      onUpdate: () => onOptionsUpdate(handler),\n      onClose: () => setSelectedOptionConfigKey(null),\n      initiallyActiveTabKey: selectedOptionConfigKey\n    })\n  }));\n};\nexport default VisualizationOptionsManager;","import { HoverMenuDropdown, HoverMenuList, HoverMenuListItem } from '@dhis2/analytics';\nimport i18n from '@dhis2/d2-i18n';\nimport React, { useCallback } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { acToggleUiSidebarHidden, acToggleUiLayoutPanelHidden, acSetUiDetailsPanelOpen, acSetUiAccessoryPanelWidth } from '../../actions/ui.js';\nimport { ACCESSORY_PANEL_DEFAULT_WIDTH } from '../../modules/accessoryPanelConstants.js';\nimport { setUserSidebarWidthToLocalStorage } from '../../modules/localStorage.js';\nimport { sGetCurrentId } from '../../reducers/current.js';\nimport { sGetUiLayoutPanelHidden, sGetUiSidebarHidden, sGetUiShowDetailsPanel, sGetUiAccessoryPanelWidth } from '../../reducers/ui.js';\nexport default function ViewDropDown() {\n  const dispatch = useDispatch();\n  const isSidebarHidden = useSelector(sGetUiSidebarHidden);\n  const isLayoutPanelHidden = useSelector(sGetUiLayoutPanelHidden);\n  const isDetailsPanelOpen = useSelector(sGetUiShowDetailsPanel);\n  const userSettingWidth = useSelector(sGetUiAccessoryPanelWidth);\n  const id = useSelector(sGetCurrentId);\n  const toggleLayoutPanelHidden = useCallback(() => {\n    dispatch(acToggleUiLayoutPanelHidden());\n  }, [dispatch]);\n  const toggleSidebarHidden = useCallback(() => {\n    dispatch(acToggleUiSidebarHidden());\n  }, [dispatch]);\n  const resetAccessorySidebarWidth = useCallback(() => {\n    setUserSidebarWidthToLocalStorage(ACCESSORY_PANEL_DEFAULT_WIDTH);\n    dispatch(acSetUiAccessoryPanelWidth(ACCESSORY_PANEL_DEFAULT_WIDTH));\n  }, [dispatch]);\n  const toggleDetailsPanelOpen = useCallback(() => {\n    dispatch(acSetUiDetailsPanelOpen(!isDetailsPanelOpen));\n  }, [dispatch, isDetailsPanelOpen]);\n  const toggleLayoutPanelText = isLayoutPanelHidden ? i18n.t('Show layout') : i18n.t('Hide layout');\n  const toggleSidebarText = isSidebarHidden ? i18n.t('Show dimensions sidebar') : i18n.t('Hide dimensions sidebar');\n  const toggleDetailsPanelText = isDetailsPanelOpen ? i18n.t('Hide interpretations and details') : i18n.t('Show interpretations and details');\n  return /*#__PURE__*/React.createElement(HoverMenuDropdown, {\n    label: i18n.t('View')\n  }, /*#__PURE__*/React.createElement(HoverMenuList, null, /*#__PURE__*/React.createElement(HoverMenuListItem, {\n    label: toggleLayoutPanelText,\n    onClick: toggleLayoutPanelHidden\n  }), /*#__PURE__*/React.createElement(HoverMenuListItem, {\n    label: toggleSidebarText,\n    onClick: toggleSidebarHidden\n  }), /*#__PURE__*/React.createElement(HoverMenuListItem, {\n    label: i18n.t('Reset sidebar width'),\n    onClick: resetAccessorySidebarWidth,\n    disabled: userSettingWidth === ACCESSORY_PANEL_DEFAULT_WIDTH\n  }), /*#__PURE__*/React.createElement(HoverMenuListItem, {\n    label: toggleDetailsPanelText,\n    onClick: toggleDetailsPanelOpen,\n    disabled: !id\n  })));\n}","import { VIS_TYPE_LINE_LIST, useCachedDataQuery, FileMenu, preparePayloadForSaveAs, preparePayloadForSave, HoverMenuBar } from '@dhis2/analytics';\nimport { useAlert, useDataMutation, useDataEngine } from '@dhis2/app-runtime';\nimport i18n from '@dhis2/d2-i18n';\nimport PropTypes from 'prop-types';\nimport React, { useCallback } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { tSetCurrent } from '../../actions/current.js';\nimport { acSetVisualization } from '../../actions/visualization.js';\nimport { getAlertTypeByStatusCode } from '../../modules/error.js';\nimport history from '../../modules/history.js';\nimport { isLayoutValidForSave, isLayoutValidForSaveAs } from '../../modules/layoutValidation.js';\nimport { STATE_DIRTY, STATE_UNSAVED, getSaveableVisualization, getVisualizationState } from '../../modules/visualization.js';\nimport { sGetCurrent } from '../../reducers/current.js';\nimport { sGetVisualization } from '../../reducers/visualization.js';\nimport { ToolbarDownloadDropdown } from '../DownloadMenu/index.js';\nimport VisualizationOptionsManager from '../VisualizationOptions/VisualizationOptionsManager.js';\nimport ViewDropDown from './ViewDropDown.js';\nconst visualizationSaveAsMutation = {\n  type: 'create',\n  resource: 'eventVisualizations',\n  data: _ref => {\n    let {\n      visualization\n    } = _ref;\n    return visualization;\n  },\n  params: {\n    skipTranslations: true,\n    skipSharing: true\n  }\n};\nconst visualizationSaveMutation = {\n  type: 'update',\n  resource: 'eventVisualizations',\n  id: _ref2 => {\n    let {\n      visualization\n    } = _ref2;\n    return visualization.id;\n  },\n  data: _ref3 => {\n    let {\n      visualization\n    } = _ref3;\n    return visualization;\n  },\n  params: {\n    skipTranslations: true,\n    skipSharing: true\n  }\n};\nexport const MenuBar = _ref4 => {\n  let {\n    onFileMenuAction\n  } = _ref4;\n  const dispatch = useDispatch();\n  const engine = useDataEngine();\n  const current = useSelector(sGetCurrent);\n  const visualization = useSelector(sGetVisualization);\n  const {\n    currentUser\n  } = useCachedDataQuery();\n  const {\n    show: showAlert\n  } = useAlert(_ref5 => {\n    let {\n      message\n    } = _ref5;\n    return message;\n  }, _ref6 => {\n    let {\n      options\n    } = _ref6;\n    return options;\n  });\n  const setCurrent = useCallback(visualization => {\n    dispatch(tSetCurrent(visualization));\n  }, [dispatch]);\n  const setVisualization = useCallback(visualization => {\n    dispatch(acSetVisualization(visualization));\n  }, [dispatch]);\n  const onOpen = id => {\n    const path = `/${id}`;\n    if (history.location.pathname === path) {\n      history.replace({\n        pathname: path\n      }, {\n        isOpening: true\n      });\n    } else {\n      history.push(path);\n    }\n  };\n  const onNew = () => {\n    if (history.location.pathname === '/') {\n      history.replace({\n        pathname: '/'\n      }, {\n        isResetting: true\n      });\n    } else {\n      history.push('/');\n    }\n  };\n  const onDelete = () => {\n    const deletedVisualization = visualization === null || visualization === void 0 ? void 0 : visualization.name;\n    history.push('/');\n    showAlert({\n      message: i18n.t('\"{{- deletedObject}}\" successfully deleted.', {\n        deletedObject: deletedVisualization\n      }),\n      options: {\n        success: true,\n        duration: 2000\n      }\n    });\n  };\n  const onRename = async _ref7 => {\n    let {\n      name,\n      description\n    } = _ref7;\n    const visToSave = await preparePayloadForSave({\n      visualization: getSaveableVisualization(visualization),\n      name,\n      description,\n      engine\n    });\n    await renameVisualization({\n      visualization: visToSave\n    });\n    const updatedVisualization = {\n      ...visualization\n    };\n    const updatedCurrent = {\n      ...current\n    };\n    updatedVisualization.name = updatedCurrent.name = visToSave.name;\n    updatedVisualization.description = updatedCurrent.description = visToSave.description;\n    setVisualization(updatedVisualization);\n    if (visualization === current) {\n      setCurrent(updatedVisualization);\n    } else {\n      setCurrent(updatedCurrent);\n    }\n    showAlert({\n      message: i18n.t('Rename successful'),\n      options: {\n        success: true,\n        duration: 2000\n      }\n    });\n  };\n  const onSave = async function () {\n    let details = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    let copy = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n    const {\n      name,\n      description\n    } = details;\n    if (copy) {\n      postVisualization({\n        visualization: preparePayloadForSaveAs({\n          visualization: getSaveableVisualization(current),\n          name,\n          description\n        })\n      });\n    } else {\n      putVisualization({\n        visualization: await preparePayloadForSave({\n          visualization: getSaveableVisualization(current),\n          name,\n          description,\n          engine\n        })\n      });\n    }\n  };\n  const onSaveComplete = function (res) {\n    let copy = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n    if (res.response.uid) {\n      const locationObject = {\n        pathname: `/${res.response.uid}`\n      };\n      const locationState = {\n        isSaving: true\n      };\n\n      // Save As\n      if (copy) {\n        history.push(locationObject, locationState);\n      }\n      // Save\n      else {\n        history.replace(locationObject, locationState);\n      }\n    }\n  };\n  const onError = error => {\n    console.error('Error:', error);\n    const message = error.errorCode === 'E4030' ? i18n.t(\"This visualization can't be deleted because it is used on one or more dashboards\") : error.message;\n    showAlert({\n      message,\n      options: {\n        [getAlertTypeByStatusCode(error.httpStatusCode)]: true\n      }\n    });\n  };\n  const [postVisualization] = useDataMutation(visualizationSaveAsMutation, {\n    onComplete: onSaveComplete,\n    onError\n  });\n  const [putVisualization] = useDataMutation(visualizationSaveMutation, {\n    onComplete: res => onSaveComplete(res, true),\n    onError\n  });\n  const [renameVisualization] = useDataMutation(visualizationSaveMutation, {\n    onError: () => onError({\n      message: i18n.t('Rename failed')\n    })\n  });\n  return /*#__PURE__*/React.createElement(HoverMenuBar, null, /*#__PURE__*/React.createElement(FileMenu, {\n    currentUser: currentUser,\n    fileType: 'eventVisualization',\n    fileObject: {\n      ...visualization,\n      ...current\n    },\n    defaultFilterVisType: VIS_TYPE_LINE_LIST,\n    onOpen: onOpen,\n    onNew: onNew,\n    onRename: onRename,\n    onSave: [STATE_UNSAVED, STATE_DIRTY].includes(getVisualizationState(current, visualization)) && isLayoutValidForSave({\n      ...current,\n      legacy: visualization === null || visualization === void 0 ? void 0 : visualization.legacy\n    }) ? onSave : undefined,\n    onSaveAs: isLayoutValidForSaveAs(current) ? details => onSave(details, true) : undefined,\n    onShare: onFileMenuAction,\n    onTranslate: onFileMenuAction,\n    onDelete: onDelete,\n    onError: onError\n  }), /*#__PURE__*/React.createElement(ViewDropDown, null), /*#__PURE__*/React.createElement(VisualizationOptionsManager, null), /*#__PURE__*/React.createElement(ToolbarDownloadDropdown, null));\n};\nMenuBar.propTypes = {\n  onFileMenuAction: PropTypes.func.isRequired\n};","import { UpdateButton as UiUpdateButton } from '@dhis2/analytics';\nimport React from 'react';\nimport { useDispatch } from 'react-redux';\nimport { tSetCurrentFromUi } from '../../actions/current.js';\nexport const UpdateButton = () => {\n  const dispatch = useDispatch();\n  const onClick = () => {\n    dispatch(tSetCurrentFromUi());\n  };\n\n  /* TODO: under certain conditions we probably want to\n   * disable this button and/or set a loading state */\n  return /*#__PURE__*/React.createElement(UiUpdateButton, {\n    onClick: onClick\n  });\n};","import { Toolbar as AnalyticsToolbar } from '@dhis2/analytics';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { AppLogo } from './AppLogo.js';\nimport { InterpretationsAndDetailsToggler } from './InterpretationsAndDetailsToggler.js';\nimport { MenuBar } from './MenuBar.js';\nimport { UpdateButton } from './UpdateButton.js';\nexport const Toolbar = _ref => {\n  let {\n    onFileMenuAction\n  } = _ref;\n  return /*#__PURE__*/React.createElement(AnalyticsToolbar, null, /*#__PURE__*/React.createElement(AppLogo, null), /*#__PURE__*/React.createElement(UpdateButton, null), /*#__PURE__*/React.createElement(MenuBar, {\n    onFileMenuAction: onFileMenuAction\n  }), /*#__PURE__*/React.createElement(InterpretationsAndDetailsToggler, null));\n};\nToolbar.propTypes = {\n  onFileMenuAction: PropTypes.func.isRequired\n};","// extracted by mini-css-extract-plugin\nexport default {\"outer\":\"StartScreen_outer__AhLKF\",\"inner\":\"StartScreen_inner__ZPwo2\",\"errorContainer\":\"StartScreen_errorContainer__fZgLb\",\"errorIcon\":\"StartScreen_errorIcon__mPhV+\",\"errorTitle\":\"StartScreen_errorTitle__3-Ewg\",\"errorDescription\":\"StartScreen_errorDescription__Oak-H\",\"title\":\"StartScreen_title__2I80m\",\"section\":\"StartScreen_section__jJYrZ\",\"guide\":\"StartScreen_guide__h9ApW\",\"guideItem\":\"StartScreen_guideItem__vN4W-\",\"visualization\":\"StartScreen_visualization__nRbpe\",\"visIcon\":\"StartScreen_visIcon__6REoJ\"};","import { VisTypeIcon, useCachedDataQuery, VIS_TYPE_LINE_LIST } from '@dhis2/analytics';\nimport { useDataQuery } from '@dhis2/app-runtime';\nimport i18n from '@dhis2/d2-i18n';\nimport { colors } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { acSetLoadError } from '../../actions/loader.js';\nimport { GenericError } from '../../assets/ErrorIcons.js';\nimport { EVENT_TYPE } from '../../modules/dataStatistics.js';\nimport { genericErrorTitle, isVisualizationError } from '../../modules/error.js';\nimport history from '../../modules/history.js';\nimport { sGetLoadError } from '../../reducers/loader.js';\nimport styles from './styles/StartScreen.module.css';\nconst mostViewedQuery = {\n  mostViewed: {\n    resource: 'dataStatistics/favorites',\n    params: _ref => {\n      let {\n        username\n      } = _ref;\n      return {\n        eventType: EVENT_TYPE,\n        pageSize: 6,\n        ...(username ? {\n          username\n        } : {})\n      };\n    }\n  }\n};\nconst useMostViewedVisualizations = (username, error, setLoadError) => {\n  var _mostViewed$data;\n  const mostViewed = useDataQuery(mostViewedQuery, {\n    lazy: !!error,\n    variables: {\n      username\n    },\n    onError: error => setLoadError(error)\n  });\n  return {\n    mostViewed: (_mostViewed$data = mostViewed.data) === null || _mostViewed$data === void 0 ? void 0 : _mostViewed$data.mostViewed,\n    loading: mostViewed.loading || mostViewed.loading,\n    fetching: mostViewed.fetching || mostViewed.fetching,\n    error: mostViewed.error || mostViewed.error\n  };\n};\nconst StartScreen = _ref2 => {\n  var _data$mostViewed;\n  let {\n    error,\n    setLoadError\n  } = _ref2;\n  const {\n    currentUser\n  } = useCachedDataQuery();\n  const data = useMostViewedVisualizations(currentUser.username, error, setLoadError);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.outer\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.inner\n  }, error ? /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.errorContainer,\n    \"data-test\": 'error-container'\n  }, isVisualizationError(error) ? /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.errorIcon\n  }, error.icon()), /*#__PURE__*/React.createElement(\"p\", {\n    className: styles.errorTitle\n  }, error.title), /*#__PURE__*/React.createElement(\"p\", {\n    className: styles.errorDescription\n  }, error.description)) : /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.errorIcon\n  }, GenericError()), /*#__PURE__*/React.createElement(\"p\", {\n    className: styles.errorTitle\n  }, genericErrorTitle), /*#__PURE__*/React.createElement(\"p\", {\n    className: styles.errorDescription\n  }, error.message || error))) : /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.section\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    className: styles.title\n  }, i18n.t('Getting started')), /*#__PURE__*/React.createElement(\"ul\", {\n    className: styles.guide\n  }, /*#__PURE__*/React.createElement(\"li\", {\n    className: styles.guideItem\n  }, i18n.t('All dimensions that you can use to build visualizations are shown in the sections in the left sidebar.')), /*#__PURE__*/React.createElement(\"li\", {\n    className: styles.guideItem\n  }, i18n.t('Add dimensions to the layout above.')), /*#__PURE__*/React.createElement(\"li\", {\n    className: styles.guideItem\n  }, i18n.t('Click a dimension to add or remove conditions.')))), ((_data$mostViewed = data.mostViewed) === null || _data$mostViewed === void 0 ? void 0 : _data$mostViewed.length) > 0 && /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.section\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    className: styles.title\n  }, i18n.t('Your most viewed line lists')), data.mostViewed.map((vis, index) => /*#__PURE__*/React.createElement(\"p\", {\n    key: index,\n    className: styles.visualization,\n    onClick: () => history.push(`/${vis.id}`),\n    \"data-test\": 'start-screen-most-viewed-list-item'\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: styles.visIcon\n  }, /*#__PURE__*/React.createElement(VisTypeIcon, {\n    type: VIS_TYPE_LINE_LIST,\n    useSmall: true,\n    color: colors.grey600\n  })), /*#__PURE__*/React.createElement(\"span\", null, vis.name)))))));\n};\nStartScreen.propTypes = {\n  error: PropTypes.object,\n  setLoadError: PropTypes.func\n};\nconst mapStateToProps = state => ({\n  error: sGetLoadError(state)\n});\nconst mapDispatchToProps = dispatch => ({\n  setLoadError: error => dispatch(acSetLoadError(error))\n});\nexport default connect(mapStateToProps, mapDispatchToProps)(StartScreen);","import { useCachedDataQuery, convertOuLevelsToUids, DIMENSION_ID_ORGUNIT } from '@dhis2/analytics';\nimport { useDataEngine, useDataMutation } from '@dhis2/app-runtime';\nimport { CssVariables } from '@dhis2/ui';\nimport cx from 'classnames';\nimport React, { useState, useEffect } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { tSetCurrent, tSetCurrentFromUi } from '../actions/current.js';\nimport { acClearAll, acClearLoadError, acSetLoadError, acSetVisualizationLoading } from '../actions/loader.js';\nimport { acAddMetadata, tSetInitMetadata } from '../actions/metadata.js';\nimport { acSetUiFromVisualization, acSetUiDataSorting, acClearUiDataSorting, acSetUiOpenDimensionModal, acAddParentGraphMap, acSetShowExpandedLayoutPanel, acSetUiAccessoryPanelActiveTab } from '../actions/ui.js';\nimport { acSetVisualization } from '../actions/visualization.js';\nimport { parseCondition, OPERATOR_IN } from '../modules/conditions.js';\nimport { EVENT_TYPE } from '../modules/dataStatistics.js';\nimport { DIMENSION_ID_EVENT_STATUS, DIMENSION_ID_PROGRAM_STATUS } from '../modules/dimensionConstants.js';\nimport { formatDimensionId } from '../modules/dimensionId.js';\nimport { analyticsGenerationError, analyticsRequestError, dataAccessError, emptyResponseError, eventAccessError, genericServerError, indicatorError, orgUnitAccessError, visualizationNotFoundError } from '../modules/error.js';\nimport history from '../modules/history.js';\nimport { getDefaultOuMetadata, getDynamicTimeDimensionsMetadata, isPopulatedObject, transformMetaDataResponseObject } from '../modules/metadata.js';\nimport { getParentGraphMapFromVisualization } from '../modules/parentGraphMap.js';\nimport { getProgramDimensions } from '../modules/programDimensions.js';\nimport { SYSTEM_SETTINGS_DIGIT_GROUP_SEPARATOR } from '../modules/systemSettings.js';\nimport { DERIVED_USER_SETTINGS_DISPLAY_NAME_PROPERTY, USER_SETTINGS_DISPLAY_PROPERTY } from '../modules/userSettings.js';\nimport { OUTPUT_TYPE_TRACKED_ENTITY, getDimensionMetadataFields, transformVisualization } from '../modules/visualization.js';\nimport { sGetCurrent } from '../reducers/current.js';\nimport { sGetIsVisualizationLoading, sGetLoadError } from '../reducers/loader.js';\nimport { sGetMetadata } from '../reducers/metadata.js';\nimport { sGetUiShowDetailsPanel } from '../reducers/ui.js';\nimport classes from './App.module.css';\nimport { default as DetailsPanel } from './DetailsPanel/DetailsPanel.js';\nimport { default as DialogManager } from './Dialogs/DialogManager.js';\nimport DndContext from './DndContext.js';\nimport { InterpretationModal } from './InterpretationModal/index.js';\nimport Layout from './Layout/Layout.js';\nimport LoadingMask from './LoadingMask/LoadingMask.js';\nimport { MainSidebar } from './MainSidebar/index.js';\nimport { default as TitleBar } from './TitleBar/TitleBar.js';\nimport { Toolbar } from './Toolbar/Toolbar.js';\nimport StartScreen from './Visualization/StartScreen.js';\nimport { Visualization } from './Visualization/Visualization.js';\n\n// Used to avoid repeating `history` listener calls -- see below\nlet lastLocation;\nconst dimensionFields = () => 'dimension,dimensionType,filter,program[id],programStage[id],optionSet[id],valueType,legendSet[id],repetition,items[dimensionItem~rename(id)]';\nconst visualizationQuery = {\n  eventVisualization: {\n    resource: 'eventVisualizations',\n    id: _ref => {\n      let {\n        id\n      } = _ref;\n      return id;\n    },\n    // TODO: check if this list is what we need/want (copied from old ER)\n    params: _ref2 => {\n      let {\n        nameProp\n      } = _ref2;\n      return {\n        fields: ['*', `columns[${dimensionFields}]`, `rows[${dimensionFields}]`, `filters[${dimensionFields}]`, `program[id,programType,${nameProp}~rename(name),displayEnrollmentDateLabel,displayIncidentDateLabel,displayIncidentDate,programStages[id,displayName~rename(name),repeatable]]`, 'programStage[id,displayName~rename(name),displayExecutionDateLabel,displayDueDateLabel,hideDueDate,repeatable]', `programDimensions[id,${nameProp}~rename(name),enrollmentDateLabel,incidentDateLabel,programType,displayIncidentDate,displayEnrollmentDateLabel,displayIncidentDateLabel,programStages[id,${nameProp}~rename(name),repeatable,hideDueDate,displayExecutionDateLabel,displayDueDateLabel]]`, 'access', 'href', ...getDimensionMetadataFields(), 'dataElementDimensions[legendSet[id,name],dataElement[id,name]]', 'legend[set[id,displayName],strategy,style,showKey]', 'trackedEntityType[id,displayName~rename(name)]', '!interpretations', '!userGroupAccesses', '!publicAccess', '!displayDescription', '!rewindRelativePeriods', '!userOrganisationUnit', '!userOrganisationUnitChildren', '!userOrganisationUnitGrandChildren', '!externalAccess', '!relativePeriods', '!columnDimensions', '!rowDimensions', '!filterDimensions', '!organisationUnitGroups', '!itemOrganisationUnitGroups', '!indicators', '!dataElements', '!dataElementOperands', '!dataElementGroups', '!dataSets', '!periods', '!organisationUnitLevels', '!organisationUnits', '!user']\n      };\n    }\n  }\n};\nconst dataStatisticsMutation = {\n  resource: 'dataStatistics',\n  params: _ref3 => {\n    let {\n      id\n    } = _ref3;\n    return {\n      favorite: id,\n      eventType: EVENT_TYPE\n    };\n  },\n  type: 'create'\n};\nconst optionsQuery = {\n  options: {\n    resource: 'options',\n    params: _ref4 => {\n      let {\n        optionSetId,\n        codes\n      } = _ref4;\n      return {\n        fields: 'id,code,displayName~rename(name)',\n        filter: [`optionSet.id:eq:${optionSetId}`, `code:in:[${codes.join(',')}]`],\n        paging: false\n      };\n    }\n  }\n};\nconst App = () => {\n  const dataEngine = useDataEngine();\n  const [aboutAOUnitRenderId, setAboutAOUnitRenderId] = useState(1);\n  const [interpretationsUnitRenderId, setInterpretationsUnitRenderId] = useState(1);\n  const [data, setData] = useState();\n  const [previousLocation, setPreviousLocation] = useState();\n  const [initialLoadIsComplete, setInitialLoadIsComplete] = useState(false);\n  const [postDataStatistics] = useDataMutation(dataStatisticsMutation);\n  const dispatch = useDispatch();\n  const metadata = useSelector(sGetMetadata);\n  const current = useSelector(sGetCurrent);\n  const isLoading = useSelector(sGetIsVisualizationLoading);\n  const error = useSelector(sGetLoadError);\n  const showDetailsPanel = useSelector(sGetUiShowDetailsPanel);\n  const {\n    systemSettings,\n    rootOrgUnits,\n    orgUnitLevels,\n    currentUser\n  } = useCachedDataQuery();\n  const digitGroupSeparator = systemSettings[SYSTEM_SETTINGS_DIGIT_GROUP_SEPARATOR];\n  const onFileMenuAction = () => {\n    showDetailsPanel && setAboutAOUnitRenderId(aboutAOUnitRenderId + 1);\n  };\n  const onInterpretationUpdate = () => {\n    showDetailsPanel && setInterpretationsUnitRenderId(interpretationsUnitRenderId + 1);\n  };\n  const parseLocation = location => {\n    const pathParts = location.pathname.slice(1).split('/');\n    const id = pathParts[0];\n    const interpretationId = pathParts[2];\n    return {\n      id,\n      interpretationId\n    };\n  };\n  const loadVisualization = async location => {\n    dispatch(acSetVisualizationLoading(true));\n    const isExisting = location.pathname.length > 1;\n    if (isExisting) {\n      // /currentAnalyticalObject\n      // /${id}/\n      // /${id}/interpretation/${interpretationId}\n      const {\n        id\n      } = parseLocation(location);\n      try {\n        const data = await dataEngine.query(visualizationQuery, {\n          variables: {\n            id,\n            nameProp: currentUser.settings[DERIVED_USER_SETTINGS_DISPLAY_NAME_PROPERTY]\n          }\n        });\n        const {\n          metaData,\n          parentGraphMap\n        } = data.eventVisualization;\n        // Only trigger state updates if relevant data was found\n        if (isPopulatedObject(metaData)) {\n          dispatch(acAddMetadata(transformMetaDataResponseObject(metaData)));\n        }\n        if (isPopulatedObject(parentGraphMap)) {\n          dispatch(acAddParentGraphMap(parentGraphMap));\n        }\n        setData(data);\n      } catch (fetchError) {\n        if (!error && fetchError) {\n          var _fetchError$details;\n          if (((_fetchError$details = fetchError.details) === null || _fetchError$details === void 0 ? void 0 : _fetchError$details.httpStatusCode) === 404) {\n            dispatch(acClearAll({\n              error: visualizationNotFoundError(),\n              digitGroupSeparator,\n              rootOrgUnits\n            }));\n          } else {\n            dispatch(acClearAll({\n              error: fetchError.details.message || genericServerError(),\n              digitGroupSeparator,\n              rootOrgUnits\n            }));\n          }\n        }\n      }\n    } else {\n      dispatch(acClearAll({\n        error: null,\n        digitGroupSeparator,\n        rootOrgUnits\n      }));\n      dispatch(acSetVisualizationLoading(false));\n    }\n    /* When creating a new visualisation it's convenient to have\n     * a lot of space for adding/viewing dimensions */\n    dispatch(acSetShowExpandedLayoutPanel(!isExisting));\n    setInitialLoadIsComplete(true);\n    setPreviousLocation(location.pathname);\n  };\n  const onError = error => {\n    var _error$details;\n    let output;\n    if ((_error$details = error.details) !== null && _error$details !== void 0 && _error$details.errorCode) {\n      switch (error.details.errorCode) {\n        case 'E7132':\n          output = indicatorError();\n          break;\n        case 'E7121':\n        case 'E7123':\n          output = dataAccessError();\n          break;\n        case 'E7120':\n          output = orgUnitAccessError();\n          break;\n        case 'E7217':\n          output = eventAccessError();\n          break;\n        case 'E7144':\n          output = analyticsGenerationError();\n          break;\n        case 'E7145':\n          output = analyticsRequestError();\n          break;\n        default:\n          output = genericServerError();\n      }\n    } else {\n      output = genericServerError();\n    }\n    dispatch(acSetLoadError(output));\n  };\n  const onColumnHeaderClick = dimensionId => dispatch(acSetUiOpenDimensionModal(dimensionId));\n  const onDataSorted = sorting => {\n    if (sorting.direction === 'default') {\n      dispatch(acClearUiDataSorting());\n    } else {\n      dispatch(acSetUiDataSorting(sorting));\n    }\n    dispatch(tSetCurrentFromUi());\n  };\n  const onResponsesReceived = response => {\n    var _response$rows;\n    dispatch(acAddMetadata(transformMetaDataResponseObject(response.metaData.items)));\n    dispatch(acSetVisualizationLoading(false));\n    if (!((_response$rows = response.rows) !== null && _response$rows !== void 0 && _response$rows.length)) {\n      dispatch(acSetLoadError(emptyResponseError()));\n    }\n  };\n  useEffect(() => {\n    dispatch(tSetInitMetadata(rootOrgUnits));\n    loadVisualization(history.location);\n    const unlisten = history.listen(_ref5 => {\n      var _lastLocation, _lastLocation2, _lastLocation3, _location$state, _location$state2, _location$state3, _location$state4, _location$state5;\n      let {\n        location\n      } = _ref5;\n      // Avoid duplicate actions for the same update object. This also\n      // avoids a loop, because dispatching a pop state effect below also\n      // triggers listeners again (but with the same location object key)\n      const {\n        key,\n        pathname,\n        search\n      } = location;\n      if (key === ((_lastLocation = lastLocation) === null || _lastLocation === void 0 ? void 0 : _lastLocation.key) && pathname === ((_lastLocation2 = lastLocation) === null || _lastLocation2 === void 0 ? void 0 : _lastLocation2.pathname) && search === ((_lastLocation3 = lastLocation) === null || _lastLocation3 === void 0 ? void 0 : _lastLocation3.search)) {\n        return;\n      }\n      lastLocation = location;\n      // Dispatch this event for external routing listeners to observe,\n      // e.g. global shell\n      const popStateEvent = new PopStateEvent('popstate', {\n        state: location.state\n      });\n      dispatchEvent(popStateEvent);\n      const isSaving = (_location$state = location.state) === null || _location$state === void 0 ? void 0 : _location$state.isSaving;\n      const isOpening = (_location$state2 = location.state) === null || _location$state2 === void 0 ? void 0 : _location$state2.isOpening;\n      const isResetting = (_location$state3 = location.state) === null || _location$state3 === void 0 ? void 0 : _location$state3.isResetting;\n      const isModalOpening = (_location$state4 = location.state) === null || _location$state4 === void 0 ? void 0 : _location$state4.isModalOpening;\n      const isModalClosing = (_location$state5 = location.state) === null || _location$state5 === void 0 ? void 0 : _location$state5.isModalClosing;\n      const isValidLocationChange = previousLocation !== location.pathname && !isModalOpening && !isModalClosing;\n\n      // TODO navigation confirm dialog\n\n      if (isSaving || isOpening || isResetting || isValidLocationChange) {\n        loadVisualization(location);\n      }\n    });\n    return () => unlisten && unlisten();\n  }, []);\n  const addOptionSetsMetadata = async visualization => {\n    const optionSetsMetadata = {};\n    const dimensions = [...(visualization.columns || []), ...(visualization.rows || []), ...(visualization.filters || [])];\n    for (const dimension of dimensions) {\n      var _dimension$optionSet, _dimension$filter;\n      if (dimension !== null && dimension !== void 0 && (_dimension$optionSet = dimension.optionSet) !== null && _dimension$optionSet !== void 0 && _dimension$optionSet.id && (_dimension$filter = dimension.filter) !== null && _dimension$filter !== void 0 && _dimension$filter.startsWith(OPERATOR_IN)) {\n        const optionSetId = dimension.optionSet.id;\n        const data = await dataEngine.query(optionsQuery, {\n          variables: {\n            optionSetId,\n            codes: parseCondition(dimension.filter)\n          }\n        });\n        if (data !== null && data !== void 0 && data.options) {\n          // update options in the optionSet metadata used for the lookup of the correct\n          // name from code (options for different option sets have the same code)\n          optionSetsMetadata[optionSetId] = {\n            ...metadata[optionSetId],\n            options: data.options.options\n          };\n        }\n      }\n    }\n    if (Object.keys(optionSetsMetadata).length) {\n      dispatch(acAddMetadata(optionSetsMetadata));\n    }\n  };\n  const addTrackedEntityTypeMetadata = visualization => {\n    const {\n      id,\n      name\n    } = visualization.trackedEntityType || {};\n    if (id && name) {\n      dispatch(acAddMetadata({\n        [id]: {\n          id,\n          name\n        }\n      }));\n    }\n  };\n  const addFixedDimensionsMetadata = visualization => {\n    const fixedDimensionsMetadata = {};\n    const dimensions = [...(visualization.columns || []), ...(visualization.rows || []), ...(visualization.filters || [])];\n    for (const dimension of dimensions.filter(d => {\n      var _d$program;\n      return [DIMENSION_ID_ORGUNIT, DIMENSION_ID_EVENT_STATUS, DIMENSION_ID_PROGRAM_STATUS].includes(d.dimension) && ((_d$program = d.program) === null || _d$program === void 0 ? void 0 : _d$program.id);\n    })) {\n      const dimensionId = formatDimensionId({\n        dimensionId: dimension.dimension,\n        programId: dimension.program.id,\n        outputType: visualization.outputType\n      });\n      const metadata = getProgramDimensions(dimension.program.id)[dimensionId];\n      if (metadata) {\n        fixedDimensionsMetadata[dimensionId] = metadata;\n      }\n    }\n    if (visualization.outputType === OUTPUT_TYPE_TRACKED_ENTITY && dimensions.some(d => d.dimension === DIMENSION_ID_ORGUNIT)) {\n      fixedDimensionsMetadata[DIMENSION_ID_ORGUNIT] = getDefaultOuMetadata(visualization.outputType)[DIMENSION_ID_ORGUNIT];\n    }\n    if (Object.keys(fixedDimensionsMetadata).length) {\n      dispatch(acAddMetadata(fixedDimensionsMetadata));\n    }\n  };\n  const addProgramDimensionsMetadata = visualization => {\n    const programDimensionsMetadata = {};\n    visualization.programDimensions.forEach(program => {\n      programDimensionsMetadata[program.id] = program;\n      const timeDimensions = getDynamicTimeDimensionsMetadata(program);\n      Object.keys(timeDimensions).forEach(timeDimensionId => {\n        const formattedId = formatDimensionId({\n          dimensionId: timeDimensionId,\n          programId: program.id,\n          outputType: visualization.outputType\n        });\n        programDimensionsMetadata[formattedId] = {\n          ...timeDimensions[timeDimensionId],\n          id: formattedId\n        };\n      });\n      if (program.programStages) {\n        program.programStages.forEach(stage => {\n          programDimensionsMetadata[stage.id] = stage;\n        });\n      }\n    });\n    if (Object.keys(programDimensionsMetadata).length) {\n      dispatch(acAddMetadata(programDimensionsMetadata));\n    }\n  };\n  useEffect(() => {\n    if (data !== null && data !== void 0 && data.eventVisualization) {\n      dispatch(acClearLoadError());\n      dispatch(tSetInitMetadata(rootOrgUnits));\n      const visualization = transformVisualization(convertOuLevelsToUids(orgUnitLevels, data.eventVisualization));\n      addOptionSetsMetadata(visualization);\n      addTrackedEntityTypeMetadata(visualization);\n      addFixedDimensionsMetadata(visualization);\n      if (visualization.outputType === OUTPUT_TYPE_TRACKED_ENTITY) {\n        addProgramDimensionsMetadata(visualization);\n        dispatch(acSetUiAccessoryPanelActiveTab());\n      }\n      dispatch(acAddParentGraphMap(getParentGraphMapFromVisualization(visualization)));\n      dispatch(acSetVisualization(visualization));\n      dispatch(tSetCurrent(visualization));\n      dispatch(acSetUiFromVisualization(visualization));\n      dispatch(tSetCurrentFromUi({\n        validateOnly: true\n      }));\n      postDataStatistics({\n        id: visualization.id\n      });\n    }\n  }, [data]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: cx(classes.eventReportsApp, classes.flexCt, classes.flexDirCol)\n  }, /*#__PURE__*/React.createElement(Toolbar, {\n    onFileMenuAction: onFileMenuAction\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: cx(classes.sectionMain, classes.flexGrow1, classes.flexCt)\n  }, /*#__PURE__*/React.createElement(DndContext, null, /*#__PURE__*/React.createElement(MainSidebar, null), /*#__PURE__*/React.createElement(DialogManager, null), /*#__PURE__*/React.createElement(\"div\", {\n    className: cx(classes.flexGrow1, classes.minWidth0, classes.flexBasis0, classes.flexCt, classes.flexDirCol)\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.mainCenterLayout\n  }, /*#__PURE__*/React.createElement(Layout, null)), /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.mainCenterTitlebar\n  }, /*#__PURE__*/React.createElement(TitleBar, null)), /*#__PURE__*/React.createElement(\"div\", {\n    className: cx(classes.mainCenterCanvas)\n  }, initialLoadIsComplete && !current && !isLoading || error ? /*#__PURE__*/React.createElement(StartScreen, null) : /*#__PURE__*/React.createElement(React.Fragment, null, isLoading && /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.loadingCover\n  }, /*#__PURE__*/React.createElement(LoadingMask, null)), current && /*#__PURE__*/React.createElement(Visualization, {\n    isVisualizationLoading: isLoading,\n    visualization: current,\n    displayProperty: currentUser.settings[USER_SETTINGS_DISPLAY_PROPERTY],\n    onResponsesReceived: onResponsesReceived,\n    onColumnHeaderClick: onColumnHeaderClick,\n    onDataSorted: onDataSorted,\n    onError: onError\n  }), current && /*#__PURE__*/React.createElement(InterpretationModal, {\n    onInterpretationUpdate: onInterpretationUpdate\n  }))))), /*#__PURE__*/React.createElement(\"div\", {\n    className: cx(classes.mainRight, {\n      [classes.hidden]: !showDetailsPanel\n    })\n  }, showDetailsPanel && current && /*#__PURE__*/React.createElement(DetailsPanel, {\n    aboutAOUnitRenderId: aboutAOUnitRenderId,\n    interpretationsUnitRenderId: interpretationsUnitRenderId\n  }))), /*#__PURE__*/React.createElement(CssVariables, {\n    colors: true,\n    spacers: true,\n    theme: true\n  }));\n};\nexport default App;","import { combineReducers } from 'redux';\nimport current from './current.js';\nimport loader from './loader.js';\nimport metadata from './metadata.js';\nimport ui from './ui.js';\nimport visualization from './visualization.js';\n\n// Reducers\n\nexport default combineReducers({\n  current,\n  loader,\n  metadata,\n  ui,\n  visualization\n});","import { createStore, applyMiddleware, compose } from 'redux';\nimport { createLogger } from 'redux-logger';\nimport reducer from './reducers/index.js';\nconst configureStore = middleware => {\n  var _window;\n  // Enable Redux devtools if extension is installed instead of redux-logger\n  // const composeEnhancers =\n  //     window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\n  const composeEnhancers = typeof window === 'object' && window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ ? window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({\n    name: 'line-listing-app'\n  }) : compose;\n  if (!window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ && process.env.NODE_ENV !== 'production' && !((_window = window) !== null && _window !== void 0 && _window.Cypress)) {\n    middleware.push(createLogger());\n  }\n  return createStore(reducer, composeEnhancers(applyMiddleware(...middleware)));\n};\nexport default configureStore;","import { acAddMetadata } from '../actions/metadata.js';\nexport default _ref => {\n  let {\n    dispatch\n  } = _ref;\n  return next => action => {\n    if (typeof action.metadata === 'object') {\n      if (Array.isArray(action.metadata)) {\n        dispatch(acAddMetadata(action.metadata.reduce((meta, obj) => ({\n          ...meta,\n          ...obj\n        }), {})));\n      } else {\n        dispatch(acAddMetadata(action.metadata));\n      }\n    }\n    next(action);\n  };\n};","//------------------------------------------------------------------------------\n// <auto-generated>\n// This code was generated by d2-i18n-generate.\n//\n// Changes to this file may cause incorrect behavior and will be lost if\n// the code is regenerated.\n// </auto-generated>\n//------------------------------------------------------------------------------\nimport i18n from '@dhis2/d2-i18n';\nimport arTranslations from './ar/translations.json';\nimport ar_IQTranslations from './ar_IQ/translations.json';\nimport bnTranslations from './bn/translations.json';\nimport ckbTranslations from './ckb/translations.json';\nimport csTranslations from './cs/translations.json';\nimport daTranslations from './da/translations.json';\nimport enTranslations from './en/translations.json';\nimport esTranslations from './es/translations.json';\nimport es_419Translations from './es_419/translations.json';\nimport frTranslations from './fr/translations.json';\nimport hi_INTranslations from './hi_IN/translations.json';\nimport idTranslations from './id/translations.json';\nimport kmTranslations from './km/translations.json';\nimport loTranslations from './lo/translations.json';\nimport myTranslations from './my/translations.json';\nimport nbTranslations from './nb/translations.json';\nimport nlTranslations from './nl/translations.json';\nimport orTranslations from './or/translations.json';\nimport prsTranslations from './prs/translations.json';\nimport psTranslations from './ps/translations.json';\nimport ptTranslations from './pt/translations.json';\nimport pt_BRTranslations from './pt_BR/translations.json';\nimport roTranslations from './ro/translations.json';\nimport ruTranslations from './ru/translations.json';\nimport siTranslations from './si/translations.json';\nimport svTranslations from './sv/translations.json';\nimport tetTranslations from './tet/translations.json';\nimport tgTranslations from './tg/translations.json';\nimport ukTranslations from './uk/translations.json';\nimport urTranslations from './ur/translations.json';\nimport uz_LatnTranslations from './uz_Latn/translations.json';\nimport uz_UZ_CyrlTranslations from './uz_UZ_Cyrl/translations.json';\nimport uz_UZ_LatnTranslations from './uz_UZ_Latn/translations.json';\nimport viTranslations from './vi/translations.json';\nimport zhTranslations from './zh/translations.json';\nimport zh_CNTranslations from './zh_CN/translations.json';\nimport zh_HKTranslations from './zh_HK/translations.json';\nconst namespace = 'default';\ni18n.addResources('ar', namespace, arTranslations);\ni18n.addResources('ar_IQ', namespace, ar_IQTranslations);\ni18n.addResources('bn', namespace, bnTranslations);\ni18n.addResources('ckb', namespace, ckbTranslations);\ni18n.addResources('cs', namespace, csTranslations);\ni18n.addResources('da', namespace, daTranslations);\ni18n.addResources('en', namespace, enTranslations);\ni18n.addResources('es', namespace, esTranslations);\ni18n.addResources('es_419', namespace, es_419Translations);\ni18n.addResources('fr', namespace, frTranslations);\ni18n.addResources('hi_IN', namespace, hi_INTranslations);\ni18n.addResources('id', namespace, idTranslations);\ni18n.addResources('km', namespace, kmTranslations);\ni18n.addResources('lo', namespace, loTranslations);\ni18n.addResources('my', namespace, myTranslations);\ni18n.addResources('nb', namespace, nbTranslations);\ni18n.addResources('nl', namespace, nlTranslations);\ni18n.addResources('or', namespace, orTranslations);\ni18n.addResources('prs', namespace, prsTranslations);\ni18n.addResources('ps', namespace, psTranslations);\ni18n.addResources('pt', namespace, ptTranslations);\ni18n.addResources('pt_BR', namespace, pt_BRTranslations);\ni18n.addResources('ro', namespace, roTranslations);\ni18n.addResources('ru', namespace, ruTranslations);\ni18n.addResources('si', namespace, siTranslations);\ni18n.addResources('sv', namespace, svTranslations);\ni18n.addResources('tet', namespace, tetTranslations);\ni18n.addResources('tg', namespace, tgTranslations);\ni18n.addResources('uk', namespace, ukTranslations);\ni18n.addResources('ur', namespace, urTranslations);\ni18n.addResources('uz_Latn', namespace, uz_LatnTranslations);\ni18n.addResources('uz_UZ_Cyrl', namespace, uz_UZ_CyrlTranslations);\ni18n.addResources('uz_UZ_Latn', namespace, uz_UZ_LatnTranslations);\ni18n.addResources('vi', namespace, viTranslations);\ni18n.addResources('zh', namespace, zhTranslations);\ni18n.addResources('zh_CN', namespace, zh_CNTranslations);\ni18n.addResources('zh_HK', namespace, zh_HKTranslations);\nexport default i18n;","import { CachedDataQueryProvider } from '@dhis2/analytics';\nimport { useDataEngine } from '@dhis2/app-runtime';\nimport React from 'react';\nimport { Provider as ReduxProvider } from 'react-redux';\nimport thunk from 'redux-thunk';\nimport App from './components/App.js';\nimport configureStore from './configureStore.js';\nimport metadataMiddleware from './middleware/metadata.js';\nimport { systemSettingsKeys } from './modules/systemSettings.js';\nimport { USER_SETTINGS_DISPLAY_PROPERTY, DERIVED_USER_SETTINGS_DISPLAY_NAME_PROPERTY } from './modules/userSettings.js';\nimport './locales/index.js';\nconst query = {\n  currentUser: {\n    resource: 'me',\n    params: {\n      fields: 'id,username,displayName~rename(name),settings,authorities'\n    }\n  },\n  systemSettings: {\n    resource: 'systemSettings',\n    params: {\n      key: systemSettingsKeys\n    }\n  },\n  rootOrgUnits: {\n    resource: 'organisationUnits',\n    params: {\n      fields: 'id,displayName,name',\n      userDataViewFallback: true,\n      paging: false\n    }\n  },\n  orgUnitLevels: {\n    resource: 'organisationUnitLevels',\n    params: {\n      fields: 'id,level',\n      paging: false\n    }\n  }\n};\nconst providerDataTransformation = _ref => {\n  let {\n    currentUser,\n    systemSettings,\n    rootOrgUnits,\n    orgUnitLevels\n  } = _ref;\n  return {\n    currentUser: {\n      ...currentUser,\n      settings: {\n        ...currentUser.settings,\n        [DERIVED_USER_SETTINGS_DISPLAY_NAME_PROPERTY]: currentUser.settings[USER_SETTINGS_DISPLAY_PROPERTY] === 'name' ? 'displayName' : 'displayShortName'\n      }\n    },\n    systemSettings,\n    rootOrgUnits: rootOrgUnits.organisationUnits,\n    orgUnitLevels: orgUnitLevels.organisationUnitLevels\n  };\n};\n\n/*\n * The redux store is being created here and this should only happen once,\n * because having multiple store instances leads to very unpredictable behaviour.\n * To avoid having multiple stores, ensure this component only renders once,\n * so it should remain stateless and be the app's most outer container.\n */\n\nconst AppWrapper = () => {\n  const engine = useDataEngine();\n  const store = configureStore([thunk.withExtraArgument(engine),\n  // FIXME: Not needed for ER? Pointed out by @edoardo\n  metadataMiddleware]);\n  if (window.Cypress) {\n    window.store = store;\n  }\n  return /*#__PURE__*/React.createElement(ReduxProvider, {\n    store: store\n  }, /*#__PURE__*/React.createElement(CachedDataQueryProvider, {\n    query: query,\n    dataTransformation: providerDataTransformation\n  }, /*#__PURE__*/React.createElement(App, null)));\n};\nexport default AppWrapper;"],"names":["DIMENSION_TYPES_PROGRAM","Set","DIMENSION_TYPE_DATA_ELEMENT","DIMENSION_TYPE_PROGRAM_ATTRIBUTE","DIMENSION_TYPE_PROGRAM_INDICATOR","DIMENSION_TYPE_CATEGORY","DIMENSION_TYPE_CATEGORY_OPTION_GROUP_SET","DIMENSION_TYPES_YOURS","DIMENSION_TYPE_ORGANISATION_UNIT_GROUP_SET","DIMENSION_TYPE_STATUS","DIMENSION_TYPE_USER","DIMENSION_ID_PROGRAM_STATUS","DIMENSION_ID_EVENT_STATUS","DIMENSION_ID_CREATED_BY","DIMENSION_ID_LAST_UPDATED_BY","DIMENSION_ID_EVENT_DATE","DIMENSION_ID_ENROLLMENT_DATE","DIMENSION_ID_INCIDENT_DATE","DIMENSION_ID_SCHEDULED_DATE","DIMENSION_ID_LAST_UPDATED","DIMENSION_ID_CREATED","DIMENSION_IDS_TIME","getUiDimensionType","_ref","dimensionId","dimensionType","BASE_FIELD_TYPE","getFilteredLayout","layout","excludedIds","_layout$AXIS_ID_COLUM","_layout$AXIS_ID_ROWS","_layout$AXIS_ID_FILTE","ids","Array","isArray","AXIS_ID_COLUMNS","filter","dim","includes","AXIS_ID_ROWS","AXIS_ID_FILTERS","LAYOUT_TYPE_LINE_LIST","getAdaptedUiLayoutByType","type","VIS_TYPE_LINE_LIST","getLineListLayout","VIS_TYPE_PIVOT_TABLE","OPTION_LEGEND_DISPLAY_STRATEGY","OPTION_LEGEND_DISPLAY_STYLE","OPTION_LEGEND_SET","OPTION_SHOW_LEGEND_KEY","OPTION_MEASURE_CRITERIA","OPTION_FONT_SIZE","OPTION_DIGIT_GROUP_SEPARATOR","OPTION_DISPLAY_DENSITY","OPTION_SHOW_HIERARCHY","OPTION_SKIP_ROUNDING","DISPLAY_DENSITY_COMFORTABLE","DISPLAY_DENSITY_NORMAL","DISPLAY_DENSITY_COMPACT","FONT_SIZE_LARGE","FONT_SIZE_NORMAL","FONT_SIZE_SMALL","SEPARATOR_SPACE","options","defaultValue","requestable","savable","getOptionsForUi","Object","entries","reduce","map","option","props","getOptionsForRequest","entry","getOptionsFromVisualization","visualization","optionsFromVisualization","pick","keys","legend","strategy","style","set","showKey","PROP_MOST_RECENT","PROP_OLDEST","getDefaultUiRepetition","getRepetitionFromVisualisation","vis","repetitionByDimension","layoutGetAllDimensions","d","repetition","forEach","_d$programStage","_d$program","formatDimensionId","dimension","programStageId","programStage","id","programId","program","outputType","parseCurrentRepetition","indexes","every","i","Number","isFinite","Error","length","n","parseUiRepetition","isObject","fill","_","sort","a","b","getAdaptedUiSorting","sorting","getDimensionIdFromHeaderName","direction","toUpperCase","undefined","getDefaultFromUi","current","ui","adaptedUi","itemsByDimension","getItemsByDimensionFromUi","output","input","getEntityTypeFromUi","getProgramFromUi","getProgramStageFromUi","getAxesFromUi","getOptionsFromUi","OUTPUT_TYPE_TRACKED_ENTITY","trackedEntityType","_ui$entityType","entityType","_ui$program","_ui$program2","stageId","axisId","dimensionIds","_ui$conditions$id","_ui$conditions$id2","extractDimensionIdParts","dimensionCreate","conditions","condition","legendSet","result","key","SET_CURRENT","CLEAR_CURRENT","DEFAULT_CURRENT","sGetCurrent","state","sGetCurrentId","_state$current","SET_VISUALIZATION","CLEAR_VISUALIZATION","DEFAULT_VISUALIZATION","sGetVisualization","getRequestOptions","STATUS_ACTIVE","STATUS_CANCELLED","STATUS_COMPLETED","STATUS_SCHEDULED","OUTPUT_TYPE_EVENT","OUTPUT_TYPE_ENROLLMENT","getStatusNames","i18n","t","headersMap","DIMENSION_ID_ORGUNIT","getHeadersMap","showHierarchy","assign","headerName","find","outputTypeTimeDimensionMap","transformVisualization","transformedColumns","transformDimensions","transformedRows","transformedFilters","completedOnly","push","items","transformedVisualization","dimensions","_ref2","dimensionObj","DIMENSION_TYPE_PROGRAM_DATA_ELEMENT","DIMENSION_ID_PERIOD","DIMENSION_TYPE_PERIOD","defaultRemoveDimensionProps","removeDimensionPropsBeforeSaving","axis","arguments","prop","getSaveableVisualization","_visualization$progra","_vis$sorting","columns","filters","legacy","getVisualizationState","STATE_EMPTY","STATE_UNSAVED","STATE_SAVED","STATE_DIRTY","dimensionMetadataPropMap","dataElementDimensions","attributeDimensions","programIndicatorDimensions","categoryDimensions","categoryOptionGroupSetDimensions","organisationUnitGroupSetDimensions","dataElementGroupSetDimensions","p","join","inputType","rawStageId","part2","part3","split","reverse","repetitionIndex","substring","indexOf","excludedDimensions","isTimeDimension","has","adaptDimensions","parameters","adaptedDimensions","_dimensionObj$items","_dimensionObj$items2","item","getAdaptedVisualization","adaptedColumns","adaptedRows","adaptedFilters","dimensionHeadersMap","headers","_repetition$indexes","index","adaptedVisualization","analyticsApiEndpointMap","getAnalyticsEndpoint","GenericError","React","height","viewBox","width","xmlns","transform","EmptyBox","fillRule","DataError","visualizationError","icon","title","description","genericServerError","genericErrorTitle","getAlertTypeByStatusCode","statusCode","String","match","validateLineListLayout","dryRun","layoutHasTrackedEntityTypeId","layoutHasProgramId","AXIS","isValid","some","axisItem","dimensionIsValid","requireItems","ouDimension","layoutGetDimension","_layout$program","Boolean","_layout$trackedEntity","isLayoutValidForSaveAs","parseConditionsStringToArray","conditionsString","parseCondition","conditionItem","pop","NULL_VALUE","TRUE_VALUE","FALSE_VALUE","OPERATOR_EQUAL","OPERATOR_GREATER","OPERATOR_GREATER_OR_EQUAL","OPERATOR_LESS","OPERATOR_LESS_OR_EQUAL","OPERATOR_NOT_EQUAL","OPERATOR_EMPTY","OPERATOR_NOT_EMPTY","OPERATOR_IN","OPERATOR_CONTAINS","OPERATOR_NOT_CONTAINS","CASE_INSENSITIVE_PREFIX","NOT_PREFIX","getNumericOperators","getAlphaNumericOperators","getDateOperators","getBooleanValues","addCaseSensitivePrefix","operator","isCaseSensitive","removeCaseSensitivePrefix","checkIsCaseSensitive","getConditionsTexts","_conditionsList$","_conditionsList$2","_conditionsList$3","_conditionsList$4","metadata","formatValueOptions","conditionsList","_metadata$conditions$2","legends","allLegends","legendNames","_allLegends$find","l","name","_metadata$conditions$","optionSet","startsWith","code","_lookupOptionSetOptio","lookupOptionSetOptionMetadata","optionSetId","metaData","_optionSetMetaData$op","optionSetMetaData","VALUE_TYPE_BOOLEAN","VALUE_TYPE_TRUE_ONLY","valueType","value","VALUE_TYPE_ORGANISATION_UNIT","ouId","_metadata$ouId$name","_metadata$ouId","_metadata$ouIdHelper$","ouIdHelper","removePrefix","operators","VALUE_TYPE_LETTER","VALUE_TYPE_TEXT","VALUE_TYPE_LONG_TEXT","VALUE_TYPE_EMAIL","VALUE_TYPE_USERNAME","VALUE_TYPE_URL","VALUE_TYPE_PHONE_NUMBER","VALUE_TYPE_DATE","VALUE_TYPE_TIME","VALUE_TYPE_DATETIME","VALUE_TYPE_NUMBER","VALUE_TYPE_UNIT_INTERVAL","VALUE_TYPE_PERCENTAGE","VALUE_TYPE_INTEGER","VALUE_TYPE_INTEGER_POSITIVE","VALUE_TYPE_INTEGER_NEGATIVE","VALUE_TYPE_INTEGER_ZERO_OR_POSITIVE","getOperatorsByValueType","parts","formatValue","replaceAll","operatorName","capitalCaseOperatorName","getConditionsFromVisualization","rows","acc","_key$programStage","_key$program","_key$legendSet","ACCESSORY_PANEL_TAB_INPUT","ACCESSORY_PANEL_TAB_PROGRAM","ACCESSORY_PANEL_TAB_YOUR","ACCESSORY_PANEL_TAB_TRACKED_ENTITY","ACCESSORY_PANEL_DEFAULT_WIDTH","ARROW_LEFT_KEY","STORAGE_KEY","sanitizeWidth","maxAvailableWidth","window","innerWidth","sanitizedWidth","parseInt","isInteger","setUserSidebarWidthToLocalStorage","localStorage","setItem","removeLastPathSegment","path","substr","lastIndexOf","getOuPath","parentGraphMap","getParentGraphMapFromVisualization","ouAxis","getInverseLayout","layoutGetAxisIdDimensionIdsObject","orgUnit","getAdaptedUiByType","lineListUiAdapter","getSortingFromVisualization","toLowerCase","getUserSidebarWidth","getUserSidebarWidthFromLocalStorage","getItem","SET_LOAD_ERROR","CLEAR_LOAD_ERROR","SET_VISUALIZATION_LOADING","DEFAULT_LOADING","loadingError","isVisualizationLoading","sGetLoadError","loader","sGetIsVisualizationLoading","getCreatedDimension","getMainDimensions","getDefaultOuMetadata","PROGRAM_TYPE_WITH_REGISTRATION","prefixDimensionId","prefix","getProgramDimensions","DIMENSION_TYPE_ORGANISATION_UNIT","getDefaultOrgUnitLabel","NAME_PARENT_PROPERTY_PROGRAM","NAME_PARENT_PROPERTY_STAGE","getTimeDimensions","defaultName","nameParentProperty","nameProperty","formatType","getTimeDimensionName","stage","isAoWithTimeDimension","ao","formatObject","object","obj","getDefaultTimeDimensionsMetadata","values","getProgramAsMetadata","programStages","getDynamicTimeDimensionsMetadata","isPopulatedObject","hasOwn","transformMetaDataResponseObject","metaDataResponseObject","_ref3","USER_ORG_UNIT","USER_ORG_UNIT_CHILDREN","USER_ORG_UNIT_GRANDCHILDREN","_ref4","displayName","dimensionItemType","ADD_METADATA","CLEAR_METADATA","EMPTY_METADATA","sGetMetadata","sGetMetadataById","acAddMetadata","tSetInitMetadata","rootOrgUnits","dispatch","rootOrgUnit","SET_UI_DRAGGING_ID","SET_UI_INPUT","CLEAR_UI_PROGRAM","CLEAR_UI_ENTITY_TYPE","UPDATE_UI_PROGRAM_ID","UPDATE_UI_PROGRAM_STAGE_ID","UPDATE_UI_ENTITY_TYPE_ID","SET_UI_OPTIONS","ADD_UI_LAYOUT_DIMENSIONS","REMOVE_UI_LAYOUT_DIMENSIONS","SET_UI_LAYOUT","SET_UI_FROM_VISUALIZATION","CLEAR_UI","SET_UI_DETAILS_PANEL_OPEN","SET_UI_ACCESSORY_PANEL_OPEN","SET_UI_ACCESSORY_PANEL_WIDTH","SET_UI_ACCESSORY_PANEL_ACTIVE_TAB","SET_UI_EXPANDED_LAYOUT_PANEL","TOGGLE_UI_EXPANDED_VISUALIZATION_CANVAS","TOGGLE_UI_SIDEBAR_HIDDEN","TOGGLE_UI_LAYOUT_PANEL_HIDDEN","SET_UI_ACTIVE_MODAL_DIALOG","SET_UI_ITEMS","REMOVE_UI_ITEMS","ADD_UI_PARENT_GRAPH_MAP","SET_UI_CONDITIONS","SET_UI_REPETITION","REMOVE_UI_REPETITION","CLEAR_UI_REPETITION","SET_UI_SORTING","CLEAR_UI_SORTING","DEFAULT_CONDITIONS","DEFAULT_DIMENSION_CONDITIONS","DEFAULT_DIMENSION_ITEMS","EMPTY_UI","draggingId","accessoryPanelWidth","DEFAULT_UI","showAccessoryPanel","accessoryPanelActiveTab","showDetailsPanel","showExpandedLayoutPanel","hideMainSideBar","hideLayoutPanel","activeModalDialog","sGetUi","sGetUiDraggingId","sGetUiType","sGetUiInput","sGetUiProgram","sGetUiLayout","sGetUiOptions","sGetUiParentGraphMap","sGetUiShowDetailsPanel","sGetUiShowAccessoryPanel","sGetUiAccessoryPanelActiveTab","sGetUiAccessoryPanelWidth","sGetUiSidebarHidden","_sGetUi$hideMainSideB","sGetUiLayoutPanelHidden","_sGetUi$hideLayoutPan","sGetUiShowExpandedVisualizationCanvas","sGetUiActiveModalDialog","sGetUiInputType","sGetUiProgramId","sGetUiProgramStageId","sGetUiEntityTypeId","_sGetUiEntityType","sGetUiEntityType","sGetUiItemsByDimension","sGetUiItems","sGetDimensionIdsFromLayout","axisDimensionIds","concat","sGetUiConditionsByDimension","sGetUiConditions","sGetUiRepetitionByDimension","sGetUiRepetition","renderChipsSelector","createSelector","layoutItems","flat","dataObjects","data","useProgramDimensions","store","useStore","useSelector","getId","eventDateDim","enrollmentDateDim","incidentDateDim","scheduledDateDim","useMemo","getState","hiddenTimeDimensions","getHiddenTimeDimensions","hiddenDimensions","programType","displayIncidentDate","hideDueDate","timeDimensions","getIsProgramDimensionDisabled","acSetUiDraggingId","acClearUiProgram","acClearUiEntityType","acUpdateUiProgramStageId","tClearUiProgramRelatedDimensions","idsToRemove","isProgramDataDimension","isProgramDimension","acRemoveUiLayoutDimensions","acRemoveUiItems","tSetUiInput","acClearUiRepetition","acSetUiInput","tSetUiProgram","acUpdateUiProgramId","tSetUiEntityType","acUpdateUiEntityTypeId","acSetUiOptions","acAddUiLayoutDimensions","acSetUiDetailsPanelOpen","acSetUiAccessoryPanelActiveTab","acSetUiAccessoryPanelWidth","acSetShowExpandedLayoutPanel","acSetUiOpenDimensionModal","acSetUiItems","acAddParentGraphMap","acClearUiDataSorting","acSetVisualization","collectedMetadata","listName","dimensionName","dimensionWrapper","getDimensionMetadataFromVisualization","md","_dimension$programSta","_dimension$program","_dimension$optionSet","prefixedId","timeDimensionId","acSetLoadError","acClearLoadError","acSetVisualizationLoading","acClearAll","error","digitGroupSeparator","acClearCurrent","acSetCurrent","tSetCurrent","tSetCurrentFromUi","validateOnly","currentFromUi","sGetCurrentFromUi","currentOverrides","EVENT_TYPE","createHashHistory","SYSTEM_SETTINGS_DIGIT_GROUP_SEPARATOR","SYSTEM_SETTINGS_HIDE_DAILY_PERIODS","SYSTEM_SETTINGS_HIDE_WEEKLY_PERIODS","SYSTEM_SETTINGS_HIDE_BIWEEKLY_PERIODS","SYSTEM_SETTINGS_HIDE_MONTHLY_PERIODS","SYSTEM_SETTINGS_HIDE_BIMONTHLY_PERIODS","systemSettingsKeys","USER_SETTINGS_DISPLAY_PROPERTY","DERIVED_USER_SETTINGS_DISPLAY_NAME_PROPERTY","navigateToOpenModal","interpretationId","initialFocus","history","pathName","location","pathname","search","stringify","isModalOpening","connect","disabled","aboutAOUnitRenderId","interpretationsUnitRenderId","currentUser","useCachedDataQuery","hasTimeDimension","className","classes","AboutAOUnit","renderId","InterpretationsUnit","visualizationHasTimeDimension","onInterpretationClick","onReplyIconClick","_extends","bind","e","r","hasOwnProperty","call","apply","onClick","Button","primary","renderComponent","useDispatch","visType","dialogId","onAddDimension","dataTest","availableAxes","getAvailableAxes","AddToLayoutButton","SplitButton","clickHandler","component","FlyoutMenu","maxWidth","slice","MenuItem","label","axisName","getAxisNameByLayoutType","getLayoutTypeByVisType","children","isInLayout","onClose","Modal","position","large","ModalTitle","ModalContent","ModalActions","ButtonStrip","secondary","UpdateVisualizationContainer","handler","UpdateButton","BaseCondition","onChange","onRemove","allowCaseSensitive","valueClassName","useEffect","SingleSelectField","selected","placeholder","dense","setOperator","SingleSelectOption","Input","setValue","Checkbox","checked","_ref5","small","PhoneNumberCondition","LetterCondition","CaseSensitiveAlphanumericCondition","showFalseOption","booleanValues","onCheckboxChange","currentValues","setValues","v","BooleanCondition","TrueOnlyCondition","_value","max","DateCondition","DateTimeCondition","TimeCondition","dataElementsQuery","resource","params","fields","trackedEntityAttributesQuery","programIndicatorsQuery","legendSetQuery","paging","_legendSet$legends","_legendSet$legends2","legendSetId","numberOfConditions","onLegendSetChange","enableDecimalSteps","allowIntegerOnly","availableLegendSets","_sGetMetadataById","legendSets","dataEngine","useDataEngine","fetchLegendSets","async","query","_ref6","variables","onError","console","log","apiFetchLegendSetsByDimension","fetchLegendSet","apiFetchLegendSetById","setLegendSet","onOperatorChange","MenuDivider","step","loading","empty","MultiSelectField","startValue","MultiSelectOption","optionsQuery","searchTerm","page","useDebounce","delay","debouncedValue","setDebouncedValue","useState","setTimeout","clearTimeout","useDidUpdateEffect","fn","inputs","didMountRef","useRef","TransferEmptySelection","TransferLeftHeader","setSearchTerm","InputField","TransferRightHeader","TransferSourceEmptyPlaceholder","TRANSFER_OPTIONS_WIDTH","TRANSFER_SELECTED_WIDTH","TRANSFER_HEIGHT","addMetadata","_parts$","selectedOptions","_Object$values$find","setState","nextPage","debouncedSearchTerm","fetchItems","_result$options","response","pager","apiFetchOptions","newOptions","newOption","selectedItem","Transfer","soCode","loadingPicked","sourceEmptyPlaceholder","onEndReached","leftHeader","optionsWidth","selectedWidth","selectedEmptyComponent","rightHeader","renderOption","TransferOption","OrgUnitConditionMaxVersionV41","_selected$path","addParentGraphMap","roots","OrganisationUnitTree","initiallyExpanded","forMetadata","forParentGraphMap","replace","singleSelection","OrgUnitConditionMinVersionV42","_condition$split$","_condition$split","idsString","isOuTreeItem","hasLevelPrefix","hasGroupPrefix","metaDataId","onSelect","useCallback","itemIds","OrgUnitDimension","displayNameProp","settings","OrgUnitCondition","useConfig","serverVersion","minor","defaultProps","isDefaultRepetition","defaultMostRecent","defaultOldest","sRepetition","setRepetition","acSetUiRepetition","mostRecent","oldest","parseInput","parsedValue","commonClasses","nsSeparator","keySeparator","toString","onMostRecentChange","min","onOldestChange","TAB_CONDITIONS","TAB_REPEATABLE_EVENTS","NUMERIC_TYPES","SINGLETON_TYPES","SUPPORTED_TYPES","mapDispatchToProps","setConditionsByDimension","mapStateToProps","ownProps","_ownProps$dimension","_ownProps$dimension2","_extractDimensionIdPa","_ownProps$dimension3","dimensionIdsInLayout","currentTab","setCurrentTab","isProgramIndicator","isOptionSetCondition","canHaveLegendSets","isSupported","setConditionsList","getInitConditions","_conditions$condition","selectedLegendSet","setSelectedLegendSet","addCondition","removeCondition","conditionIndex","filteredConditionsList","setCondition","disableAddButton","isRepeatable","renderConditions","renderConditionsContent","getDividerContent","OptionSetCondition","renderNumericCondition","NumericCondition","IconInfo16","Tooltip","content","placement","closeDelay","onMouseOver","onMouseOut","ref","DimensionModal","closeModal","storeConditions","inputCondition","conditionsArray","cnd","renderTabs","disableRepeatableTab","repeatable","repeatableTab","Tab","TabBar","RepeatableEvents","selectedIds","setUiItems","selectedItems","_result$dimensionItem","apiFetchItemsByDimension","nameProp","newItems","dimensionItems","newItem","si","selectUiItems","FixedDimension","selectedItemsIds","statusNames","ou","renderStatusParagraph","setStatus","itemId","toggle","newIds","renderModalContent","renderProgramStatus","ALL_STATUSES","renderEventStatus","_ref7","dimensionProps","ouUid","display","getStartEndDate","isNaN","Date","parse","isStartEndDate","StartEndDate","startDateStr","endDateStr","startDate","setStartDate","endDate","setEndDate","Field","helpText","styles","inputWidth","IconArrowRight16","color","colors","grey500","OPTION_PRESETS","OPTION_START_END_DATES","getNameFromMetadata","useMetadataNameGetter","_metadata$id","allDimensionIds","useIsInLayout","excludedPeriodTypes","useExcludedPeriods","systemSettings","types","DAILY","WEEKLY","WEEKLYWED","WEEKLYTHU","WEEKLYSAT","WEEKLYSUN","BIWEEKLY","MONTHLY","BIMONTHLY","entryMethod","setEntryMethod","updatePeriodDimensionItems","uiItems","SegmentedControl","BasePeriodDimension","selectedPeriods","DialogManager","DynamicDimension","PeriodDimension","ConditionsManager","DIMENSION_TYPE_ICONS","IconDimensionData16","IconDimensionProgramAttribute16","IconDimensionProgramIndicator16","IconFilter16","IconDimensionCategoryOptionGroupset16","IconDimensionOrgUnitGroupset16","IconDimensionOrgUnit16","IconCheckmarkCircle16","IconUser16","IconCalendar16","DimensionIcon","Icon","ChipBase","conditionsLength","itemsLength","suffix","chipItems","getChipItems","all","cx","DimensionItemBase","dragging","stageName","contextMenu","DIMENSION_PANEL_SOURCE","getDropzoneId","FIRST","LAST","activateAt15pixels","activationConstraint","distance","getIntersectionRatio","target","top","Math","left","right","bottom","targetArea","entryArea","intersectionArea","toFixed","sortCollisionsDesc","rectIntersectionCustom","pointerCoordinates","droppableContainers","pointerRect","y","x","collisions","droppableContainer","rect","intersectionRatio","getIdFromDraggingId","sourceAxis","setSourceAxis","chipConditions","sensor","useSensor","PointerSensor","sensors","useSensors","rearrangeLayoutDimensions","sourceAxisId","sourceIndex","destinationAxisId","destinationIndex","destItems","from","newIndex","sourceList","moved","splice","onDragCancel","DndContext","collisionDetection","onDragStart","active","sortable","containerId","onDragEnd","_over$data","_over$data$current","_over$data$current$so","_over$data$current2","_over$data$current2$s","_over$data$current3","_over$data$current3$s","over","isDroppingInFirstPosition","isDroppingInLastPosition","idx","addDimensionToLayout","DragOverlay","dropAnimation","getDragOverlay","_chipConditions$condi","conditionsTexts","skipRounding","chipStyles","DOWNLOAD_TYPE_PLAIN","DOWNLOAD_TYPE_TABLE","FILE_FORMAT_CSV","FILE_FORMAT_HTML_CSS","FILE_FORMAT_XLS","ID_SCHEME_NAME","PlainDataSourceSubMenu","download","hoverable","format","menuItemProps","MenuItemComponent","HoverMenuListItem","MenuSectionHeader","hideDivider","DownloadMenu","MenuComponent","HoverMenuList","useDownload","relativePeriodDate","baseUrl","analyticsEngine","Analytics","getAnalytics","idScheme","req","request","withPath","withFormat","withTrackedEntityType","withProgram","withOutputType","_current$programStage","withStage","fromVisualization","withTableLayout","withColumns","column","withRows","row","withParameters","dataIdScheme","withOutputIdScheme","withRelativePeriodDate","withAsc","withDesc","url","URL","buildUrl","origin","buildQuery","searchParams","append","open","isDownloadDisabled","ToolbarDownloadDropdown","HoverMenuDropdown","ModalDownloadDropdown","isOpen","setIsOpen","toggleOpen","currentIsOpen","DropdownButton","getHeaderText","stageOffset","repetitionSuffix","repeatEventIndex","getDimensionsWithSuffix","duplicates","sameProgramId","dup","thirdPartyDuplicates","dpid","_metadata$dimension$p","_metadata$dimension$p2","_metadata$dimension$p3","cellIsUndefined","_columnIndex","columnIndex","valueStatus","formatRowValue","rowValue","header","metaDataItems","isUndefined","_metaDataItems$rowVal","uid","legendSetsQuery","legendSetIds","apiFetchLegendSetsByIds","useAnalyticsData","isGlobalLoading","displayProperty","onResponsesReceived","pageSize","sortField","sortDirection","mounted","setLoading","fetching","setFetching","setError","setData","doFetch","_visualization$legend","_visualization$legend2","_visualization$legend3","analyticsResponse","totalPages","rowContext","withDisplayProperty","withPageSize","withPage","withIncludeMetadataDetails","analyticsApiEndpoint","getQuery","fetchAnalyticsData","extractHeaders","defaultMetadata","idMatch","formattedDimensionId","labels","_labels$find","extractRows","filteredRows","rowIndex","rowsCount","filteredRow","headerIndex","headersCount","extractRowContext","headerLegendSetMap","_analyticsResponse$me","LEGEND_DISPLAY_STRATEGY_FIXED","LEGEND_DISPLAY_STRATEGY_BY_DATA_ITEM","valueTypeIsNumeric","getDataTableScrollHeight","isInModal","noTimeDimensionWarningRef","_noTimeDimensionWarni","_noTimeDimensionWarni2","clientHeight","PaginationComponent","offline","Pagination","Visualization","AO","onColumnHeaderClick","onDataSorted","forDashboard","containerRef","dataTableRef","fetchContainerRef","dataTableHeadRef","dataTableFootRef","legendKeyRef","uniqueLegendSets","setUniqueLegendSets","showLegendKey","setShowLegendKey","measuredDimensions","setMeasuredDimensions","containerMaxWidth","paginationMaxWidth","noticeBoxMaxWidth","shouldShowTimeDimensionWarning","visualizationRef","onResize","requestAnimationFrame","_legendKeyRef$current","clientWidth","containerInnerWidth","scrollBox","querySelector","scrollbarWidth","offsetWidth","sizeObserver","ResizeObserver","mountAndObserveContainerRef","node","observe","unobserve","observeVisualizationContainerRef","defaultSorting","getSorting","setPaging","useReducer","newPaging","setPage","pageNum","setPageSize","pageSizeNum","isDisconnected","useDhis2ConnectionStatus","fetchIndicatorTop","containerHeight","headHeight","offsetHeight","visibleBodyHeight","round","allLegendSets","relevantLegendSets","_e$legends","findIndex","sizeClass","displayDensity","sizeComfortable","sizeCompact","sizeNormal","getSizeClass","fontSizeClass","fontSize","fontSizeLarge","fontSizeSmall","fontSizeNormal","getFontSizeClass","colSpan","sortData","formatCellValue","href","rel","moment","VALUE_TYPE_AGE","getFormattedCellValue","renderCellContent","DataTableCell","cell","emptyCell","nowrap","undefinedCell","backgroundColor","LEGEND_DISPLAY_STYLE_FILL","getColorByValueFromLegendSet","LEGEND_DISPLAY_STYLE_TEXT","pluginContainer","fetchContainer","fetchIndicator","visualizationContainer","noTimeDimensionWarning","NoticeBox","warning","DataTable","scrollHeight","scrollWidth","dataTable","DataTableHead","DataTableRow","DataTableColumnHeader","fixed","onSortIconClick","sortIconTitle","headerCell","headerText","dimensionModalHandler","formatCellHeader","DataTableBody","DataTableFoot","stickyFooter","staticStyle","footerCell","stickyNavigation","isLastPage","onPageChange","onPageSizeChange","pageSizeSelectText","pageLength","pageSummaryText","firstItem","lastItem","legendKeyContainer","legendKeyToggle","IconLegend24","toggled","legendKeyWrapper","wrapper","LegendKey","legendKeyScrollbox","Function","prototype","parseBooleans","removeInterpretationQueryParams","parsed","parsedWithoutInterpretationId","isModalClosing","InterpretationModal","onInterpretationUpdate","useInterpretationQueryParams","setParams","listen","_location$state","_location$state2","setIsVisualizationLoading","AnalyticsInterpretationModal","downloadMenuComponent","pluginComponent","getAxisName","onBlur","onFocus","ariaOwns","ariaHaspopup","getAxisItemLabel","isDimensionInLayout","currentAxisId","axisItemHandler","removeItemHandler","menuItems","applicableAxisIds","dimensionMetadata","getAxisIdForDimension","axisLayout","buttonRef","menuIsOpen","setMenuIsOpen","toggleMenu","stopPropagation","IconButton","IconMore16","Layer","onBackdropClick","Popper","reference","MenuItems","_metadata$programStag","_metadata$programId","formatStartEndDate","useLocalizedStartEndDateFormatter","formatter","Intl","DateTimeFormat","dateStyle","startEndDate","dateStr","programName","getNameList","idList","levelString","levelId","renderItems","itemDisplayNames","itemsToRender","numberOverRenderLimit","count","defaultValue_plural","renderNoItemsLabel","renderProgramName","renderItemsSection","itemsList","getItemDisplayNames","levelIds","groupIds","_metadata$dimensionId","_metadata$dimensionId2","BEFORE","AFTER","isLast","overLastDropZone","activeIndex","attributes","listeners","isDragging","isSorting","setNodeRef","transition","useSortable","insertPosition","CSS","Translate","scaleX","scaleY","TooltipContent","random","DimensionMenu","DropZone","firstElementId","isOver","useDroppable","draggingOver","lastDropZoneId","sGetUiDimensionIdsByAxisId","renderChips","SortableContext","Chip","Layout","defaultLayoutStyles","ct","axisGroup","lineListLayoutStyles","DefaultAxis","defaultAxisStyles","componentMap","LineListLayout","isExpanded","sGetUiShowExpandedLayoutPanel","isHidden","LayoutComponent","ButtonIcon","IconChevronUp16","IconChevronDown16","toggleExpanded","grey700","CircularLoader","SingleSelectOptionWithSuffix","Tag","StageSelect","stages","selectedStageId","stretch","SingleSelect","tSetUiStage","tClearUiProgramStageDimensions","filterable","noMatchText","programs","selectedEntityTypeId","ProgramSelect","selectedProgramId","selectedProgram","refetch","useDataQuery","lazy","programDimensionsMap","setProgramDimensionsMap","showStageSelect","section","message","setSelectedProgramId","maxHeight","TypeSelect","selectedTypeId","called","trackedEntityTypes","selectedType","typeId","setSelectedTypeId","InputOption","Radio","getLabelForInputType","InputPanel","_useSelector","visible","selectedInput","setSelectedInput","major","patch","DimensionItemButton","IconSubtract16","DimensionItem","draggableId","IconAdd16","MainSidebarSection","SelectedDimensionsContext","createContext","counts","your","trackedEntity","getIsDimensionSelected","SelectedDimensionsProvider","selectedInputType","providerValue","allSelectedIds","allSelectedIdsSet","Provider","useSelectedDimensions","useContext","MainDimensions","mainDimensions","useMainDimensions","draggableDimensions","subtitle","tabIndex","IconChevronRight16","DIMENSION_LIST_FIELDS","isEndReached","el","scrollTop","DimensionsList","setIsListEndVisible","scrollBoxRef","onScroll","event","onMouseDown","preventDefault","getNoResultsMessage","ACTIONS_RESET","ACTIONS_INIT","ACTIONS_SUCCESS","ACTIONS_ERROR","ACTIONS_SET_LIST_END_VISIBLE","initialState","isListEndVisible","reducer","action","payload","resourceMap","createDimensionsQuery","trackedEntityTypeId","order","DIMENSION_TYPE_ALL","transformResponseData","deDimensionsMapRef","programStageNames","shouldReset","newDuplicateFound","dataElementCount","get","allDimensions","total","ProgramDataDimensionsList","Map","engine","_program$programStage","isVisible","fetchDimensions","clear","useProgramDataDimensions","ProgramDimensions","programDimensions","STAGE_ALL","StageFilter","setSelected","ProgramDimensionsFilter","setDimensionType","stageFilter","setStageFilter","showProgramAttribute","Divider","ProgramDimensionsPanel","selectedTrackedEntityTypeId","isProgramSelectionComplete","container","helptext","bordered","TrackedEntityDimensionsMenuItem","IconFolder16","itemName","ProgramFilter","_data$programs","clearable","clearText","TrackedEntityDimensionsPanel","setDimensions","currDimensions","useTrackedEntityDimensions","createWidthWithinBoundsCalculator","startWidth","element","currentTarget","isKeyboardMode","getBoundingClientRect","startPageX","ceil","virtualWidth","actualWidth","deltaX","useResizableAccessorySidebar","userSettingWidth","isResizing","setIsResizing","setWidth","accessoryStyle","accessoryInnerStyle","onResizeHandleMouseDown","resizeHandleElement","isActive","document","activeElement","blur","previousSibling","computeWidth","onMouseMove","movementX","addEventListener","removeEventListener","once","onResizeHandleFocus","onKeyDown","debouncedOnResize","callback","timer","debounceEventHandler","onResizeHandleDblClick","YOUR_DIMENSIONS_RESOURCE","YOUR_DIMENSIONS_FILTER","YourDimensionsMenuItem","_data$dimensions$dime","YourDimensionsPanel","useYourDimensions","MainSidebar","selectedTabId","isTransitioning","setIsTransitioning","setOpen","newOpen","setSelectedTabId","programDimensionsItem","onTransitionEnd","onDoubleClick","MainSidebarWithSelectedDimensionsProvider","ExpandedVisualizationCanvasToggle","tooltipText","IconFullscreenExit16","IconFullscreen16","defaultTitleClasses","getTitleText","titleState","getSuffix","mergeProps","stateProps","dispatchProps","titleText","titleClasses","getCustomTitleClasses","AppLogo","ToolbarSidebar","IconVisualizationLinelist16","InterpretationsAndDetailsToggler","AnalyticsInterpretationsAndDetailsToggler","isShowing","_option$items$find","DigitGroupSeparator","SelectBaseOption","DisplayDensity","FontSize","inverted","ShowHierarchy","CheckboxBaseOption","SkipRounding","LegendSetSelect","loadingText","setOptions","isLoaded","setIsLoaded","Fragment","LegendSet","LegendDisplayStyle","RadioBaseOption","ShowLegendKey","legendDisplayStrategy","hideStyleOptions","legendEnabled","setLegendEnabled","FieldSet","UiCoreLegend","LegendDisplayStrategy","toArray","Legend","ColSubTotals","ColTotals","HideEmptyRows","RowSubTotals","RowTotals","ShowDimensionLabels","TextBaseOption","_defineProperty","Symbol","toPrimitive","TypeError","_toPrimitive","_toPropertyKey","defineProperty","enumerable","configurable","writable","OperatorSelect","inputMaxWidth","ValueInput","MeasureCriteria","Component","constructor","super","this","defaultState","op1","v1","op2","v2","_op","_v","_op2","_v2","render","Label","paddingTop","onClear","getOptionsByType","getDataTab","getDisplayTemplate","getTotalsTemplate","getEmptyDataTemplate","getLegendTab","getStyleTab","Title","currentVersion","optionsConfig","lineListConfig","VisualizationOptionsManager","selectedOptionConfigKey","setSelectedOptionConfigKey","VisualizationOptions","onUpdate","onOptionsUpdate","initiallyActiveTabKey","ViewDropDown","isSidebarHidden","isLayoutPanelHidden","isDetailsPanelOpen","toggleLayoutPanelHidden","toggleSidebarHidden","resetAccessorySidebarWidth","toggleDetailsPanelOpen","toggleLayoutPanelText","toggleSidebarText","toggleDetailsPanelText","visualizationSaveAsMutation","skipTranslations","skipSharing","visualizationSaveMutation","MenuBar","onFileMenuAction","show","showAlert","useAlert","setCurrent","setVisualization","onSave","details","copy","postVisualization","preparePayloadForSaveAs","putVisualization","preparePayloadForSave","onSaveComplete","res","locationObject","locationState","isSaving","errorCode","httpStatusCode","useDataMutation","onComplete","renameVisualization","HoverMenuBar","FileMenu","fileType","fileObject","defaultFilterVisType","onOpen","isOpening","onNew","isResetting","onRename","visToSave","updatedVisualization","updatedCurrent","success","duration","aoCreatedInEventReportsApp","onSaveAs","onShare","onTranslate","onDelete","deletedVisualization","deletedObject","UiUpdateButton","Toolbar","AnalyticsToolbar","mostViewedQuery","mostViewed","username","eventType","setLoadError","_data$mostViewed","useMostViewedVisualizations","_mostViewed$data","isVisualizationError","VisTypeIcon","useSmall","grey600","lastLocation","dimensionFields","visualizationQuery","eventVisualization","objectName","dataStatisticsMutation","favorite","codes","App","setAboutAOUnitRenderId","setInterpretationsUnitRenderId","previousLocation","setPreviousLocation","initialLoadIsComplete","setInitialLoadIsComplete","postDataStatistics","isLoading","orgUnitLevels","loadVisualization","isExisting","pathParts","parseLocation","fetchError","_fetchError$details","unlisten","_lastLocation","_lastLocation2","_lastLocation3","_location$state3","_location$state4","_location$state5","popStateEvent","PopStateEvent","dispatchEvent","isValidLocationChange","convertOuLevelsToUids","optionSetsMetadata","_dimension$filter","addOptionSetsMetadata","addTrackedEntityTypeMetadata","fixedDimensionsMetadata","addFixedDimensionsMetadata","programDimensionsMetadata","formattedId","addProgramDimensionsMetadata","acSetUiFromVisualization","eventReportsApp","flexCt","flexDirCol","sectionMain","flexGrow1","minWidth0","flexBasis0","mainCenterLayout","mainCenterTitlebar","TitleBar","mainCenterCanvas","StartScreen","loadingCover","LoadingMask","_response$rows","_error$details","mainRight","hidden","DetailsPanel","CssVariables","spacers","theme","combineReducers","transfers","newLayout","_vis$program","_vis$programStage","currentState","layoutGetDimensionIdItemIdsObject","getUiFromVisualization","nextValue","rootOrgUnitIds","root","getPreselectedUi","removedProperty","middleware","composeEnhancers","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","createStore","applyMiddleware","next","meta","namespace","addResources","arTranslations","ar_IQTranslations","bnTranslations","ckbTranslations","csTranslations","daTranslations","enTranslations","esTranslations","es_419Translations","frTranslations","hi_INTranslations","idTranslations","kmTranslations","loTranslations","myTranslations","nbTranslations","nlTranslations","orTranslations","prsTranslations","psTranslations","ptTranslations","pt_BRTranslations","roTranslations","ruTranslations","siTranslations","svTranslations","tetTranslations","tgTranslations","ukTranslations","urTranslations","uz_LatnTranslations","uz_UZ_CyrlTranslations","uz_UZ_LatnTranslations","viTranslations","zhTranslations","zh_CNTranslations","zh_HKTranslations","userDataViewFallback","providerDataTransformation","organisationUnits","organisationUnitLevels","AppWrapper","configureStore","thunk","withExtraArgument","metadataMiddleware","Cypress","ReduxProvider","CachedDataQueryProvider","dataTransformation"],"sourceRoot":""}